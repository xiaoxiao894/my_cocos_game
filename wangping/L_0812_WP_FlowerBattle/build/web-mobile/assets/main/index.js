System.register("chunks:///_virtual/Agent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts"],(function(i){var t,e,s,n,o,r;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy},function(i){s=i.RVOMath,n=i.Vector2,o=i.KeyValuePair,r=i.Line}],execute:function(){e._RF.push({},"99d7fX9+uZBBrp6k8HimNAB","Agent",void 0);i("Agent",function(){function i(){this.agentNeighbors_=[],this.obstaclNeighbors_=[],this.orcaLines_=[],this.position_=new n(0,0),this.prefVelocity_=new n(0,0),this.velocity_=new n(0,0),this.id=0,this.maxNeighbors_=0,this.maxSpeed_=0,this._neighborDist=0,this.radius_=0,this.timeHorizon=0,this.timeHorizonObst=0,this.newVelocity_=new n(0,0),this.mass=1}var e=i.prototype;return e.computeNeighbors=function(i){this.obstaclNeighbors_.length=0;var t=Math.pow(this.timeHorizonObst*this.maxSpeed_+this.radius_,2);i.kdTree.computeObstacleNeighbors(this,t),this.agentNeighbors_.length=0,this.maxNeighbors_>0&&(t=Math.pow(this.neighborDist,2),t=i.kdTree.computeAgentNeighbors(this,t))},e.computeNewVelocity=function(i){this.orcaLines_.length=0;for(var t=this.orcaLines_,e=1/this.timeHorizonObst,o=0;o<this.obstaclNeighbors_.length;++o){for(var a=this.obstaclNeighbors_[o].value,c=a.next,h=a.point.minus(this.position_),l=c.point.minus(this.position_),u=!1,p=0;p<t.length;++p)if(s.det(h.scale(e).minus(t[p].point),t[p].direction)-e*this.radius_>=-s.RVO_EPSILON&&s.det(l.scale(e).minus(t[p].point),t[p].direction)-e*this.radius_>=-s.RVO_EPSILON){u=!0;break}if(!u){var d=s.absSq(h),_=s.absSq(l),m=s.sqr(this.radius_),g=c.point.minus(a.point),y=h.scale(-1).multiply(g)/s.absSq(g),v=s.absSq(h.scale(-1).minus(g.scale(y))),b=new r;if(y<0&&d<=m)a.convex&&(b.point=new n(0,0),b.direction=s.normalize(new n(-h.y,h.x)),t.push(b));else if(y>1&&_<=m)c.convex&&s.det(l,c.direction)>=0&&(b.point=new n(0,0),b.direction=s.normalize(new n(-l.y,l.x)),t.push(b));else if(y>=0&&y<=1&&v<=m)b.point=new n(0,0),b.direction=a.direction.scale(-1),t.push(b);else{var f=void 0,x=void 0;if(y<0&&v<=m){if(!a.convex)continue;c=a;var w=Math.sqrt(d-m);f=new n(h.x*w-h.y*this.radius_,h.x*this.radius_+h.y*w).scale(1/d),x=new n(h.x*w+h.y*this.radius_,-h.x*this.radius_+h.y*w).scale(1/d)}else if(y>1&&v<=m){if(!c.convex)continue;a=c;var N=Math.sqrt(_-m);f=new n(l.x*N-l.y*this.radius_,l.x*this.radius_+l.y*N).scale(1/_),x=new n(l.x*N+l.y*this.radius_,-l.x*this.radius_+l.y*N).scale(1/_)}else{if(a.convex){var q=Math.sqrt(d-m);f=new n(h.x*q-h.y*this.radius_,h.x*this.radius_+h.y*q).scale(1/d)}else f=a.direction.scale(-1);if(c.convex){var S=Math.sqrt(_-m);x=new n(l.x*S+l.y*this.radius_,-l.x*this.radius_+l.y*S).scale(1/_)}else x=a.direction}var V=a.previous,M=!1,O=!1;a.convex&&s.det(f,V.direction.scale(-1))>=0&&(f=V.direction.scale(-1),M=!0),c.convex&&s.det(x,c.direction)<=0&&(x=c.direction,O=!0);var P=a.point.minus(this.position_).scale(e),z=c.point.minus(this.position_).scale(e),L=z.minus(P),k=a==c?.5:this.velocity_.minus(P).multiply(L)/s.absSq(L),H=this.velocity_.minus(P).multiply(f),R=this.velocity_.minus(z).multiply(x);if(k<0&&H<0||a==c&&H<0&&R<0){var A=s.normalize(this.velocity_.minus(P));b.direction=new n(A.y,-A.x),b.point=P.plus(A.scale(this.radius_*e)),t.push(b)}else if(k>1&&R<0){var D=s.normalize(this.velocity_.minus(z));b.direction=new n(D.y,-D.x),b.point=z.plus(D.scale(this.radius_*e)),t.push(b)}else{var B=k<0||k>1||a==c?1/0:s.absSq(this.velocity_.minus(L.scale(k).plus(P))),E=H<0?1/0:s.absSq(this.velocity_.minus(f.scale(H).plus(P))),I=R<0?1/0:s.absSq(this.velocity_.minus(x.scale(R).plus(z)));if(B<=E&&B<=I){b.direction=a.direction.scale(-1);var C=new n(-b.direction.y,b.direction.x);b.point=C.scale(this.radius_*e).plus(P),t.push(b)}else if(E<=I){if(M)continue;b.direction=f;var F=new n(-b.direction.y,b.direction.x);b.point=F.scale(this.radius_*e).plus(P),t.push(b)}else if(!O){b.direction=x.scale(-1);var T=new n(-b.direction.y,b.direction.x);b.point=T.scale(this.radius_*e).plus(z),t.push(b)}}}}}for(var j=t.length,K=1/this.timeHorizon,X=0;X<this.agentNeighbors_.length;++X){var Z=this.agentNeighbors_[X].value,G=Z.position_.minus(this.position_),J=Z.mass/(this.mass+Z.mass),Q=this.mass/(this.mass+Z.mass),U=J>=.5?this.velocity_.minus(this.velocity_.scale(J)).scale(2):this.prefVelocity_.plus(this.velocity_.minus(this.prefVelocity_).scale(2*J)),W=Q>=.5?Z.velocity_.scale(2).scale(1-Q):Z.prefVelocity_.plus(Z.velocity_.minus(Z.prefVelocity_).scale(2*Q)),Y=U.minus(W),$=s.absSq(G),ii=this.radius_+Z.radius_,ti=s.sqr(ii),ei=new r,si=void 0;if($>ti){var ni=Y.minus(G.scale(K)),oi=s.absSq(ni),ri=ni.multiply(G);if(ri<0&&s.sqr(ri)>ti*oi){var ai=Math.sqrt(oi),ci=ni.scale(1/ai);ei.direction=new n(ci.y,-ci.x),si=ci.scale(ii*K-ai)}else{var hi=Math.sqrt($-ti);if(s.det(G,ni)>0){var li=new n(G.x*hi-G.y*ii,G.x*ii+G.y*hi);ei.direction=li.scale(1/$)}else{var ui=new n(G.x*hi+G.y*ii,-G.x*ii+G.y*hi);ei.direction=ui.scale(-1/$)}var pi=Y.multiply(ei.direction);si=ei.direction.scale(pi).minus(Y)}}else{var di=1/i,_i=Y.minus(G.scale(di)),mi=s.abs(_i),gi=_i.scale(1/mi);ei.direction=new n(gi.y,-gi.x),si=gi.scale(ii*di-mi)}ei.point=U.plus(si.scale(J)),t.push(ei)}var yi=this.linearProgram2(t,this.maxSpeed_,this.prefVelocity_,!1,this.newVelocity_);yi<t.length&&this.linearProgram3(t,j,yi,this.maxSpeed_,this.newVelocity_)},e.insertAgentNeighbor=function(i,t){if(this!=i){var e=s.absSq(this.position_.minus(i.position_));if(e<t){this.agentNeighbors_.length<this.maxNeighbors_&&this.agentNeighbors_.push(new o(e,i));for(var n=this.agentNeighbors_.length-1;0!=n&&e<this.agentNeighbors_[n-1].key;)this.agentNeighbors_[n]=this.agentNeighbors_[n-1],--n;this.agentNeighbors_[n]=new o(e,i),this.agentNeighbors_.length==this.maxNeighbors_&&(t=this.agentNeighbors_[this.agentNeighbors_.length-1].key)}}return t},e.insertObstacleNeighbor=function(i,t){var e=i.next,n=s.distSqPointLineSegment(i.point,e.point,this.position_);if(n<t){this.obstaclNeighbors_.push(new o(n,i));for(var r=this.obstaclNeighbors_.length-1;0!=r&&n<this.obstaclNeighbors_[r-1].key;)this.obstaclNeighbors_[r]=this.obstaclNeighbors_[r-1],--r;this.obstaclNeighbors_[r]=new o(n,i)}},e.update=function(i){this.velocity_.copy(this.newVelocity_),this.position_.copy(this.position_.plus(this.velocity_.scale(i)))},e.linearProgram1=function(i,t,e,n,o,r){var a=i[t].point.multiply(i[t].direction),c=s.sqr(a)+s.sqr(e)-s.absSq(i[t].point);if(c<0)return!1;for(var h=Math.sqrt(c),l=-a-h,u=-a+h,p=0;p<t;++p){var d=s.det(i[t].direction,i[p].direction),_=s.det(i[p].direction,i[t].point.minus(i[p].point));if(Math.abs(d)<=s.RVO_EPSILON){if(_<0)return!1}else{var m=_/d;if(d>=0?u=Math.min(u,m):l=Math.max(l,m),l>u)return!1}}if(o)n.multiply(i[t].direction)>0?r.copy(i[t].point.plus(i[t].direction.scale(u))):r.copy(i[t].point.plus(i[t].direction.scale(l)));else{var g=i[t].direction.multiply(n.minus(i[t].point));g<l?r.copy(i[t].point.plus(i[t].direction.scale(l))):g>u?r.copy(i[t].point.plus(i[t].direction.scale(u))):r.copy(i[t].point.plus(i[t].direction.scale(g)))}return!0},e.linearProgram2=function(i,t,e,n,o){n?o.copy(e.scale(t)):s.absSq(e)>s.sqr(t)?o.copy(s.normalize(e).scale(t)):o.copy(e);for(var r=0;r<i.length;++r)if(s.det(i[r].direction,i[r].point.minus(o))>0){var a=o.clone();if(!this.linearProgram1(i,r,t,e,n,o))return o.copy(a),r}return i.length},e.linearProgram3=function(i,t,e,o,a){for(var c=0,h=e;h<i.length;++h)if(s.det(i[h].direction,i[h].point.minus(a))>c){for(var l=[],u=0;u<t;++u)l.push(i[u]);for(var p=t;p<h;++p){var d=new r,_=s.det(i[h].direction,i[p].direction);if(Math.abs(_)<=s.RVO_EPSILON){if(i[h].direction.multiply(i[p].direction)>0)continue;d.point=i[h].point.plus(i[p].point).scale(.5)}else d.point=i[h].point.plus(i[h].direction.scale(s.det(i[p].direction,i[h].point.minus(i[p].point))/_));d.direction=s.normalize(i[p].direction.minus(i[h].direction)),l.push(d)}var m=a.clone();this.linearProgram2(l,o,new n(-i[h].direction.y,i[h].direction.x),!0,a)<l.length&&a.copy(m),c=s.det(i[h].direction,i[h].point.minus(a))}},t(i,[{key:"neighborDist",get:function(){return this._neighborDist},set:function(i){this._neighborDist=i}}]),i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerPylon.ts","./PlayerTurret.ts"],(function(t){var e,n,r,i,o,a,c,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,u=t.Component},function(t){l=t.PlayerPylon},function(t){p=t.PlayerTurret}],execute:function(){var s,y,g,f,h,v,m;o._RF.push({},"bfbc9ELKgdAG5ji9hLF+VZv","AnimationEvent",void 0);var A=a.ccclass,b=a.property;t("AnimationEvent",(s=A("AnimationEvent"),y=b({type:c}),g=b({type:Number}),s((v=e((h=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"target",v,i(e)),r(e,"targetType",m,i(e)),e}n(e,t);var o=e.prototype;return o.AttackAni=function(){1==this.targetType&&this.target.getComponent(l).AttackAni(),2==this.targetType&&this.target.getComponent(p).AttackAni()},o.restFireEvent=function(){1==this.targetType&&this.target.getComponent(l).restFireEvent()},o.start=function(){},o.update=function(t){},e}(u)).prototype,"target",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(h.prototype,"targetType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=h))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnnaAniEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundManager.ts"],(function(n){var t,e,o,u,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,u=n.Component},function(n){i=n.SoundManager}],execute:function(){var a;e._RF.push({},"6b5d8y9z5NO0q+t+vO7a+QZ","AnnaAniEvent",void 0);var r=o.ccclass;o.property,n("AnnaAniEvent",r("AnnaAniEvent")(a=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.start=function(){},o.jumpSoundEvent=function(){i.Instance.playAudio("tiaoyue")},o.jumpSoundEvent1=function(){i.Instance.playAudio("tiaoyueluodi")},o.update=function(n){},e}(u))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/App.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts","./SceneNode.ts","./ResourceManager.ts","./GlobeVariable.ts","./NodePoolManager.ts","./GameManager.ts","./EnemyController.ts","./DropController.ts","./MapShowController.ts","./GoldMineController.ts","./super_html_playable.ts","./BeetleController.ts","./GuideManager.ts","./SoundManager.ts","./DataManager.ts"],(function(e){var n,r,a,t,o,l,i,s,u,p,c,g,f,d,M,m,P,h,y,b,C,x,w,N,T,S;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,t=e.assertThisInitialized,o=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){i=e.cclegacy,s=e._decorator,u=e.Node,p=e.Component,c=e.instantiate},function(e){g=e.PlayerController},function(e){f=e.SceneNode},function(e){d=e.ResourceManager},function(e){M=e.GlobeVariable},function(e){m=e.NodePoolManager},function(e){P=e.GameManager},function(e){h=e.EnemyController},function(e){y=e.default},function(e){b=e.MapShowController},function(e){C=e.default},function(e){x=e.default},function(e){w=e.BeetleController},function(e){N=e.GuideManager},function(e){T=e.SoundManager},function(e){S=e.DataManager}],execute:function(){var A,B,_,v,G,I;i._RF.push({},"49f66t8yLdE/ogkVKJuj0cW","App",void 0);var D=s.ccclass,E=s.property;e("App",(A=D("App"),B=E(u),A(((I=function(e){function n(){for(var n,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(n=e.call.apply(e,[this].concat(o))||this).gameManager=null,a(n,"root",G,t(n)),n}r(n,e);var i=n.prototype;return i.onLoad=function(){var e=o(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.Instance.preloadAudioClips(),n.sceneNode=this.node.getComponent(f),n.mapShowController=this.root.getComponent(b),n.poolManager=m.Instance,n.resManager=d.instance,n.dataManager=S.Instance,e.next=8,n.dataManager.init();case 8:return e.next=10,this.initRes();case 10:n.beetleController=w.Instance,n.playerController=g.Instance,n.enemyController=h.Instance,n.enemyController.init(),n.goldMineController=C.Instance,n.dropController=y.Instance,n.playerController.initPlayer(),n.guideManager=N.Instance,this.gameManager=new P,n.gameManager=this.gameManager,this.gameManager.startGame();case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initRes=function(){var e=o(l().mark((function e(){var r,a,t,o,i,s,u,p,g,f,d,m,P,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.resManager.loadPrefab(M.prefabPath.EnemySpider);case 2:return(r=e.sent)&&n.poolManager.initPool(r,100,M.entifyName.EnemySpider),e.next=6,n.resManager.loadPrefab(M.prefabPath.EnemySpiderL);case 6:return(a=e.sent)&&n.poolManager.initPool(a,100,M.entifyName.EnemySpiderL),e.next=10,n.resManager.loadPrefab(M.prefabPath.BloodBar);case 10:return(t=e.sent)&&n.poolManager.initPool(t,100,M.entifyName.BloodBar),e.next=14,n.resManager.loadPrefab(M.prefabPath.FireArrow);case 14:return(o=e.sent)&&n.poolManager.initPool(o,100,M.entifyName.FireArrow),e.next=18,n.resManager.loadPrefab(M.prefabPath.TurretBullet);case 18:return(i=e.sent)&&n.poolManager.initPool(i,100,M.entifyName.TurretBullet),e.next=22,n.resManager.loadPrefab(M.prefabPath.Beetle);case 22:return(s=e.sent)&&n.poolManager.initPool(s,100,M.entifyName.Beetle),e.next=26,n.resManager.loadPrefab(M.prefabPath.Coin);case 26:return(u=e.sent)&&n.poolManager.initPool(u,100,M.entifyName.Coin),e.next=30,n.resManager.loadPrefab(M.prefabPath.Guid_Arrow3D);case 30:return p=e.sent,n.guidArrow3D=c(p),e.next=34,n.resManager.loadPrefab(M.prefabPath.Guid_ArrowPath);case 34:return(g=e.sent)&&n.poolManager.initPool(g,10,M.entifyName.Guid_ArrowPath),e.next=38,n.resManager.loadPrefab(M.prefabPath.FlowerTx);case 38:return(f=e.sent)&&n.poolManager.initPool(f,10,M.entifyName.FlowerTx),e.next=42,n.resManager.loadPrefab(M.prefabPath.TurretTx);case 42:return(d=e.sent)&&n.poolManager.initPool(d,22,M.entifyName.TurretTx),e.next=46,n.resManager.loadPrefab(M.prefabPath.TurretBombTx);case 46:return(m=e.sent)&&n.poolManager.initPool(m,10,M.entifyName.TurretBombTx),e.next=50,n.resManager.loadPrefab(M.prefabPath.ArrowTX);case 50:return(P=e.sent)&&n.poolManager.initPool(P,10,M.entifyName.ArrowTX),e.next=54,n.resManager.loadPrefab(M.prefabPath.BeetleCollideTx);case 54:(h=e.sent)&&n.poolManager.initPool(h,10,M.entifyName.BeetleCollideTx);case 56:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.start=function(){x.set_google_play_url("https://play.google.com/store/apps/details?gl=US&hl=en-US&id=com.gzgroup.lproject3"),x.set_app_store_url("https://play.google.com/store/apps/details?gl=US&hl=en-US&id=com.gzgroup.lproject3")},i.update=function(e){this.gameManager&&this.gameManager.update(e)},n}(p)).playerController=null,I.enemyController=null,I.beetleController=null,I.sceneNode=null,I.resManager=null,I.poolManager=null,I.dropController=null,I.mapShowController=null,I.goldMineController=null,I.dataManager=null,I.guidArrow3D=null,I.gameManager=null,I.guideManager=null,G=n((v=I).prototype,"root",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/ArroePath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts","./GlobeVariable.ts"],(function(r){var o,e,t,a,n,i,s,l,c,p,u;return{setters:[function(r){o=r.applyDecoratedDescriptor,e=r.inheritsLoose,t=r.initializerDefineProperty,a=r.assertThisInitialized},function(r){n=r.cclegacy,i=r._decorator,s=r.Vec3,l=r.Quat,c=r.Component},function(r){p=r.App},function(r){u=r.GlobeVariable}],execute:function(){var h,d,f,w,g;n._RF.push({},"5896a3zK6pOXo7aKsJyppar","ArroePath",void 0);var v=i.ccclass,A=i.property;r("ArroePath",(h=v("ArroePath"),d=A({tooltip:"箭头间距"}),h((g=o((w=function(r){function o(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return o=r.call.apply(r,[this].concat(n))||this,t(o,"spacing",g,a(o)),o.arrowNodes=[],o}e(o,r);var n=o.prototype;return n.createArrowPathTo=function(r){var o=p.playerController.getPlayer().node;if(o){var e=o.worldPosition,t=new s;s.subtract(t,r,e);var a=t.length();if(a<.01)this.setArrowCount(0);else{var n=Math.floor(a/this.spacing);this.setArrowCount(n),t.normalize();for(var i=0;i<n;i++){var c=this.arrowNodes[i],u=new s;s.scaleAndAdd(u,e,t,this.spacing*(i+1)),c.setWorldPosition(u);var h=new l;l.fromViewUp(h,t,s.UP),c.setWorldRotation(h)}}}},n.setArrowCount=function(r){for(;this.arrowNodes.length<r;){var o=p.poolManager.getNode(u.entifyName.Guid_ArrowPath);o.setParent(p.sceneNode.guideParent),this.arrowNodes.push(o)}for(;this.arrowNodes.length>r;){var e=this.arrowNodes.pop();p.poolManager.returnNode(e),e.removeFromParent()}},n.clearArrows=function(){0!==this.arrowNodes.length&&(this.arrowNodes.forEach((function(r){p.poolManager.returnNode(r),r.removeFromParent()})),this.arrowNodes.length=0)},n.onDestroy=function(){this.clearArrows()},o}(c)).prototype,"spacing",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=w))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/Arrow3D.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,i,n,a;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,n=t.Vec3,a=t.Component}],execute:function(){var r;e._RF.push({},"af633QqRldOyLm+hHzPfqp3","Arrow3D",void 0);var s=i.ccclass;i.property,t("Arrow3D",s("Arrow3D")(r=function(t){function e(){for(var o,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(o=t.call.apply(t,[this].concat(i))||this)._floatingTime=0,o._floatingRotateY=0,o._floatingSpeed=.6,o._floatingAmplitude=.8,o._floatingHeightOffset=11,o._floatingRotateSpeed=180,o}o(e,t);var i=e.prototype;return i.start=function(){},i.setActive=function(t){this.node.active=t},i.playFloatingEffect=function(t,o){this._floatingTime+=t;var e=Math.sin(2*this._floatingTime*Math.PI*this._floatingSpeed)*this._floatingAmplitude;this.node.setWorldPosition(new n(o.x,o.y+this._floatingHeightOffset+e,o.z)),this._floatingRotateY+=this._floatingRotateSpeed*t,this._floatingRotateY%=360,this.node.setRotationFromEuler(-270,this._floatingRotateY,0)},e}(a))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/AspectAdapter38_Safe.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,o,a,r,l,s,p,c,u,h,g,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e._decorator,s=e.Camera,p=e.view,c=e.ResolutionPolicy,u=e.director,h=e.Widget,g=e.Layout,d=e.Component}],execute:function(){var f,m,_,y,b,z,C,v,R,I,w,A,H,D,S,T;r._RF.push({},"90e77nI2dxCzbliXNQV9ZgK","AspectAdapter38_Safe",void 0);var O=l.ccclass,Z=l.property,K=l.executeInEditMode;e("AspectAdapter38_Safe",(f=O("AspectAdapter38_Safe"),m=K(),_=Z({tooltip:"设计分辨率宽"}),y=Z({tooltip:"设计分辨率高"}),b=Z({tooltip:"宽高比值"}),z=Z({tooltip:"镜头小于1:1"}),C=Z({tooltip:"镜头大于1:1"}),v=Z({type:s,tooltip:"镜头小于1:1"}),f(R=m((w=i((I=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return i=e.call.apply(e,[this].concat(r))||this,n(i,"designWidth",w,o(i)),n(i,"designHeight",A,o(i)),n(i,"threshold",H,o(i)),n(i,"greaterThanCameraZoomRatio",D,o(i)),n(i,"lessThanCameraZoomRatio",S,o(i)),n(i,"mainCamera",T,o(i)),i._pending=!1,i._applying=!1,i._lastKey=null,i._onResize=function(){i._pending||(i._pending=!0,i.scheduleOnce(i._applyNow,0))},i._applyNow=function(){if(i._pending=!1,!i._applying){i._applying=!0;var e=p.getVisibleSize(),t=e.width,n=e.height;if(t<=0||n<=0)i._applying=!1;else{if(t/n>=i.threshold){var o=i.designWidth,a=c.FIXED_HEIGHT,r=a+":"+o+"x"+o;i._lastKey!==r&&(i._lastKey=r,p.setDesignResolutionSize(o,o,a),i.scheduleOnce(i._refreshUIOnce,0),i.mainCamera&&(i.mainCamera.orthoHeight=i.greaterThanCameraZoomRatio),console.log("大于1： 1"))}else{var l=i.designWidth,s=i.designHeight,u=c.FIXED_WIDTH,h=u+":"+l+"x"+s;i._lastKey!==h&&(i._lastKey=h,p.setDesignResolutionSize(l,s,u),i.scheduleOnce(i._refreshUIOnce,0),i.mainCamera&&(i.mainCamera.orthoHeight=i.lessThanCameraZoomRatio),console.log("小于1： 1"))}i._applying=!1}}},i._refreshUIOnce=function(){var e=u.getScene();if(e){for(var i,t=a(e.getComponentsInChildren(h));!(i=t()).done;){i.value.updateAlignment()}for(var n,o=a(e.getComponentsInChildren(g));!(n=o()).done;){n.value.updateLayout()}}},i}t(i,e);var r=i.prototype;return r.onLoad=function(){this._onResize()},r.onEnable=function(){p.on("canvas-resize",this._onResize,this),this._onResize()},r.onDisable=function(){p.off("canvas-resize",this._onResize,this)},i}(d)).prototype,"designWidth",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 720}}),A=i(I.prototype,"designHeight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1280}}),H=i(I.prototype,"threshold",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=i(I.prototype,"greaterThanCameraZoomRatio",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=i(I.prototype,"lessThanCameraZoomRatio",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),T=i(I.prototype,"mainCamera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=I))||R)||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/BeetleController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts","./GlobeVariable.ts","./PlayerBeetle.ts"],(function(e){var t,n,l,i,s,o,r;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,l=e.tween,i=e.Vec3},function(e){s=e.App},function(e){o=e.GlobeVariable},function(e){r=e.PlayerBeetle}],execute:function(){n._RF.push({},"3f18eUzfTJKiY+eHNpHtyvZ","BeetleController",void 0),e("BeetleController",function(){function e(){this.beetleList=[]}var n=e.prototype;return n.init=function(){},n.creatBeetleByLevel=function(){o.beetleCurNum>=o.beetleNumLimit||this.realCreatBeetle(s.sceneNode.beetleBirthPos.worldPosition.clone())},n.getBeetleList=function(){return this.beetleList},n.removeBeetle=function(e){var t=this.beetleList.indexOf(e);-1!==t&&this.beetleList.splice(t,1),this.beetleList.length<=0&&(o.beetleIsMoveEnemy=!1),console.log("remove enemy ,num "+this.beetleList.length)},n.realCreatBeetle=function(e){o.beetleCurNum++;var t=s.poolManager.getNode(o.entifyName.Beetle);t.parent=s.sceneNode.beetleParent,t.setWorldPosition(e),t.active=!0;var n=t.getComponent(r);this.beetleList.push(n),console.log("push beetle ,num "+this.beetleList.length),l(t).to(.15,{scale:new i(1,1.2,1)},{easing:"quadOut"}).to(.05,{scale:new i(1.44,1.44,1.44)},{easing:"quadOut"}).start()},n.update=function(e){for(var t=0;t<this.beetleList.length;t++){var n,l=this.beetleList[t];null==l||null==(n=l.getComponent(r))||n.update(e)}},t(e,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/blockRed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DissolveEffect.ts"],(function(e){var t,r,o,s,n,i,c,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator,c=e.MeshRenderer,a=e.Component},function(e){l=e.DissolveEffect}],execute:function(){var f,p,d,u,h;n._RF.push({},"1b249fAUTdBrrmXFt1J4N23","blockRed",void 0);var y=i.ccclass,v=i.property;e("blockRed",(f=y("blockRed"),p=v(l),f((h=t((u=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,o(t,"dissolveEffect",h,s(t)),t}r(t,e);var n=t.prototype;return n.start=function(){this.setMaterByIndex(0,!0)},n.setRed=function(){var e=this;this.setMaterByIndex(1),this.scheduleOnce((function(){e.setMaterByIndex(0)}),.1)},n.setMaterByIndex=function(e,t){void 0===t&&(t=!1),this.dissolveEffect&&this.dissolveEffect.forEach((function(r){r.init();var o=r.node.getComponent(c);if(o){var s=o.getMaterialInstance(0);1===e?s.setProperty("showType",1):0===e?(s.setProperty("showType",0),s.setProperty("dissolveThreshold",0)):2===e&&(s.setProperty("showType",0),s.setProperty("dissolveThreshold",0),r.play(.8))}t&&r.reset()}))},n.update=function(e){},t}(a)).prototype,"dissolveEffect",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=u))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/Blood.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts","./GlobeVariable.ts"],(function(e){var r,o,t,n,i,s,a,l,c,u,d;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.ProgressBar,l=e.tween,c=e.Component},function(e){u=e.App},function(e){d=e.GlobeVariable}],execute:function(){var p,g,b,f,h,y,P;i._RF.push({},"b016bdakR1P6aextvVPnI3u","Blood",void 0);var _=s.ccclass,v=s.property;e("default",(p=_("Blood"),g=v(a),b=v(a),p((y=r((h=function(e){function r(){for(var r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,t(r,"redProgress",y,n(r)),t(r,"greenProgress",P,n(r)),r._bloodMax=100,r._bloodNow=100,r}o(r,e);var i=r.prototype;return i.init=function(e){this._bloodMax=e,this._bloodNow=e,this.redProgress.progress=1,this.greenProgress.progress=1},i.injuryAni=function(e){var r=this;this._bloodNow=Math.max(0,this._bloodNow-e);var o=this._bloodNow/this._bloodMax;this.redProgress.progress=o,l(this.greenProgress).to(.5,{progress:o},{easing:"quadInOut"}).call((function(){r._bloodNow<=0&&r.recycleSelf()})).start()},i.recycleSelf=function(){this.node.active=!1,this.node.removeFromParent(),u.poolManager.returnNode(this.node,d.entifyName.BloodBar)},r}(c)).prototype,"redProgress",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(h.prototype,"greenProgress",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/BooldPaling.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var i,e,r,t,n,l,a,s,p;return{setters:[function(o){i=o.applyDecoratedDescriptor,e=o.inheritsLoose,r=o.initializerDefineProperty,t=o.assertThisInitialized},function(o){n=o.cclegacy,l=o._decorator,a=o.Node,s=o.ProgressBar,p=o.Component}],execute:function(){var u,c,d,b,g,h,f,H,B,v,y;n._RF.push({},"4d84daj2gxHhLkGvL2c8oRE","BooldPaling",void 0);var P=l.ccclass,m=l.property;o("BooldPaling",(u=P("BooldPaling"),c=m(a),d=m(s),b=m(Number),u((f=i((h=function(o){function i(){for(var i,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return i=o.call.apply(o,[this].concat(n))||this,r(i,"bloodPaling",f,t(i)),r(i,"progressBar",H,t(i)),r(i,"bloodHpMax",B,t(i)),r(i,"bloodHp",v,t(i)),r(i,"isBool",y,t(i)),i}e(i,o);var n=i.prototype;return n.resetBloodHp=function(){this.bloodHp=this.bloodHpMax,this.progressBar.progress=1},n.continueGame=function(){this.node.active=!0,this.bloodHp=this.bloodHpMax,this.progressBar.progress=1},n.getBloodHpMax=function(){return this.bloodHpMax},n.subscribeBool=function(o){void 0===o&&(o=1),this.bloodHp<=0?this.node.active=!1:(this.bloodHp-=o,this.bloodPaling.active=!0,this.progressBar.progress=this.bloodHp/this.bloodHpMax)},n.getBloodHp=function(){return this.bloodHp},n.start=function(){this.node.active=this.isBool},n.update=function(o){},i}(p)).prototype,"bloodPaling",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(h.prototype,"progressBar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(h.prototype,"bloodHpMax",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),v=i(h.prototype,"bloodHp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),y=i(h.prototype,"isBool",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobeVariable.ts"],(function(t){var i,e,r,a,o,n,c,l,s,u,p,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,c=t.v3,l=t.Node,s=t.Camera,u=t.Vec3,p=t.Component},function(t){h=t.GlobeVariable}],execute:function(){var m,f,d,b,g,v,y,C;o._RF.push({},"689c1+CRL9H9oHUuPGufvmS","CameraMain",void 0);var P=n.ccclass,w=n.property,M=c(),D=c();t("CameraMain",(m=P("CameraMain"),f=w(l),d=w(s),m((v=i((g=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return i=t.call.apply(t,[this].concat(o))||this,r(i,"target",v,a(i)),r(i,"camera",y,a(i)),r(i,"smoothFactor",C,a(i)),i.initialDirection=c(),i}e(i,t);var o=i.prototype;return o.start=function(){},o.init=function(){this.target&&(u.subtract(this.initialDirection,this.node.worldPosition,this.target.worldPosition),h.isCameraMove=!0)},o.update=function(t){h.isCameraMove&&this.target&&this.camera&&(u.add(M,this.target.worldPosition,this.initialDirection),this.camera.node.getWorldPosition(D),u.lerp(D,D,M,this.smoothFactor),this.camera.node.setWorldPosition(D))},i}(p)).prototype,"target",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(g.prototype,"camera",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(g.prototype,"smoothFactor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),b=g))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterDataJson.ts",["cc"],(function(){var t;return{setters:[function(a){t=a.cclegacy}],execute:function(){t._RF.push({},"38ba3d3Hx5JrqLJ8X+2dXuA","CharacterDataJson",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/CloudParticleEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,a,l,o,c,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,o=t.ParticleSystem,c=t.Color,u=t.tween,s=t.Component}],execute:function(){var p,f,h,d,y,w,C,_,b;a._RF.push({},"0769cwRzWZHe5li52Rcozp0","CloudParticleEffect",void 0);var g=l.ccclass,O=l.property;t("CloudParticleEffect",(p=g("CloudParticleEffect"),f=O(o),p((y=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,r(e,"cloudParticleOuter",y,n(e)),r(e,"fadeDuration",w,n(e)),r(e,"initialOpacity",C,n(e)),r(e,"targetOpacity",_,n(e)),r(e,"particleColor",b,n(e)),e.tweenInstance=null,e._material=null,e._currentColor=new c,e}i(e,t);var a=e.prototype;return a.start=function(){this._material=this.cloudParticleOuter.getMaterialInstance(0),this._currentColor.set(114,114,114,this.initialOpacity),this._material.setProperty("tintColor",this._currentColor)},a.cloudFadeEffct=function(t){var e=this._currentColor.a;t&&e>=this.initialOpacity-1||!t&&e<=this.targetOpacity+1||this.cloudFadeOutCallBack(t?"fadeIn":"fadeOut")},a.cloudFadeOutCallBack=function(t){var e=this;this.tweenInstance&&(this.tweenInstance.stop(),this.tweenInstance=null),this._material||(this._material=this.cloudParticleOuter.getMaterialInstance(0));var i=new c(this._currentColor),r="fadeIn"===t?this.initialOpacity:this.targetOpacity;this.tweenInstance=u(i).to(this.fadeDuration,{a:r},{onUpdate:function(t){e._currentColor.set(t),e._material.setProperty("tintColor",e._currentColor)},easing:"linear"}).call((function(){e.tweenInstance=null})).start()},a.onDestroy=function(){this.tweenInstance&&(this.tweenInstance.stop(),this.tweenInstance=null)},e}(s)).prototype,"cloudParticleOuter",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(d.prototype,"fadeDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),C=e(d.prototype,"initialOpacity",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 127}}),_=e(d.prototype,"targetOpacity",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=e(d.prototype,"particleColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(114,114,114,127)}}),h=d))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/CoinComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventType.ts","./GlobeVariable.ts"],(function(n){var t,i,o,e,a,r,c,u,s,h,l,f,p,m,d;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,o=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,c=n.Label,u=n.Node,s=n.Color,h=n.tween,l=n.Vec3,f=n.Component},function(n){p=n.EventManager},function(n){m=n.EventType},function(n){d=n.GlobeVariable}],execute:function(){var b,C,N,y,_,v,w;a._RF.push({},"7f606LcKa5EEq9+Q3cVdrzP","CoinComponent",void 0);var g=r.ccclass,E=r.property;n("CoinComponent",(b=g("CoinComponent"),C=E(c),N=E(u),b((v=t((_=function(n){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,o(t,"coinNum",v,e(t)),o(t,"breathNode",w,e(t)),t._coinNum=0,t._breathTween=null,t}i(t,n);var a=t.prototype;return a.start=function(){this._coinNum=d.coinStartNum,this.updateCoinNum()},a.onEnable=function(){p.instance.on(m.CoinAdd,this.coinAdd,this),p.instance.on(m.CoinSub,this.coinSub,this),p.instance.on(m.ContinueCoin,this.continueCoin,this)},a.onDisable=function(){p.instance.off(m.CoinAdd,this.coinAdd,this),p.instance.off(m.CoinSub,this.coinSub,this),p.instance.off(m.ContinueCoin,this.continueCoin,this)},a.continueCoin=function(){this._coinNum=d.coinStartNum,this.updateCoinNum()},a.coinAdd=function(n){this._coinNum+=n,this.updateCoinNum(),this.playBreathAni(!0)},a.coinSub=function(n){this._coinNum-=n,this.updateCoinNum(),this.playBreathAni(!1)},a.updateCoinNum=function(){this.coinNum.string=String(Math.max(0,this._coinNum))},a.playBreathAni=function(n){var t=this;this._breathTween&&this._breathTween.stop(),this.coinNum.color=n?(new s).fromHEX("#00ff00"):(new s).fromHEX("#ff0000");var i=h(this.breathNode).to(.08,{scale:new l(1.1,1.1,1.1)},{easing:"quadOut"}).to(.08,{scale:new l(1,1,1)},{easing:"quadIn"}).call((function(){t.coinNum.color=(new s).fromHEX("#FFFFFF")})).start();this._breathTween=i},t}(f)).prototype,"coinNum",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(_.prototype,"breathNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=_))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b21ab/9QsZNQ7vgDt0vtZ9T","Common",void 0);t("Vector2",function(){function t(t,n){this.x=0,this.y=0,this.x=t,this.y=n}var n=t.prototype;return n.plus=function(n){return new t(this.x+n.x,this.y+n.y)},n.minus=function(n){return new t(this.x-n.x,this.y-n.y)},n.multiply=function(t){return this.x*t.x+this.y*t.y},n.scale=function(n){return new t(this.x*n,this.y*n)},n.copy=function(t){return this.x=t.x,this.y=t.y,this},n.clone=function(){return new t(this.x,this.y)},n.substract=function(t,n){return t.x-=n.x,t.y-=n.y,t},n.lengthSqr=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t}()),t("Obstacle",(function(){this.next=void 0,this.previous=void 0,this.direction=void 0,this.point=void 0,this.id=void 0,this.convex=void 0})),t("Line",(function(){this.point=void 0,this.direction=void 0})),t("KeyValuePair",(function(t,n){this.key=void 0,this.value=void 0,this.key=t,this.value=n}));t("RVOMath",function(){function t(){}return t.absSq=function(t){return t.multiply(t)},t.normalize=function(n){return n.scale(1/t.abs(n))},t.distSqPointLineSegment=function(n,i,s){var u=s.minus(n),e=i.minus(n),o=u.multiply(e)/t.absSq(e);return o<0?t.absSq(u):o>1?t.absSq(s.minus(i)):t.absSq(s.minus(n.plus(e.scale(o))))},t.sqr=function(t){return t*t},t.det=function(t,n){return t.x*n.y-t.y*n.x},t.abs=function(n){return Math.sqrt(t.absSq(n))},t.leftOf=function(n,i,s){return t.det(n.minus(s),i.minus(n))},t}()).RVO_EPSILON=1e-5,n._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var t,n,e,a,c,s;return{setters:[function(r){t=r.createClass,n=r.asyncToGenerator,e=r.regeneratorRuntime},function(r){a=r.cclegacy,c=r._decorator,s=r.resources}],execute:function(){var o,i;a._RF.push({},"2fb728aKutEK4RloRDMHAkn","DataManager",void 0);var u=c.ccclass;r("DataManager",u("DataManager")(((i=function(){function r(){this.dataCache={monsters:new Map,characters:new Map}}var a=r.prototype;return a.init=function(){var r=n(e().mark((function r(){return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Promise.all([this.loadMonsterData(),this.loadCharacterData()]);case 3:return console.log("所有数据加载完成"),r.abrupt("return",!0);case 7:return r.prev=7,r.t0=r.catch(0),console.error("数据加载失败:",r.t0),r.abrupt("return",!1);case 11:case"end":return r.stop()}}),r,this,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),a.loadMonsterData=function(){var r=n(e().mark((function r(){var t=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){s.load("config/monsters",(function(e,a){if(e)n(e);else{var c=a instanceof Object&&"json"in a?a.json:a;console.log(c),c&&Array.isArray(c)?(c.forEach((function(r){t.dataCache.monsters.set(r.id,r)})),console.log("已加载怪物数据: "+t.dataCache.monsters.size+" 条"),r()):n(new Error("怪物数据格式不正确"))}}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),a.loadCharacterData=function(){var r=n(e().mark((function r(){var t=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){s.load("config/characters",(function(e,a){if(e)n(e);else{var c=a instanceof Object&&"json"in a?a.json:a;console.log(c),c&&Array.isArray(c)?(c.forEach((function(r){t.dataCache.characters.set(r.id,r)})),console.log("已加载人物数据: "+t.dataCache.characters.size+" 条"),r()):n(new Error("人物数据格式不正确"))}}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),a.getMonsterById=function(r){return this.dataCache.monsters.get(r)||null},a.getAllMonsters=function(){return Array.from(this.dataCache.monsters.values())},a.getCharacterById=function(r){return this.dataCache.characters.get(r)||null},a.getAllCharacters=function(){return Array.from(this.dataCache.characters.values())},t(r,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new r),this._instance}}]),r}())._instance=null,o=i))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DissolveEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,i,n,a,r,o,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,o=e.Material,l=e.SkinnedMeshRenderer,c=e.MeshRenderer,h=e.Component}],execute:function(){var f,m,u,p,_,y;a._RF.push({},"379d8rnrJBLIphfSu77uiVg","DissolveEffect",void 0);var v=r.ccclass,T=r.property;e("DissolveEffect",(f=v("DissolveEffect"),m=T([o]),f((_=t((p=function(e){function t(){for(var t,s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"delayTime",_,n(t)),i(t,"mats",y,n(t)),t._matInstances=[],t._startTime=0,t._playTime=0,t._resetTimes=0,t}s(t,e);var a=t.prototype;return a.start=function(){},a.init=function(){this._matInstances=[],this._createMaterialInstances()},a._createMaterialInstances=function(){var e=this.getComponent(l)||this.getComponent(c);if(e)if(0!==this.mats.length){for(var t=e.materials,s=0;s<this.mats.length;s++){var i=this.mats[s];if(i){var n=null;s<e.materials.length&&(e.setMaterial(i,s),"function"==typeof e.getMaterialInstance&&(n=e.getMaterialInstance(s))),n&&this._matInstances.push(n)}}e.materials=t,this._matInstances.length>0?e.materials=this._matInstances:console.error("DissolveEffect: 未能创建任何材质实例")}else console.error("DissolveEffect: 没有指定材质");else console.error("DissolveEffect: 找不到 SkinnedMeshRenderer 或 MeshRenderer 组件")},a.onEnable=function(){},a.play=function(e){this._playTime=e,this._startTime=Date.now()+1e3*this.delayTime;for(var t=0;t<this._matInstances.length;++t)this._matInstances[t].setProperty("dissolveThreshold",0)},a.onPlayTest=function(e,t){this.play(t-0)},a.update=function(e){if(this._startTime&&this._playTime&&this._startTime<Date.now()){var t=(Date.now()-this._startTime)/1e3/this._playTime;t>=1&&(t=1,this._startTime=0,this._playTime=0);for(var s=0;s<this._matInstances.length;++s)this._matInstances[s].setProperty("dissolveThreshold",t)}},a.reset=function(){this._startTime=0,this._playTime=0},t}(h)).prototype,"delayTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=t(p.prototype,"mats",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=p))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/DropController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts","./GlobeVariable.ts"],(function(t){var n,o,e,i,r,s,a,u;return{setters:[function(t){n=t.createClass},function(t){o=t.cclegacy,e=t.BoxCollider,i=t.RigidBody,r=t.tween,s=t.Vec3},function(t){a=t.App},function(t){u=t.GlobeVariable}],execute:function(){o._RF.push({},"89549TxJV9O6qRARJNPnfaH","DropController",void 0),t("default",function(){function t(){this._dropList=[]}var o=t.prototype;return o.getDropList=function(){return this._dropList},o.continueGame=function(){this._dropList.forEach((function(t){t.removeFromParent(),t.destroy()})),this._dropList=[]},o.dropItem=function(t){var n=this,o=a.poolManager.getNode(u.entifyName.Coin);a.sceneNode.coinParent.addChild(o),o.setWorldPosition(t);var l=t.y,p=l+7,c=l+1;o.getComponent(e).enabled=!0,o.getComponent(i).enabled=!0,r(o).to(.15,{position:new s(t.x,p,t.z)},{easing:"quadOut"}).to(.1,{position:new s(t.x,c,t.z)},{easing:"quadIn"}).to(.05,{position:new s(t.x,c+2,t.z)},{easing:"quadOut"}).to(.05,{position:new s(t.x,c,t.z)},{easing:"quadIn"}).call((function(){n._dropList.push(o)})).start()},o.getAroundDrop=function(t){for(var n=this._dropList.length-1;n>=0;n--){var o=this._dropList[n],e=o.worldPosition.clone(),i=e.x-t.x,r=e.z-t.z;if(i*i+r*r<=u.maxSquareDis){var s;this._dropList.splice(n,1);var a=this._dropList.splice(n,this._dropList.length-n);return(s=this._dropList).unshift.apply(s,a),o}}return null},n(t,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]),t}())._instance=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts","./GlobeVariable.ts","./EnemySpider.ts"],(function(e){var n,t,i,o,s,m;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,i=e.SkeletalAnimation},function(e){o=e.App},function(e){s=e.GlobeVariable},function(e){m=e.EnemySpider}],execute:function(){t._RF.push({},"1f8c9GeXlFOcIJOfTr7b3+c","EnemyController",void 0),e("EnemyController",function(){function e(){this.enemyList=[],this.enemInitList={},this.enemyRvoList=[]}var t=e.prototype;return t.init=function(){var e=this;o.sceneNode.enemyParent.children.length>0&&o.sceneNode.enemyParent.children.forEach((function(n){var t=n.getComponent(m);e.enemInitList[t.node.name]||(e.enemInitList[t.node.name]={}),e.enemInitList[t.node.name].isAttack=!0,0==t.spiderType?e.enemInitList[t.node.name].entifyName=s.entifyName.EnemySpiderL:e.enemInitList[t.node.name].entifyName=s.entifyName.EnemySpider,e.enemInitList[t.node.name].spiderType=t.spiderType,0==t.spiderType?e.enemInitList[t.node.name].speedBig=1.5:e.enemInitList[t.node.name].speedBig=1,e.enemInitList[t.node.name].currentTargetIndex=t.currentIndex,e.enemInitList[t.node.name].worldPosition=t.node.worldPosition.clone(),e.enemInitList[t.node.name].worldRotation=t.node.worldRotation.clone(),e.enemInitList[t.node.name].spiderHp=t.spiderHp,t&&(t.isAttack=!0,e.enemyList.push(t))}))},t.continueGame=function(){for(var e in this.enemyList.length=0,this.enemyRvoList.length=0,this.enemyList=[],this.enemyRvoList=[],this.enemInitList){var n=o.poolManager.getNode(this.enemInitList[e].entifyName);n.parent=o.sceneNode.enemyParent,n.setWorldPosition(this.enemInitList[e].worldPosition),n.setWorldRotation(this.enemInitList[e].worldRotation),n.active=!0,n.getComponent(i).getState("walk_f_1").speed=this.enemInitList[e].speedBig;var t=n.getComponent(m);t.spiderName="spider",t.poolName=this.enemInitList[e].entifyName,t.init(),t.setHp(this.enemInitList[e].spiderHp),t.currentTargetIndex=this.enemInitList[e].currentTargetIndex,t.isAttack=!0,this.enemyList.push(t)}},t.creatEnemyByLevel=function(e){s.isStartGame&&this.realCreatEnemy(o.sceneNode.enemyBirthPos.worldPosition.clone())},t.getEnemyList=function(){return this.enemyList},t.getEnemyRvoList=function(){return this.enemyRvoList},t.setEnemyRvoList=function(e){this.enemyRvoList.push(e),this.removeEnemy(e)},t.removeEnemyRvo=function(e){var n=this.enemyRvoList.indexOf(e);-1!==n&&this.enemyRvoList.splice(n,1)},t.restRvoEnemy=function(){this.enemyRvoList.forEach((function(e,n){setTimeout((function(){e&&(e.rvoLastMove=!0)}),300*n)}))},t.removeEnemy=function(e){var n=this.enemyList.indexOf(e);-1!==n&&this.enemyList.splice(n,1),console.log("remove enemy ,num "+this.enemyList.length)},t.realCreatEnemy=function(e){var n=s.curEnemySpiderNum>s.enemySpiderNumBig?s.entifyName.EnemySpider:s.entifyName.EnemySpiderL,t=o.poolManager.getNode(n);t.parent=o.sceneNode.enemyParent,t.setWorldPosition(e),t.active=!0;var r=t.getComponent(m);if(t.getComponent(i).getState("walk_f_1").speed=1.5,r.spiderName="spider",r.poolName=n,r.init(),setTimeout((function(){r.isAttack=!0}),3),this.enemyList.push(r),console.log("push enemy ,num "+this.enemyList.length),s.curEnemySpiderNum>s.enemySpiderNumBig){s.curEnemySpiderNum=0,t.getComponent(i).getState("walk_f_1").speed=1;var a=o.dataManager.getMonsterById(2);a&&(r.Idtype=a.Idtype,r.hp=a._hp,r.maxHp=a._hp,r.recordHp=a._hp,r.hitPow=a._hitPow)}s.curEnemySpiderNum++},t.update=function(e){for(var n=0;n<this.enemyList.length;n++){var t,i=this.enemyList[n];null==i||null==(t=i.getComponent(m))||t.update(e)}for(var o=0;o<this.enemyRvoList.length;o++){var s,r=this.enemyRvoList[o];null==r||null==(s=r.getComponent(m))||s.update(e)}},n(e,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/EnemySpider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./Simulator.ts","./App.ts","./GlobeVariable.ts","./Common.ts","./SoundManager.ts","./BooldPaling.ts","./RVOUtils.ts","./DissolveEffect.ts","./Flower.ts","./blockRed.ts"],(function(e){var t,i,n,o,s,a,r,l,h,d,c,u,p,m,f,v,y,g,P,b,w,I,S,k,M,_,x,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createClass},function(e){a=e.cclegacy,r=e._decorator,l=e.Material,h=e.SkinnedMeshRenderer,d=e.Node,c=e.ParticleSystem,u=e.Vec3,p=e.SkeletalAnimation,m=e.MeshRenderer,f=e.v2,v=e.Vec2,y=e.tween},function(e){g=e.default},function(e){P=e.Simulator},function(e){b=e.App},function(e){w=e.GlobeVariable},function(e){I=e.RVOMath},function(e){S=e.SoundManager},function(e){k=e.BooldPaling},function(e){M=e.default},function(e){_=e.DissolveEffect},function(e){x=e.Flower},function(e){A=e.blockRed}],execute:function(){var H,B,N,T,E,R,z,C,D,V,O,F,G,j,W,L,q,X,U,J,K,Q,Y,Z,$;a._RF.push({},"57677vBurFBw5ueKgsqX32Y","EnemySpider",void 0);var ee=e("enemyStateType",function(e){return e.Idle="idle",e.Move="move",e.Hit="hit",e.Attack="attack",e.Die="die",e.Walk="walk",e.Track="track",e}({})),te=r.ccclass,ie=r.property;e("EnemySpider",(H=te("EnemySpider"),B=ie(l),N=ie(l),T=ie(h),E=ie(_),R=ie(d),z=ie(c),C=ie(c),D=ie(Number),V=ie(Boolean),O=ie(Number),F=ie(Number),H((W=t((j=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"baseMaterial",W,o(t)),n(t,"grayMaterial",L,o(t)),n(t,"skinnedMeshRenderer",q,o(t)),n(t,"dissolveEffect",X,o(t)),n(t,"hitPosNode",U,o(t)),n(t,"hitParticle",J,o(t)),n(t,"hitParticle1",K,o(t)),t.machineState=ee.Move,t._blood=null,t.hitRangeV3=null,t.poolName=null,t.spiderName="spider",t._bloodOffset=new u(0,3,0),t._hp=1,t.hp=1,t.maxHp=1,t.recordHp=1,t.hitPow=2,t.endIsMove=!0,t._radius=1.5,t._rvoSpeed=20,t.isRvo=!1,t.blockIndex=0,t.speed=5,t.movePhase=1,t.rvoLastMove=!1,t.currentTargetIndex=0,t.dieGray=!1,t.flowerEat=!1,t.selfScal=null,n(t,"currentIndex",Q,o(t)),n(t,"isInitCraet",Y,o(t)),n(t,"spiderHp",Z,o(t)),n(t,"spiderType",$,o(t)),t.Idtype=0,t.scheduleId=void 0,t.scheduleId1=void 0,t.isAttack=!1,t._agentHandleId=-1,t._walkTween=null,t._curState=null,t}i(t,e);var a=t.prototype;return a.setSpiderPos=function(){this.currentTargetIndex=8},a.start=function(){this.selfScal=this.node.scale.clone(),this.isInitCraet&&(this.init(),this.currentTargetIndex=this.currentIndex,this._hp=this.spiderHp,this.hp=this._hp,this.maxHp=this._hp,this.recordHp=this._hp,this.isAttack=!0,0==this.spiderType?this.node.getComponent(p).getState("walk_f_1").speed=1.5:1==this.spiderType&&(this.node.getComponent(p).getState("walk_f_1").speed=1))},a.setHp=function(e){this._hp=e,this.hp=e,this.maxHp=e,this.recordHp=e},a.init=function(){var e=b.dataManager.getMonsterById(1);e&&(this._hp=e._hp,this.hitPow=e._hitPow,this.Idtype=e.Idtype),this.reset(),this.Idtype=0,this.agentHandleId=-1,this.setMaterByIndex(0,!0),this.blockIndex=w.blockIndex,w.blockIndex++,w.blockIndex>=b.sceneNode.moveBlockPos.children.length&&(w.blockIndex=0),this.move()},a.setMaterByIndex=function(e,t){void 0===t&&(t=!1),this.dissolveEffect&&this.dissolveEffect.forEach((function(i){i.init();var n=i.node.getComponent(m);if(n){var o=n.getMaterialInstance(0);1===e?o.setProperty("showType",1):0===e?(o.setProperty("showType",0),o.setProperty("dissolveThreshold",0)):2===e&&(o.setProperty("showType",0),o.setProperty("dissolveThreshold",0),o.setProperty("showTypeGray",1))}t&&i.reset()}))},a.baseHit=function(e,t,i){var n=this;void 0===i&&(i=1),this.hp<=0||this.isAttack&&(this.hitRangeV3=new u(t.x,t.y,t.z),this.hitPow=i,this.hitEffct(),S.Instance.playAudio("zhizhushouji"),this.setMaterByIndex(1),this.machineState!=ee.Die&&(this.machineState!=ee.Hit&&(this.machineState=ee.Hit),this.takeDamage(e),this.setShowHp(e)),this.scheduleOnce((function(){n.dieGray||n.setMaterByIndex(0)}),.1))},a.hitEffct=function(e){var t;void 0===e&&(e=null);var i=b.poolManager.getNode(w.entifyName.ArrowTX);if(this.hitParticle&&this.hitParticle.node){i.parent=null==(t=this.hitParticle)?void 0:t.node.parent,i.setPosition(this.hitParticle.node.position),i.active=!0;var n=i.getChildByName("jizhong").getComponent(c);n.play(),this.scheduleOnce((function(){n.stop(),n.clear(),i.active=!1,i.removeFromParent(),b.poolManager.returnNode(i,w.entifyName.ArrowTX),e&&e()}),1.5)}},a.baseHit1=function(e,t,i){var n=this;void 0===i&&(i=1),this.hp<=0||this.isAttack&&(this.hitRangeV3=new u(t.x,t.y,t.z),this.hitPow=i,this.hitEffct1(),S.Instance.playAudio("zhizhushouji"),this.setMaterByIndex(1),this.machineState!=ee.Die&&(this.machineState!=ee.Hit&&(this.machineState=ee.Hit),this.takeDamage(e),this.setShowHp(e)),this.scheduleOnce((function(){n.dieGray||n.setMaterByIndex(0)}),.1))},a.hitEffct1=function(e){void 0===e&&(e=null);var t=b.poolManager.getNode(w.entifyName.BeetleCollideTx);t.parent=this.hitParticle1.node.parent,t.setPosition(this.hitParticle1.node.position),t.active=!0;var i=t.getChildByName("jizhong").getComponent(c);i.play(),this.scheduleOnce((function(){i.stop(),i.clear(),t.active=!1,t.removeFromParent(),b.poolManager.returnNode(t,w.entifyName.BeetleCollideTx),e&&e()}),1.5)},a.turretHit=function(e,t,i){var n=this;void 0===i&&(i=8),this.hp<=0||this.isAttack&&(this.hitRangeV3=new u(t.x,t.y,t.z),this.hitPow=i,this.setMaterByIndex(1),this.machineState!=ee.Die&&(this.machineState!=ee.Hit&&(this.machineState=ee.Hit),this.takeDamage(e),this.setShowHp(e)),this.scheduleOnce((function(){n.dieGray||n.setMaterByIndex(0)}),.1))},a.setShowHp=function(e){this._blood&&(this._blood.node.active=!0,this._blood.injuryAni(e))},a.attackEvent=function(){if(w.isBlock){b.sceneNode.QianBiJuMa.forEach((function(e){e.getComponent(A).setRed()}));var e=b.sceneNode.juma01.getChildByName("BloodPaling");e.getComponent(k).subscribeBool(),e.getComponent(k).getBloodHp()<=0&&(b.sceneNode.juma01.active=!1,w.isBlock=!1,w.blockRest=!1,w.isFirstBlock=!1,e.getComponent(k).resetBloodHp(),this.isRvo=!1,b.enemyController.restRvoEnemy())}},a.move=function(){this.machineState!=ee.Die&&w.isStartGame&&(this.machineState!=ee.Move&&(this.machineState=ee.Move),this.characterSkeletalAnimation.getState("walk_f_1").isPlaying||this.characterSkeletalAnimation.play("walk_f_1"))},a.trackMonster=function(){var e=P.instance.addAgent(M.v3t2(this.node.worldPosition.clone()),this._radius,this._rvoSpeed,null,1);P.instance.getAgentByAid(e).neighborDist=2.5*this._radius,this.agentHandleId=e,this.machineState=ee.Track},a.moveByRvo=function(e){if(-1!=this.agentHandleId){var t=new u;u.copy(t,this.node.worldPosition);var i=new u;if(b.sceneNode.moveBlockPos.children[this.blockIndex].getWorldPosition(i),u.distance(t,i)<=2.5){if(this.attack1())return}else{var n=P.instance.getAgentPosition(this.agentHandleId),o=new u(n.x,i.y,n.y),s=this.node.worldPosition.clone();if(u.distance(s,o)>1){u.lerp(s,s,o,1*e),this.node.setWorldPosition(s)}}}},a.setPreferredVelocities=function(e){if(void 0===e&&(e=null),!(this.agentHandleId<0)){var t=this.agentHandleId,i=P.instance.getAgentByAid(t),n=P.instance.getAgentPosition(t),o=new u;b.sceneNode.moveBlockPos.children[this.blockIndex].getWorldPosition(o);var s=f(o.x,o.z);if(e){if(i&&n){var a=s.subtract2f(n.x,n.y);a=a.normalize().multiplyScalar(i.maxSpeed_*-e),P.instance.setAgentPrefVelocity(t,a)}}else if(i&&n){var r=s.subtract2f(n.x,n.y);r.lengthSqr()>1&&(r=r.normalize().multiplyScalar(i.maxSpeed_)),r.lengthSqr()<I.RVO_EPSILON?P.instance.setAgentPrefVelocity(t,v.ZERO):P.instance.setAgentPrefVelocity(t,r)}else console.error("RVO异常::",i,n,t)}},a.attack1=function(){return this.machineState!=ee.Attack&&(this.machineState=ee.Attack),!this.characterSkeletalAnimation.getState("attack01_1").isPlaying&&(this.characterSkeletalAnimation.play("attack01_1"),!0)},a.updateBloodPos=function(){if(this._blood){var e=new u;u.add(e,this.node.worldPosition.clone(),this._bloodOffset),this._blood.node.setWorldPosition(e)}},a.bombDie=function(){var e=this;this.isAttack&&(this.machineState!=ee.Die&&(this.machineState=ee.Die),this.isAttack=!1,this.hitEffct(),this.scheduleOnce((function(){var t,i;b.enemyController.removeEnemy(e),b.enemyController.removeEnemyRvo(e),e.node.removeFromParent(),e.node.active=!1,null!=(t=e.node)&&t.isValid&&b.poolManager.returnNode(e.node,e.poolName),null!=(i=e._blood)&&i.isValid&&(e._blood=null),e.reset()}),.1))},a.attackFlowerDie=function(e){var t=this;if(this.machineState!=ee.Die&&(this.machineState=ee.Die),this.isAttack=!1,this.flowerEat=!0,b.enemyController.removeEnemy(this),b.enemyController.removeEnemyRvo(this),y(this.node).parallel(y().to(.5,{scale:new u(0,0,0)}),y().to(.5,{worldPosition:e.worldPosition})).call((function(){var e,i;t.node.scale=t.selfScal,t.node.removeFromParent(),t.node.active=!1,t.reset(),null!=(e=t.node)&&e.isValid&&b.poolManager.returnNode(t.node,t.poolName),null!=(i=t._blood)&&i.isValid&&(t._blood=null)})).start(),1==this.Idtype)for(var i=0;i<10;i++)this.randomPos();else for(var n=0;n<3;n++)this.randomPos()},a.die=function(e){var t=this;if(this.machineState!=ee.Die&&(this.machineState=ee.Die),this.isAttack=!1,this.node.isValid&&this.node){var i=this.node.getWorldPosition().clone(),n=this.hitRangeV3,o=new v(n.x,n.z).subtract2f(i.x,i.z);o=o.normalize().multiplyScalar(-this.hitPow);i.clone().add(new u(o.x,0,o.y));y(this.node).by(.15,{position:new u(o.x,0,o.y)},{onUpdate:function(){t.updateBloodPos()}}).start(),this.characterSkeletalAnimation.getState("die_1").isPlaying||this.characterSkeletalAnimation.play("die_1"),this.scheduleId=this.scheduleOnce((function(){t.dieGray=!0,t.skinnedMeshRenderer.setMaterialInstance(t.grayMaterial,0),t.scheduleId1=t.scheduleOnce((function(){var e,i;if(b.enemyController.removeEnemy(t),b.enemyController.removeEnemyRvo(t),t.node.removeFromParent(),t.node.active=!1,null!=(e=t.node)&&e.isValid&&b.poolManager.returnNode(t.node,t.poolName),null!=(i=t._blood)&&i.isValid&&(t._blood=null),t.reset(),1==t.Idtype)for(var n=0;n<10;n++)t.randomPos();else for(var o=0;o<3;o++)t.randomPos()}),.5)}),.05)}},a.randomPos=function(){var e=this.node.getWorldPosition().clone(),t=new u(2*Math.random()-1,0,2*Math.random()-1).normalize(),i=e.add(t.multiplyScalar(6*Math.random())),n=b.sceneNode.coinAreaBan.worldPosition.clone();u.distance(i,n)>5?b.dropController.dropItem(i):this.randomPos()},a.reset=function(){void 0!==this.scheduleId&&(this.unschedule(this.scheduleId),this.scheduleId=void 0),void 0!==this.scheduleId1&&(this.unschedule(this.scheduleId1),this.scheduleId1=void 0),this.isAttack=!1,this.hp=this._hp,this.maxHp=this._hp,this.recordHp=this._hp,this.spiderName="spider",this._radius=3,this._rvoSpeed=20,this.isRvo=!1,this.blockIndex=0,this.speed=5,this.movePhase=1,this.rvoLastMove=!1,this.machineState=ee.Move,this.characterSkeletalAnimation.play("walk_f_1"),this.setMaterByIndex(0),this.dieGray=!1,this.flowerEat=!1,this.currentTargetIndex=0,-1!=this.agentHandleId&&(P.instance.removeAgent(this.agentHandleId),this.agentHandleId=-1)},a.update=function(e){if(w.isGameEnd){if(!this.endIsMove)return;var t=Math.floor(4*Math.random()),i=b.sceneNode.moveEndBlockPos.children[t].worldPosition,n=this.node.worldPosition,o=this.node.forward;if(i.clone().subtract(n).dot(o)<1.5&&this.endIsMove)return this.endIsMove=!1,void this.node.setWorldPosition(i)}w.isStartGame&&(this.flowerEat||(this.updateBloodPos(),this.currentTargetIndex<b.sceneNode.enemyMovePath.children.length&&1==this.movePhase?(this.machineState=ee.Walk,this.moveToTarget(e,b.sceneNode.enemyMovePath)):2==this.movePhase&&(w.isBlock&&this.isRvo&&!this.rvoLastMove?(this.moveByRvo(e),this.setPreferredVelocities()):(this.move(),"rovSpider"==this.spiderName?(P.instance.removeAgent(this.agentHandleId),this.agentHandleId=-1,this.speed=8,this.rvoLastMove&&this.moveToTarget(e,b.sceneNode.enemyMoveRvoPath)):this.moveToTarget(e,b.sceneNode.enemyMovePath2)))))},a.moveToTarget=function(e,t){var i=t.children[this.currentTargetIndex],n=i.worldPosition,o=this.node.worldPosition;if(u.distance(o,n)<.1){if(this.currentTargetIndex++,this.node.eulerAngles=i.eulerAngles.clone(),this.currentTargetIndex>=t.children.length){if(this.movePhase+=1,this.currentTargetIndex=0,this.movePhase>2)return this._blood&&this._blood.injuryAni(100),this.bombDie(),void b.sceneNode.flower.getComponent(x).hit(1);w.isBlock&&2==this.movePhase&&(this.isRvo=!0,this.trackMonster(),this.spiderName="rovSpider",b.enemyController.setEnemyRvoList(this))}}else{var s=u.subtract(new u,n,o).normalize(),a=this.speed*e,r=u.add(new u,o,u.multiplyScalar(new u,s,a));this.node.worldPosition=r,this.rotateToTarget(i.eulerAngles,e)}},a.rotateToTarget=function(e,t){var i=this.node.eulerAngles,n=new u(this.smoothDamp(i.x,e.x,t),this.smoothDamp(i.y,e.y,t),this.smoothDamp(i.z,e.z,t));this.node.eulerAngles=n},a.smoothDamp=function(e,t,i,n){void 0===n&&(n=.5);var o=t-e;return o>180&&(o-=360),o<-180&&(o+=360),e+o*(1-Math.exp(-i/n))},s(t,[{key:"agentHandleId",get:function(){return this._agentHandleId},set:function(e){this._agentHandleId=e}}]),t}(g)).prototype,"baseMaterial",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(j.prototype,"grayMaterial",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(j.prototype,"skinnedMeshRenderer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(j.prototype,"dissolveEffect",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=t(j.prototype,"hitPosNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(j.prototype,"hitParticle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(j.prototype,"hitParticle1",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(j.prototype,"currentIndex",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=t(j.prototype,"isInitCraet",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=t(j.prototype,"spiderHp",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$=t(j.prototype,"spiderType",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=j))||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SateMachine.ts","./IdleState.ts","./MoveState.ts"],(function(t){var e,i,n,a,s,o,r,c,h,u,l,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.SkeletalAnimation,c=t.v3,h=t.Component},function(t){u=t.default},function(t){l=t.IdleState},function(t){d=t.MoveState}],execute:function(){var p,f,y,m,v;s._RF.push({},"d29f2wk9bVATb3G9I9aOTlq","Entity",void 0);var S=t("CharacterType",function(t){return t.Player="Player",t.StaticPlayer="StaticPlayer",t.AIPlayer="AIPlayer",t.Enemy="Enemy",t.Parter="Parter",t}({})),M=t("CharacterStateType",function(t){return t.Idle="idle",t.Move="move",t.MoveAttack="moveAttack",t.Attack="attack",t}({})),g=o.ccclass,k=o.property;t("default",(p=g("Entity"),f=k(r),p((v=e((m=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this).id=void 0,e.entityName=void 0,e.hp=0,e.maxHp=0,e.attack=0,e.defense=0,e.type=S.Player,e.moveSpeed=0,e.stateMachine=new u,e.destForward=c(),e.target=null,e.moveTargetWorldPos=null,n(e,"characterSkeletalAnimation",v,a(e)),e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.stateMachine.addState(M.Idle,new l(this)),this.stateMachine.addState(M.Move,new d(this)),this.setupEventListeners()},s.getMachineName=function(){return this.stateMachine.getStateName()},s.setMoveSpeed=function(t){this.moveSpeed=t},s.getMoveSpeed=function(){return this.moveSpeed},s.setData=function(t,e,i,n,a){this.id=t,this.entityName=e,this.hp=i,this.maxHp=i,this.attack=n,this.type=a},s.getId=function(){return this.id},s.getEntityName=function(){return this.entityName},s.getType=function(){return this.type},s.entitySetPosition=function(t){this.node.setPosition(t)},s.entityGetPosition=function(){return this.node.position},s.setupEventListeners=function(){},s.takeDamage=function(t,e){var i=Math.max(t-this.defense,0);console.log("damage damage "+t),console.log("this.defense this.defense "+this.defense),this.hp-=i,this.hp<=0&&(this.hp=0),this.hp<=0&&this.die(e),e&&e(this.hp<=0)},s.heal=function(t){this.hp=Math.min(this.hp+t,this.maxHp)},s.die=function(t){this.stateMachine.setState("die",t)},s.move=function(t){this.stateMachine.setState("move",t)},s.moveAttack=function(t){this.stateMachine.setState("moveAttack",t)},s.idle=function(){this.stateMachine.setState("idle")},s.update=function(t){this.stateMachine.update(t)},s.useSkill=function(t){this.stateMachine.setState("attack",t)},e}(h)).prototype,"characterSkeletalAnimation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"5e21dR9bTxLUL8+N1+ljG8T","EventManager",void 0);var r=e("EventManager",function(){function e(){this._eventMap=new Map}var a=e.prototype;return a.on=function(e,t,n){this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push({callback:t,target:n})},a.once=function(e,t,n){var a=this;this.on(e,(function r(){a.off(e,r,n);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];t.apply(n,c)}),n)},a.off=function(e,t,n){if(this._eventMap.has(e)){var a=this._eventMap.get(e);if(t)for(var r=a.length-1;r>=0;r--){var i=a[r];t&&i.callback!==t||n&&i.target!==n||a.splice(r,1)}else a.length=0}},a.emit=function(e){if(this._eventMap.has(e)){for(var n=this._eventMap.get(e).slice(),a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];for(var c,o=t(n);!(c=o()).done;){var s=c.value;try{s.callback.apply(s.target,r)}catch(t){console.error("EventManager emit error: "+e,t)}}}},a.removeAll=function(e){var t=this;this._eventMap.forEach((function(n,a){t.off(a,null,e)}))},n(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}());r._instance=null;e("eventMgr",r.instance);a._RF.pop()}}}));

System.register("chunks:///_virtual/EventType.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"738cc6yuCVAF6KyNBEgTnsw","EventType",void 0);n("EventType",function(n){return n.CoinAdd="CoinAdd",n.CoinSub="CoinSub",n.ContinueCoin="ContinueCoin",n}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/Flower.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BooldPaling.ts","./App.ts","./GlobeVariable.ts","./GameEndManager.ts","./CameraMain.ts","./Player.ts"],(function(e){var i,t,n,a,o,l,r,u,c,s,p,h,f,y,d,m,b,g,w,A,M,v,H,P;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.SkeletalAnimation,u=e.ParticleSystem,c=e.Animation,s=e.Node,p=e.Camera,h=e.Material,f=e.SkinnedMeshRenderer,y=e.RigidBody,d=e.Collider,m=e.tween,b=e.Vec3,g=e.Component},function(e){w=e.BooldPaling},function(e){A=e.App},function(e){M=e.GlobeVariable},function(e){v=e.GameEndManager},function(e){H=e.CameraMain},function(e){P=e.Player}],execute:function(){var I,G,_,E,C,N,D,S,F,z,B,T,k,j,O,x,R,W,V,L,X,q,J,K,Q,U,Y,Z,$;o._RF.push({},"c9656X+5gRNcbp58beXBttu","Flower",void 0);var ee=l.ccclass,ie=l.property;e("Flower",(I=ee("Flower"),G=ie({type:w,tooltip:"血条"}),_=ie({type:r,tooltip:"动画"}),E=ie({type:u,tooltip:"动画"}),C=ie({type:c,tooltip:"动画"}),N=ie({type:c,tooltip:"动画"}),D=ie({type:s,tooltip:"joysticNode"}),S=ie({type:p,tooltip:"动画"}),F=ie(h),z=ie(h),B=ie(h),T=ie(h),k=ie(f),j=ie({type:c,tooltip:"受击缩放动画"}),I((R=i((x=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return i=e.call.apply(e,[this].concat(o))||this,n(i,"booldPaling",R,a(i)),n(i,"flowerAni",W,a(i)),n(i,"hitParticle",V,a(i)),n(i,"hitAni",L,a(i)),n(i,"birthAni",X,a(i)),n(i,"joysticNode",q,a(i)),n(i,"mainCamera",J,a(i)),n(i,"material0",K,a(i)),n(i,"material1",Q,a(i)),n(i,"material2",U,a(i)),n(i,"materialWhite",Y,a(i)),n(i,"flowerMesh",Z,a(i)),n(i,"hitAniScal",$,a(i)),i.hp=1e3,i.isDie=!1,i.isPlayer=!1,i}t(i,e);var o=i.prototype;return o.start=function(){this.init()},o.onEnable=function(){},o.init=function(){var e=this;this.hp=this.booldPaling.getBloodHpMax(),this.scheduleOnce((function(){e.flowerAni.play("Chushi_MeiGuiHua"),e.isPlayer||(e.isPlayer=!0,e.birthAni.play("kaichangAni"),console.log("kaichangAni  kaichangAni "),e.flowerAni.once(c.EventType.FINISHED,(function(){e.flowerAni.play("Chushi_MeiGuiHua_reverse"),e.flowerAni.once(c.EventType.FINISHED,(function(){e.flowerAni.play("Idel_MeiGuiHua"),A.sceneNode.player.getComponent(y).enabled=!0,A.sceneNode.player.getComponent(d).enabled=!0}),e)}),e),e.birthAni.once(c.EventType.FINISHED,(function(){e.cameraMove()}),e))}),1)},o.IdleEvent=function(){A.sceneNode.player.getComponent(P).jumpAni()},o.cameraMove=function(){var e=this;m(this.mainCamera.node).to(.5,{worldPosition:new b(106.5,111,77.5)}).call((function(){e.mainCamera.getComponent(H).init(),M.isCameraMoveEnd=!0,e.joysticNode.active=!0})).start()},o.continueGame=function(){var e=this;M.isCameraMoveEnd=!1,M.isIdel=!1,A.playerController.initPlayer(),this.flowerAni.play("Chushi_MeiGuiHua"),this.birthAni.play("kaichangAni"),this.flowerAni.once(c.EventType.FINISHED,(function(){e.flowerAni.play("Chushi_MeiGuiHua_reverse"),e.flowerAni.once(c.EventType.FINISHED,(function(){e.flowerAni.play("Idel_MeiGuiHua")}),e)}),this),this.birthAni.once(c.EventType.FINISHED,(function(){e.cameraMove()}),this),this.isDie=!1,this.booldPaling.continueGame(),this.hp=this.booldPaling.getBloodHpMax()},o.hit=function(e){var i=this;this.booldPaling.subscribeBool(e);var t=A.poolManager.getNode(M.entifyName.FlowerTx);t.parent=this.hitParticle.node.parent,t.setPosition(this.hitParticle.node.position),t.active=!0;var n=t.getComponent(u);n&&n.play(),this.scheduleOnce((function(){n&&(n.stop(),n.clear(),t.active=!1,t.removeFromParent(),A.poolManager.returnNode(t,M.entifyName.FlowerTx))}),1.5),this.hitAniScal.play("HitAni"),this.flowerMesh.materials=[this.materialWhite,this.materialWhite,this.materialWhite],this.scheduleOnce((function(){i.flowerMesh.materials=[i.material0,i.material1,i.material2]}),.1),this.flowerAni.getState("Idel_MeiGuiHua").isPlaying?(this.flowerAni.getState("Idel_MeiGuiHua").speed=2,this.scheduleOnce((function(){i.flowerAni.getState("Idel_MeiGuiHua").speed=1}),.5)):this.flowerAni.getState("Idel_DieAway_MeiGuiHua").isPlaying&&(this.flowerAni.getState("Idel_DieAway_MeiGuiHua").speed=3,this.scheduleOnce((function(){i.flowerAni.getState("Idel_DieAway_MeiGuiHua").speed=1}),.5)),this.booldPaling.getBloodHp()==this.hp/2?(this.flowerAni.play("DieAway_MeiGuiHua"),this.scheduleOnce((function(){i.flowerAni.play("Idel_DieAway_MeiGuiHua")}),1.5)):this.booldPaling.getBloodHp()<=0&&!this.isDie&&(this.isDie=!0,this.flowerAni.play("Die_MeiGuiHua"),this.flowerAni.once(c.EventType.FINISHED,(function(){A.sceneNode.GameEnd.active=!0,A.sceneNode.GameEnd.getComponent(v).showGameEnd(0),M.isGameEnd=!0}),this))},o.update=function(e){},i}(g)).prototype,"booldPaling",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(x.prototype,"flowerAni",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(x.prototype,"hitParticle",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(x.prototype,"hitAni",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(x.prototype,"birthAni",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(x.prototype,"joysticNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(x.prototype,"mainCamera",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(x.prototype,"material0",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(x.prototype,"material1",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(x.prototype,"material2",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(x.prototype,"materialWhite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(x.prototype,"flowerMesh",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(x.prototype,"hitAniScal",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=x))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/FlowerEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flower.ts","./SoundManager.ts"],(function(e){var n,t,r,o,i,a,l,u,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Component},function(e){u=e.Flower},function(e){c=e.SoundManager}],execute:function(){var s,p,f,v,d;i._RF.push({},"e7aeeH8XwFFHICZill2eMXf","FlowerEvent",void 0);var w=a.ccclass,h=a.property;e("FlowerEvent",(s=w("FlowerEvent"),p=h(u),s((d=n((v=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,r(n,"birthAnnaNode",d,o(n)),n}return t(n,e),n.prototype.flowerKaiHuaEvent=function(){c.Instance.playAudio("huoduokai"),console.log("flowerKaiHuaEvent")},n}(l)).prototype,"birthAnnaNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/Flowertest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BooldPaling.ts","./App.ts","./GlobeVariable.ts","./GameEndManager.ts"],(function(e){var i,t,n,l,a,r,o,u,s,c,h,p,f,m,d,b;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,o=e.SkeletalAnimation,u=e.ParticleSystem,s=e.Animation,c=e.Material,h=e.SkinnedMeshRenderer,p=e.Component},function(e){f=e.BooldPaling},function(e){m=e.App},function(e){d=e.GlobeVariable},function(e){b=e.GameEndManager}],execute:function(){var g,w,y,A,M,P,G,H,_,v,S,z,D,I,F,E,B,W,N,O,x,k,R,T,C;a._RF.push({},"95f36RzQvlL973VQ3EkA4Ac","Flowertest",void 0);var L=r.ccclass,V=r.property;e("Flowertest",(g=L("Flowertest"),w=V({type:f,tooltip:"血条"}),y=V({type:o,tooltip:"动画"}),A=V({type:u,tooltip:"动画"}),M=V({type:s,tooltip:"动画"}),P=V({type:s,tooltip:"动画"}),G=V(c),H=V(c),_=V(c),v=V(c),S=V(h),z=V({type:s,tooltip:"受击缩放动画"}),g((F=i((I=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a))||this,n(i,"booldPaling",F,l(i)),n(i,"flowerAni",E,l(i)),n(i,"hitParticle",B,l(i)),n(i,"hitAni",W,l(i)),n(i,"birthAni",N,l(i)),n(i,"material0",O,l(i)),n(i,"material1",x,l(i)),n(i,"material2",k,l(i)),n(i,"materialWhite",R,l(i)),n(i,"flowerMesh",T,l(i)),n(i,"hitAniScal",C,l(i)),i.hp=1e3,i.isDie=!1,i}t(i,e);var a=i.prototype;return a.start=function(){var e=this;this.init(),this.flowerMesh.materials=[this.materialWhite,this.materialWhite,this.materialWhite],this.hitAniScal.play("HitAni"),this.scheduleOnce((function(){e.flowerMesh.materials=[e.material0,e.material1,e.material2]}),0)},a.init=function(){this.hp=this.booldPaling.getBloodHpMax(),this.scheduleOnce((function(){}),.5)},a.continueGame=function(){this.isDie=!1,this.booldPaling.continueGame(),this.hp=this.booldPaling.getBloodHpMax(),this.flowerAni.play("Idel_MeiGuiHua")},a.hit=function(e){var i=this;this.booldPaling.subscribeBool(e);var t=m.poolManager.getNode(d.entifyName.FlowerTx);t.parent=this.hitParticle.node.parent,t.setPosition(this.hitParticle.node.position),t.active=!0;var n=t.getComponent(u);n&&n.play(),this.scheduleOnce((function(){n&&(n.stop(),n.clear(),t.active=!1,t.removeFromParent(),m.poolManager.returnNode(t,d.entifyName.FlowerTx))}),1.5),this.flowerMesh.materials=[this.materialWhite,this.materialWhite,this.materialWhite],this.hitAniScal.play("HitAni"),this.scheduleOnce((function(){i.flowerMesh.materials=[i.material0,i.material1,i.material2]}),.1),this.flowerAni.getState("Idel_MeiGuiHua").isPlaying?(this.flowerAni.getState("Idel_MeiGuiHua").speed=2,this.scheduleOnce((function(){i.flowerAni.getState("Idel_MeiGuiHua").speed=1}),.5)):this.flowerAni.getState("Idel_DieAway_MeiGuiHua").isPlaying&&(this.flowerAni.getState("Idel_DieAway_MeiGuiHua").speed=3,this.scheduleOnce((function(){i.flowerAni.getState("Idel_DieAway_MeiGuiHua").speed=1}),.5)),this.booldPaling.getBloodHp()==this.hp/2?(this.flowerAni.play("DieAway_MeiGuiHua"),this.scheduleOnce((function(){i.flowerAni.play("Idel_DieAway_MeiGuiHua")}),1.5)):this.booldPaling.getBloodHp()<=0&&!this.isDie&&(this.isDie=!0,this.flowerAni.play("Die_MeiGuiHua"),this.flowerAni.once(s.EventType.FINISHED,(function(){m.sceneNode.GameEnd.active=!0,m.sceneNode.GameEnd.getComponent(b).showGameEnd(0),d.isGameEnd=!0}),this))},a.update=function(e){},i}(p)).prototype,"booldPaling",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(I.prototype,"flowerAni",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(I.prototype,"hitParticle",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(I.prototype,"hitAni",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(I.prototype,"birthAni",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(I.prototype,"material0",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(I.prototype,"material1",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(I.prototype,"material2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(I.prototype,"materialWhite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(I.prototype,"flowerMesh",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(I.prototype,"hitAniScal",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=I))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameEndManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./super_html_playable.ts","./SoundManager.ts","./LanguageManager.ts","./App.ts"],(function(t){var n,e,i,a,o,l,r,c,s,u,d,h,p,f,w,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,r=t.Node,c=t.Label,s=t.Vec3,u=t.UIOpacity,d=t.tween,h=t.Component},function(t){p=t.default},function(t){f=t.SoundManager},function(t){w=t.LanguageManager},function(t){g=t.App}],execute:function(){var v,y,b,m,A,L,M,z,G,E,F,I,P,T,_;o._RF.push({},"751216TjlZLF7hDR8OiMy1J","GameEndManager",void 0);var x=l.ccclass,B=l.property;t("GameEndManager",(v=x("GameEndManager"),y=B(r),b=B(r),m=B(r),A=B(r),L=B(r),M=B(r),v((E=n((G=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return n=t.call.apply(t,[this].concat(o))||this,i(n,"bg",E,a(n)),i(n,"icon",F,a(n)),i(n,"download",I,a(n)),i(n,"download1",P,a(n)),i(n,"continue",T,a(n)),i(n,"hand",_,a(n)),n.type=1,n.updateLabelText=function(t){var n;if(t){var e=null==(n=t.getChildByName("Label"))?void 0:n.getComponent(c);if(e){var i=w.t(e.string);i&&(e.string=i)}}},n}e(n,t);var o=n.prototype;return o.start=function(){this.node.active=!1,this.init(),this.playFingerAndButtonAnim(),this.updateLabelText(this.download),this.updateLabelText(this.download1),this.updateLabelText(this.continue),1==this.type?(this.download1.active=!1,this.continue.active=!1,this.download.active=!0,f.Instance.playAudio("win")):(this.download.active=!1,this.continue.active=!0,this.download1.active=!0,f.Instance.playAudio("fail"))},o.showGameEnd=function(t){void 0===t&&(t=1),this.node.active=!0,this.type=t,1==t?(this.download1.active=!1,this.continue.active=!1,this.download.active=!0,f.Instance.playAudio("win")):(this.download.active=!1,this.continue.active=!0,this.download1.active=!0,f.Instance.playAudio("fail")),1==this.type?this.hand.setPosition(new s(117.659,-281.833,0)):this.hand.setPosition(new s(248.414,-281.833,0))},o.init=function(){var t=this;this.hand.active=!1,this.node.active=!0,1==this.type?this.hand.setPosition(new s(117.659,-281.833,0)):this.hand.setPosition(new s(248.414,-281.833,0));var n=this.bg.getComponent(u)||this.bg.addComponent(u);n.opacity=0,d(n).to(.1,{opacity:150}).start(),this.icon.setScale(0,0,0),this.download.setScale(0,1,1),d(this.icon).to(.25,{scale:new s(1.2,1.2,1.2)}).to(.3,{scale:new s(1,1,1)}).start(),d(this.download).delay(.25).to(.25,{scale:new s(1.1,1.1,1.1)}).to(.3,{scale:new s(1,1,1)}).call((function(){t.hand.active=!0})).start()},o.playFingerAndButtonAnim=function(){d(this.hand).repeatForever(d().to(.3,{scale:new s(.4,.4,.4)}).to(.3,{scale:new s(.5,.5,.5)})).start()},o.platformBtnEvent=function(){console.log("点击下载"),p.download()},o.continueGame=function(){console.log("从新开始游戏"),g.gameManager.continueGame(),this.type=1},n}(h)).prototype,"bg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(G.prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(G.prototype,"download",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(G.prototype,"download1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(G.prototype,"continue",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(G.prototype,"hand",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=G))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./App.ts","./Simulator.ts","./GlobeVariable.ts","./RVOObstacles.ts","./Common.ts","./Flower.ts","./EventManager.ts","./EventType.ts","./PlayerAttackFlower.ts"],(function(e){var t,n,i,o,a,r,l,m,c,s,d;return{setters:[function(e){t=e.cclegacy,n=e._decorator},function(e){i=e.App},function(e){o=e.Simulator},function(e){a=e.GlobeVariable},function(e){r=e.default},function(e){l=e.Vector2},function(e){m=e.Flower},function(e){c=e.EventManager},function(e){s=e.EventType},function(e){d=e.PlayerAttackFlower}],execute:function(){var u;t._RF.push({},"9247fnHse1MBbY+w+sWe6Y6","GameManager",void 0);var h=n.ccclass;n.property,e("GameManager",h("GameManager")(u=function(){function e(){this.isStatrGame=!1,this.delayedTime=.8,this.addTime=0,this.beetleDelayedTime=.3,this.beetleAddTime=0,this.blockTime=0,this.blockDelayedTime=1,this.temp=1}var t=e.prototype;return t.continueGame=function(){this.delayedTime=.6,this.addTime=0;var e=i.dataManager.getCharacterById(4);e&&(this.beetleDelayedTime=e.attackInterval,this.beetleAddTime=e.attackInterval),-1!=e.maxNum&&(a.beetleNumLimit=e.maxNum),this.blockTime=0,this.blockDelayedTime=1,i.mapShowController.continueGame(),i.playerController.continueGame(),i.dropController.continueGame(),i.guideManager.continueGame(),a.continueGame(),i.sceneNode.enemyParent.children.forEach((function(e){e.removeFromParent(),e.destroy()})),i.sceneNode.bloodParent.children.forEach((function(e){e.removeFromParent(),e.destroy()})),i.sceneNode.effectParent.children.forEach((function(e){e.removeFromParent(),e.destroy()})),i.sceneNode.coinParent.children.forEach((function(e){e.removeFromParent(),e.destroy()})),i.sceneNode.enemyParent.removeAllChildren(),i.enemyController.continueGame(),i.sceneNode.coinParent.removeAllChildren(),i.sceneNode.effectParent.removeAllChildren(),i.sceneNode.guideParent.removeAllChildren(),i.sceneNode.flower.getComponent(m).continueGame(),i.sceneNode.attackFlower.getComponent(d).continueGame(),i.sceneNode.GameEnd.active=!1,a.isGameEnd=!1,i.sceneNode.enemyParent.active=!1,a.isStartGame=!1,a.initEnemyBirthPosCurUnm=0,a.isBlock=!1,a.isFirstBlock=!0,a.blockLockNum=0,a.blockRest=!0,a.blockIndex=0,a.restQueue=!1,a.rvoRestTime=.6,a.rvoRestTimeLimit=.6,a.beetleIsMove=!1,a.beetleIsMoveEnemy=!1,a.isBeetleGuild=!1,a.beetleLockNum=0,a.enemySpiderNumBig=10,a.curEnemySpiderNum=1,a.bigHp=5,a.beetleNumLimit=10,a.beetleCurNum=0,a.globCoinNum=0,a.coinStartNum=5,a.g_curArea=1,a.playerLevel=0,c.instance.emit(s.ContinueCoin),this.startGame()},t.startGame=function(){i.guideManager.init(),this.isStatrGame=!0,o.instance.setAgentDefaults(60,3,1,.1,14,80,new l(0,0)),this.addRvoObstacle();var e=i.dataManager.getCharacterById(4);e&&(this.beetleDelayedTime=e.attackInterval,this.beetleAddTime=e.attackInterval),-1!=e.maxNum&&(a.beetleNumLimit=e.maxNum)},t.addRvoObstacle=function(){i.sceneNode.obstacleParrent.children.forEach((function(e){r.addOneObstacle(e)})),o.instance.processObstacles()},t.update=function(e){if(!a.isGameEnd){if(a.blockRest||(this.blockTime+=e,this.blockTime>=this.blockDelayedTime&&(this.blockTime=0,a.blockRest=!0,i.mapShowController.restBlock1())),this.isStatrGame){if(this.addTime+=e,this.addTime>=this.delayedTime){if(this.addTime=0,this.temp++,i.enemyController.getEnemyList().length+i.enemyController.getEnemyRvoList().length>=a.allEnemyNumLimit)return;this.produceEnemySpider()}o.instance.run(e),i.enemyController.update(e),i.playerController.update(e),i.beetleController.update(e),i.guideManager.update(e)}a.beetleIsMove&&(a.beetleIsMoveEnemy=!0,this.beetleAddTime+=e,this.beetleAddTime>=this.beetleDelayedTime&&(this.beetleAddTime=0,a.beetleCurNum>=a.beetleNumLimit&&(a.beetleCurNum=0,a.beetleIsMove=!1,setTimeout((function(){i.mapShowController.showBeetleBubble()}),300)),i.beetleController.creatBeetleByLevel()))}},t.produceEnemySpider=function(){i.enemyController.creatEnemyByLevel(1)},e}())||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/GlobeVariable.ts",["cc"],(function(o){var i,e;return{setters:[function(o){i=o.cclegacy,e=o._decorator}],execute:function(){var a,r;i._RF.push({},"a04c97HM95FdYN3zY0abJtg","GlobeVariable",void 0);var n=e.ccclass;e.property,o("GlobeVariable",n("GlobeVariable")(((r=function(){function o(){}return o.continueGame=function(){o.handVoer={UI_jianta:{maxCoin:5,curCoin:0,isShow:!1,showCoin:0},UI_paota:{maxCoin:60,curCoin:0,isShow:!1,showCoin:0},UI_juma:{maxCoin:20,curCoin:0,isShow:!1,showCoin:0},"UI_juma-001":{maxCoin:200,curCoin:0,isShow:!1,showCoin:0},UI_jiachong:{maxCoin:150,curCoin:0,isShow:!1,showCoin:0},"UI_jiachong-001":{maxCoin:50,curCoin:0,isShow:!1,showCoin:0},UI_shirenhua:{maxCoin:200,curCoin:0,isShow:!1,showCoin:0}}},o}()).isTouching=!1,r.isDeactivateVirtualJoystick=!1,r.isGameEnd=!1,r.isStartGame=!1,r.isJoyStickBan=!1,r.isCameraMove=!1,r.isCameraMoveEnd=!1,r.isIdel=!1,r.isBeetleGuild=!1,r.allEnemyNumLimit=500,r.maxSquareDis=130,r.bearAttackPalingNum_audio=0,r.bearDiegNum_audio=0,r.pylonAttackNum_audio=0,r.isBlock=!1,r.isFirstBlock=!0,r.blockLockNum=0,r.blockRest=!0,r.initEnemyBirthPosNumLimit=10,r.initEnemyBirthPosCurUnm=0,r.blockIndex=0,r.restQueue=!1,r.rvoRestTime=.6,r.rvoRestTimeLimit=.6,r.beetleIsMove=!1,r.beetleIsMoveEnemy=!1,r.beetleLockNum=0,r.enemySpiderNumBig=10,r.curEnemySpiderNum=1,r.bigHp=5,r.beetleNumLimit=10,r.beetleCurNum=0,r.prefabPath={player:"Prefabs/player/Player",EnemyBear:"Prefabs/xiaoPrefab/BearPrefab",EnemySpider:"Prefab/Monster/Spider",EnemySpiderL:"Prefab/Monster/Spider_L",BloodBar:"Prefabs/UI/BloodBar",TX_Attack_hit:"Prefabs/TX/TX_Attack_hit",FireArrow:"Prefab/Cons/HuoChaiGun",TurretBullet:"Prefab/Cons/JiaoNang",Beetle:"Prefab/JiaChong",Coin:"Prefab/Icon/dropItem",Guid_Arrow3D:"Prefab/Tip/Arrow",Guid_ArrowPath:"Prefab/Tip/PathArrow",FlowerTx:"Prefab/TX/TX_huaban",TurretTx:"Prefab/TX/TX_fashe",TurretBombTx:"Prefab/TX/TX_jizhong_10",ArrowTX:"Prefab/TX/TX_jizhong_08",BeetleCollideTx:"Prefab/TX/TX_jizhong_12"},r.entifyName={player:"Player",EnemyBear:"BearPrefab",EnemySpider:"Spider",BloodBar:"BloodBar",TX_Attack_hit:"TX_Attack_hit",FireArrow:"HuoChaiGun",TurretBullet:"TurretBullet",Beetle:"JiaChong",Coin:"Coin",Guid_ArrowPath:"PathArrow",FlowerTx:"TX_huaban",TurretTx:"TX_fashe",TurretBombTx:"TX_jizhong_10",ArrowTX:"TX_jizhong_08",EnemySpiderL:"Spider_L",BeetleCollideTx:"TX_jizhong_12"},r.globCoinNum=0,r.coinStartNum=5,r.g_curArea=1,r.playerLevel=0,r.handVoer={UI_jianta:{maxCoin:5,curCoin:0,isShow:!1,showCoin:0},UI_paota:{maxCoin:60,curCoin:0,isShow:!1,showCoin:0},UI_juma:{maxCoin:20,curCoin:0,isShow:!1,showCoin:0},"UI_juma-001":{maxCoin:200,curCoin:0,isShow:!1,showCoin:0},UI_jiachong:{maxCoin:150,curCoin:0,isShow:!1,showCoin:0},"UI_jiachong-001":{maxCoin:50,curCoin:0,isShow:!1,showCoin:0},UI_shirenhua:{maxCoin:100,curCoin:0,isShow:!1,showCoin:0}},r.handOverArea=["UI_jianta","UI_paota","UI_juma","UI_juma-001","UI_jiachong","UI_jiachong-001","UI_shirenhua"],a=r))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/GoldMineController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts","./GlobeVariable.ts","./MathUtils.ts"],(function(i){var n,t,o,e,s,c;return{setters:[function(i){n=i.createClass},function(i){t=i.cclegacy,o=i.Vec3},function(i){e=i.App},function(i){s=i.GlobeVariable},function(i){c=i.MathUtil}],execute:function(){t._RF.push({},"d8feer6tCdFhJeu00a+gnr3","GoldMineController",void 0),i("default",function(){function i(){this._coinLackPos=[],this._coinNum=0,this._coinWidth=1.2,this._coinHeight=.2,this._coinLengthNum=3,this._coinWidthNum=4,this._maxCoin=void 0,this._playingAniNum=0}var t=i.prototype;return t.addCoin=function(i){var n=e.poolManager.getNode(s.entifyName.Coin);if(n.setParent(e.sceneNode.goldMineParent),i)n.setWorldPosition(i);else{var t=this.getNextPosWithLength();n.setPosition(t)}this._maxCoin?this.isPositionGreater(n.getWorldPosition(),this._maxCoin)&&(this._maxCoin=n.getWorldPosition().clone()):this._maxCoin=n.getPosition().clone(),this._coinNum++},t.getGoldMineNum=function(){return this._coinNum},t.playerGetCoin=function(){var i=this.removeCoin();return null==i?null:{pos:i,coin:e.poolManager.getNode(s.entifyName.Coin)}},t.addPlayingAniNum=function(){this._playingAniNum++},t.reducePlayingAniNum=function(){this._playingAniNum--},t.getPlayingAniNum=function(){return this._playingAniNum},t.isPositionGreater=function(i,n){return i.y>n.y||!(i.y<n.y)&&(i.x>n.x||!(i.x<n.x)&&i.z>n.z)},t.getNextCoinPos=function(i){if(this._coinLackPos.length>0)return this._coinLackPos.shift();var n=this.getNextPosWithLength(i);new o;return c.localToWorldPos3D(n,e.sceneNode.goldMineParent)},t.getNextPosWithLength=function(i){void 0===i&&(i=0);var n=i+this._coinNum,t=new o(0,0,0),e=n%(this._coinLengthNum*this._coinWidthNum);return t.y=Math.floor(n/(this._coinLengthNum*this._coinWidthNum))*this._coinHeight,t.z=e%this._coinWidthNum*this._coinWidth+this._coinWidth/2,t.x=Math.floor(e/this._coinWidthNum)*this._coinWidth+this._coinWidth/2,t},t.removeCoin=function(){if(this._coinNum>0){var i=e.sceneNode.goldMineParent.children;i.sort((function(i,n){return i.position.y!==n.position.y?i.position.y-n.position.y:i.position.x!==n.position.x?i.position.x-n.position.x:i.position.z-n.position.z}));var n=i[i.length-1];if(this._coinNum--,n){var t=n.worldPosition.clone();return e.poolManager.returnNode(n,s.entifyName.Coin),this.updateCoinLack(t),t}return this.removeCoin()}return null},t.updateCoinLack=function(i){if(-1===this._coinLackPos.indexOf(i)){this._coinLackPos.push(i),this._coinLackPos.sort((function(i,n){return i.y!==n.y?i.y-n.y:i.x!==n.x?i.x-n.x:i.z-n.z}));for(var n=0;n<this._coinLackPos.length;n++){var t=this._coinLackPos[n];if(this.isPositionGreater(t,this._maxCoin)){this._coinLackPos.splice(n,this._coinLackPos.length-n);break}}}},n(i,null,[{key:"Instance",get:function(){return i._instance||(i._instance=new i),i._instance}}]),i}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/GuideManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts","./Arrow3D.ts","./ArroePath.ts","./GlobeVariable.ts"],(function(e){var t,i,o,n,a,r,s,d,u;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,o=e._decorator,n=e.Node,a=e.Vec3},function(e){r=e.App},function(e){s=e.Arrow3D},function(e){d=e.ArroePath},function(e){u=e.GlobeVariable}],execute:function(){var h,l;i._RF.push({},"6139b8LE8FMXoxiYLCg38ge","GuideManager",void 0);var c=o.ccclass;o.property,e("GuideManager",c("GuideManager")(((l=function(){function e(){this.guideCurStep=1,this.guidePhase=1,this.executingStep=0,this.arrowPath=null,this.arrow3dComp=null,this.guideList={},this.guideStepJson={},this.currentTarget=null}var i=e.prototype;return i.continueGame=function(){var e=this;this.guideCurStep=1,this.executingStep=0,this.guidePhase=1,this.guideList={},r.sceneNode.guideList.forEach((function(t){t.name&&(e.guideList[t.name]=t)}));var t=r.guidArrow3D;t.setParent(r.sceneNode.guideParent),this.arrow3dComp=t.getComponent(s),this.arrow3dComp.setActive(!0),this.arrowPath=new d,this.jsonTablePhase2()},i.init=function(){var e=this;this.guideList={},r.sceneNode.guideList.forEach((function(t){t.name&&(e.guideList[t.name]=t)}));var t=r.guidArrow3D;t.setParent(r.sceneNode.guideParent),this.arrow3dComp=t.getComponent(s),this.arrow3dComp.setActive(!0),this.arrowPath=new d,this.jsonTablePhase1()},i.jsonTablePhase2=function(){var e={1:{targetPos:this.guideList.UI_jianta1.worldPosition.clone(),targetNode:this.guideList.UI_jianta1,isGuideComplate:!1,nextStep:2,extendNext:0,handOver:"UI_jianta"},2:{targetPos:this.guideList.UI_juma1.worldPosition.clone(),targetNode:this.guideList.UI_juma1,isGuideComplate:!1,nextStep:3,extendNext:0,handOver:"UI_juma"},3:{targetPos:this.guideList.UI_paota1.worldPosition.clone(),targetNode:this.guideList.UI_paota1,isGuideComplate:!1,nextStep:4,extendNext:0,handOver:"UI_paota"},4:{targetPos:this.guideList.UI_shirenhua1.worldPosition.clone(),targetNode:this.guideList.UI_shirenhua1,isGuideComplate:!1,nextStep:5,extendNext:0,handOver:"UI_shirenhua"},5:{targetPos:this.guideList.UI_jiachong1.worldPosition.clone(),targetNode:this.guideList.UI_jiachong1,isGuideComplate:!1,nextStep:6,extendNext:0,handOver:"UI_jiachong"},6:{targetPos:this.guideList["UI_juma-0011"].worldPosition.clone(),targetNode:this.guideList["UI_juma-0011"],isGuideComplate:!1,nextStep:0,extendNext:0,handOver:"UI_juma-001"},7:{targetPos:this.guideList["UI_jiachong-0011"].worldPosition.clone(),targetNode:this.guideList["UI_jiachong-0011"],isGuideComplate:!1,nextStep:0,extendNext:0,handOver:"UI_jiachong-001"}};this.guideStepJson=e},i.jsonTablePhase1=function(){var e={1:{targetPos:this.guideList.UI_jianta1.worldPosition.clone(),targetNode:this.guideList.UI_jianta1,isGuideComplate:!1,nextStep:2,extendNext:0,handOver:"UI_jianta"},2:{targetPos:this.guideList.UI_juma1.worldPosition.clone(),targetNode:this.guideList.UI_juma1,isGuideComplate:!1,nextStep:3,extendNext:0,handOver:"UI_juma"},3:{targetPos:this.guideList.UI_paota1.worldPosition.clone(),targetNode:this.guideList.UI_paota1,isGuideComplate:!1,nextStep:4,extendNext:0,handOver:"UI_paota"},4:{targetPos:this.guideList.UI_shirenhua1.worldPosition.clone(),targetNode:this.guideList.UI_shirenhua1,isGuideComplate:!1,nextStep:5,extendNext:0,handOver:"UI_shirenhua"},5:{targetPos:this.guideList.UI_jiachong1.worldPosition.clone(),targetNode:this.guideList.UI_jiachong1,isGuideComplate:!1,nextStep:6,extendNext:0,handOver:"UI_jiachong"},6:{targetPos:this.guideList["UI_juma-0011"].worldPosition.clone(),targetNode:this.guideList["UI_juma-0011"],isGuideComplate:!1,nextStep:0,extendNext:0,handOver:"UI_juma-001"},7:{targetPos:this.guideList["UI_jiachong-0011"].worldPosition.clone(),targetNode:this.guideList["UI_jiachong-0011"],isGuideComplate:!1,nextStep:0,extendNext:0,handOver:"UI_jiachong-001"}};this.guideStepJson=e},i.setGuideStepCompLate=function(e){this.guideStepJson[e].isGuideComplate=!0},i.setNextGuideStep=function(e){this.guideCurStep=e},i.nexStep=function(e){void 0===e&&(e=0),this.guideCurStep=0==e?this.guideStepJson[this.guideCurStep].nextStep:this.guideStepJson[this.guideCurStep].extendNext},i.nexPhase=function(){this.guidePhase+=1},i.checkRange=function(){if(this.currentTarget&&this.currentTarget.parent==r.sceneNode.coinParent)return this.currentTarget;for(var e=Number.MAX_VALUE,t=null,i=r.sceneNode.coinParent.children,o=0;o<i.length;o++){var n=i[o];if(n.isValid){var a=Math.floor(4*Math.random()),s=r.sceneNode.moveEndBlockPos.children[a].worldPosition,d=n.worldPosition.clone(),u=n.forward;if(!(s.clone().subtract(d).dot(u)<1.5)){var h=n.worldPosition.clone(),l=r.playerController.getPlayer().node.worldPosition.clone(),c=h.subtract(l).length();c<e&&(e=c,t=n)}}}return this.currentTarget=t,t},i.update=function(e){var t=this;if(u.isCameraMoveEnd&&-1!==this.guideCurStep&&0!==this.guideCurStep){var i=this.guideStepJson[this.guideCurStep],o=function(i){var o,n;t.arrow3dComp.setActive(!0),r.sceneNode.guideParent.active=!0,null==(o=t.arrow3dComp)||o.playFloatingEffect(e,i);var s=new a(i.x,i.y+2,i.z);null==(n=t.arrowPath)||n.createArrowPathTo(s)},s=function(){r.sceneNode.guideParent.active=!1,t.arrow3dComp.setActive(!1)};switch(this.guidePhase){case 1:!i.isGuideComplate&&r.playerController.getPlayer().coinNum>0?o(i.targetPos):s();break;case 2:var d=i.handOver,h=u.handVoer[d].maxCoin-u.handVoer[d].curCoin;if(!i.isGuideComplate&&r.playerController.getPlayer().coinNum>=h&&!u.isBlock)o(i.targetPos);else{var l=this.checkRange();l instanceof n?o(l.worldPosition.clone()):s()}break;case 3:case 4:var c=this.guideStepJson[2],g=i.handOver,p=u.handVoer[g].maxCoin-u.handVoer[g].curCoin,P=u.handVoer[c.handOver].maxCoin-u.handVoer[c.handOver].curCoin;if(u.blockLockNum<2&&r.mapShowController.reunBlock1()&&r.playerController.getPlayer().coinNum>=P)o(c.targetPos);else if(!i.isGuideComplate&&r.playerController.getPlayer().coinNum>=p)o(i.targetPos);else{var m=this.checkRange();m instanceof n?o(m.worldPosition.clone()):s()}break;case 5:var C=this.guideStepJson[2],x=(u.handVoer[C.handOver].maxCoin,u.handVoer[C.handOver].curCoin,this.guideStepJson[7]),v=u.handVoer[x.handOver].maxCoin-u.handVoer[x.handOver].curCoin,_=i.handOver,N=u.handVoer[_].maxCoin-u.handVoer[_].curCoin;if(u.beetleLockNum<2&&r.mapShowController.retunBeetle1()&&r.playerController.getPlayer().coinNum>=v)o(x.targetPos);else if(u.beetleLockNum>=2&&!i.isGuideComplate&&r.playerController.getPlayer().coinNum>=N)o(i.targetPos);else{var w=this.checkRange();w instanceof n?o(w.worldPosition.clone()):s()}}}},t(e,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=null,h=l))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/HandOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtils.ts"],(function(o){var n,e,t,r,i,c,s;return{setters:[function(o){n=o.inheritsLoose},function(o){e=o.cclegacy,t=o._decorator,r=o.Vec3,i=o.tween,c=o.Component},function(o){s=o.MathUtil}],execute:function(){var l;e._RF.push({},"6c6ddzlK5NBV4KVU+Q9bOX5","HandOver",void 0);var a=t.ccclass;t.property,o("HandOver",a("HandOver")(l=function(o){function e(){return o.apply(this,arguments)||this}return n(e,o),e.prototype.handOver=function(o,n,e){if(n){var t=n.worldPosition.clone(),c=o,l=c.getWorldPosition().clone(),a=new r(c.worldPosition.x,(c.worldPosition.y+t.y)/2+10,c.worldPosition.z);i(c).to(.1,{scale:new r(6,6,6)},{easing:"cubicInOut",onUpdate:function(o,n){var e=s.bezierCurve(l,a,t,n);o.worldPosition=e}}).call((function(){c.removeFromParent(),c.destroy(),e()})).start()}else console.error("找不到交付位置节点")},e}(c))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/IdleState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts","./Entity.ts"],(function(t){var e,n,o,i,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){i=t.default},function(t){r=t.CharacterType}],execute:function(){var a;n._RF.push({},"fedf5W59ONAjJXHed8c8UDR","IdleState",void 0);var c=o.ccclass;o.property,t("IdleState",c("IdleState")(a=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onEnter=function(t){if(console.log("进入待机状态"),this.entity.getType()==r.Player){if(this.entity.characterSkeletalAnimation.stop(),!this.entity.characterSkeletalAnimation)return void console.error("骨骼动画组件未初始化");this.entity.characterSkeletalAnimation.crossFade("Idle_Anna_kt",.3)}},o.onUpdate=function(t){},o.onExit=function(t){console.log("退出待机状态")},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/jumpEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Flower.ts","./GlobeVariable.ts"],(function(e){var n,t,r,i,o,a,l,u,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Component},function(e){u=e.Flower},function(e){c=e.GlobeVariable}],execute:function(){var s,p,h,f,v;o._RF.push({},"19a0e5Q/DlJQZYRwXJi9Far","jumpEvent",void 0);var b=a.ccclass,d=a.property;e("jumpEvent",(s=b("jumpEvent"),p=d(u),s((v=n((f=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,r(n,"birthAnnaNode",v,i(n)),n}return t(n,e),n.prototype.qiehuanEvent=function(){this.birthAnnaNode&&(c.isIdel||(c.isIdel=!0,this.birthAnnaNode.IdleEvent())),console.log("jumpEvent")},n}(l)).prototype,"birthAnnaNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/kdtree.ts",["cc","./Common.ts","./Simulator.ts"],(function(e){var t,i,n,s;return{setters:[function(e){t=e.cclegacy},function(e){i=e.RVOMath,n=e.Obstacle},function(e){s=e.Simulator}],execute:function(){t._RF.push({},"a7ee442uqxHILoPf3eaf9Mo","kdtree",void 0);var r=function(){function e(e,t){this.a=void 0,this.b=void 0,this.a=e,this.b=t}var t=e.prototype;return t.lessThan=function(e){return this.a<e.a||!(e.a<this.a)&&this.b<e.b},t.lessEqualThan=function(e){return this.a==e.a&&this.b==e.b||this.lessThan(e)},t.bigThan=function(e){return!this.lessEqualThan(e)},t.bigEqualThan=function(e){return!this.lessThan(e)},e}(),a=function(){this.begin=void 0,this.end=void 0,this.left=void 0,this.right=void 0,this.maxX=void 0,this.maxY=void 0,this.minX=void 0,this.minY=void 0},h=function(){this.obstacle=void 0,this.left=void 0,this.right=void 0};e("KdTree",function(){function e(){this.MAX_LEAF_SIZE=10,this.agents=null,this.agentTree=[],this.obstacleTree=null}var t=e.prototype;return t.buildAgentTree=function(e){if(!this.agents||this.agents.length!=e){this.agents=new Array(e);for(var t=0;t<this.agents.length;t++)this.agents[t]=s.instance.getAgent(t);this.agentTree=new Array(2*this.agents.length);for(var i=0;i<this.agentTree.length;i++)this.agentTree[i]=new a}0!=this.agents.length&&this.buildAgentTreeRecursive(0,this.agents.length,0)},t.buildObstacleTree=function(){this.obstacleTree=new h;for(var e=new Array(s.instance.obstacles.length),t=0;t<e.length;t++)e[t]=s.instance.obstacles[t];this.obstacleTree=this.buildObstacleTreeRecursive(e)},t.computeAgentNeighbors=function(e,t){return this.queryAgentTreeRecursive(e,t,0)},t.computeObstacleNeighbors=function(e,t){this.queryObstacleTreeRecursive(e,t,this.obstacleTree)},t.queryVisibility=function(e,t,i){return this.queryVisibilityRecursive(e,t,i,this.obstacleTree)},t.buildAgentTreeRecursive=function(e,t,i){this.agentTree[i].begin=e,this.agentTree[i].end=t,this.agentTree[i].minX=this.agentTree[i].maxX=this.agents[e].position_.x,this.agentTree[i].minY=this.agentTree[i].maxY=this.agents[e].position_.y;for(var n=e+1;n<t;++n)this.agentTree[i].maxX=Math.max(this.agentTree[i].maxX,this.agents[n].position_.x),this.agentTree[i].minX=Math.min(this.agentTree[i].minX,this.agents[n].position_.x),this.agentTree[i].maxY=Math.max(this.agentTree[i].maxY,this.agents[n].position_.y),this.agentTree[i].minY=Math.min(this.agentTree[i].minY,this.agents[n].position_.y);if(t-e>this.MAX_LEAF_SIZE){for(var s=this.agentTree[i].maxX-this.agentTree[i].minX>this.agentTree[i].maxY-this.agentTree[i].minY,r=.5*(s?this.agentTree[i].maxX+this.agentTree[i].minX:this.agentTree[i].maxY+this.agentTree[i].minY),a=e,h=t;a<h;){for(;a<h&&(s?this.agents[a].position_.x:this.agents[a].position_.y)<r;)++a;for(;h>a&&(s?this.agents[h-1].position_.x:this.agents[h-1].position_.y)>=r;)--h;if(a<h){var o=this.agents[a];this.agents[a]=this.agents[h-1],this.agents[h-1]=o,++a,--h}}var g=a-e;0==g&&(++g,++a,++h),this.agentTree[i].left=i+1,this.agentTree[i].right=i+2*g,this.buildAgentTreeRecursive(e,a,this.agentTree[i].left),this.buildAgentTreeRecursive(a,t,this.agentTree[i].right)}},t.buildObstacleTreeRecursive=function(e){if(0==e.length)return null;for(var t=new h,a=0,o=e.length,g=o,u=0;u<e.length;++u){for(var l=0,c=0,f=e[u],T=f.next,v=0;v<e.length;v++)if(u!=v){var p=e[v],b=p.next,m=i.leftOf(f.point,T.point,p.point),q=i.leftOf(f.point,T.point,b.point);m>=-i.RVO_EPSILON&&q>=-i.RVO_EPSILON?++l:(m<=i.RVO_EPSILON&&q<=i.RVO_EPSILON||++l,++c);var x=new r(Math.max(l,c),Math.min(l,c)),y=new r(Math.max(o,g),Math.min(o,g));if(x.bigEqualThan(y))break}var R=new r(Math.max(l,c),Math.min(l,c)),O=new r(Math.max(o,g),Math.min(o,g));R.lessThan(O)&&(o=l,g=c,a=u)}for(var d=[],_=0;_<o;++_)d.push(null);for(var M=[],A=0;A<g;++A)M.push(null);for(var V=0,X=0,E=a,S=e[E],Y=S.next,I=0;I<e.length;++I)if(E!=I){var L=e[I],N=L.next,w=i.leftOf(S.point,Y.point,L.point),P=i.leftOf(S.point,Y.point,N.point);if(w>=-i.RVO_EPSILON&&P>=-i.RVO_EPSILON)d[V++]=e[I];else if(w<=i.RVO_EPSILON&&P<=i.RVO_EPSILON)M[X++]=e[I];else{var F=i.det(Y.point.minus(S.point),L.point.minus(S.point))/i.det(Y.point.minus(S.point),L.point.minus(N.point)),k=L.point.plus(N.point.minus(L.point).scale(F)),Z=new n;Z.point=k,Z.previous=L,Z.next=N,Z.convex=!0,Z.direction=L.direction,Z.id=s.instance.obstacles.length,s.instance.obstacles.push(Z),L.next=Z,N.previous=Z,w>0?(d[V++]=L,M[X++]=Z):(M[X++]=L,d[V++]=Z)}}return t.obstacle=S,t.left=this.buildObstacleTreeRecursive(d),t.right=this.buildObstacleTreeRecursive(M),t},t.queryAgentTreeRecursive=function(e,t,n){if(this.agentTree[n].end-this.agentTree[n].begin<=this.MAX_LEAF_SIZE)for(var s=this.agentTree[n].begin;s<this.agentTree[n].end;++s)t=e.insertAgentNeighbor(this.agents[s],t);else{var r=i.sqr(Math.max(0,this.agentTree[this.agentTree[n].left].minX-e.position_.x))+i.sqr(Math.max(0,e.position_.x-this.agentTree[this.agentTree[n].left].maxX))+i.sqr(Math.max(0,this.agentTree[this.agentTree[n].left].minY-e.position_.y))+i.sqr(Math.max(0,e.position_.y-this.agentTree[this.agentTree[n].left].maxY)),a=i.sqr(Math.max(0,this.agentTree[this.agentTree[n].right].minX-e.position_.x))+i.sqr(Math.max(0,e.position_.x-this.agentTree[this.agentTree[n].right].maxX))+i.sqr(Math.max(0,this.agentTree[this.agentTree[n].right].minY-e.position_.y))+i.sqr(Math.max(0,e.position_.y-this.agentTree[this.agentTree[n].right].maxY));r<a?r<t&&a<(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].left))&&(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].right)):a<t&&r<(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].right))&&(t=this.queryAgentTreeRecursive(e,t,this.agentTree[n].left))}return t},t.queryObstacleTreeRecursive=function(e,t,n){if(null==n)return t;var s=n.obstacle,r=s.next,a=i.leftOf(s.point,r.point,e.position_);return t=this.queryObstacleTreeRecursive(e,t,a>=0?n.left:n.right),i.sqr(a)/i.absSq(r.point.minus(s.point))<t&&(a<0&&e.insertObstacleNeighbor(n.obstacle,t),this.queryObstacleTreeRecursive(e,t,a>=0?n.right:n.left)),t},t.queryVisibilityRecursive=function(e,t,n,s){if(null==s)return!0;var r=s.obstacle,a=r.next,h=i.leftOf(r.point,a.point,e),o=i.leftOf(r.point,a.point,t),g=1/i.absSq(a.point.minus(r.point));if(h>=0&&o>=0)return this.queryVisibilityRecursive(e,t,n,s.left)&&(i.sqr(h)*g>=i.sqr(n)&&i.sqr(o)*g>=i.sqr(n)||this.queryVisibilityRecursive(e,t,n,s.right));if(h<=0&&o<=0)return this.queryVisibilityRecursive(e,t,n,s.right)&&(i.sqr(h)*g>=i.sqr(n)&&i.sqr(o)*g>=i.sqr(n)||this.queryVisibilityRecursive(e,t,n,s.left));if(h>=0&&o<=0)return this.queryVisibilityRecursive(e,t,n,s.left)&&this.queryVisibilityRecursive(e,t,n,s.right);var u=i.leftOf(e,t,r.point),l=i.leftOf(e,t,a.point),c=1/i.absSq(t.minus(e));return u*l>=0&&i.sqr(u)*c>i.sqr(n)&&i.sqr(l)*c>i.sqr(n)&&this.queryVisibilityRecursive(e,t,n,s.left)&&this.queryVisibilityRecursive(e,t,n,s.right)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,a,l;return{setters:[function(e){r=e.createClass},function(e){t=e.cclegacy,a=e._decorator,l=e.sys}],execute:function(){var n,o;t._RF.push({},"5ce68exlxhOXJFmiSx39DV8","LanguageManager",void 0);var i=a.ccclass;e("LanguageManager",i("LanguageManager")(((o=function(){function e(){}return e.t=function(e){var r,t,a,n,o=l.languageCode;return null!=(r=null!=(t=null==(a=this.DICT[o])?void 0:a[e])?t:null==(n=this.DICT.en)?void 0:n[e])?r:e},r(e,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=null,o.DICT={zh:{Download:"下载",retry:"重试",Stagbeetle:"锹形虫",Beetle:"甲虫",Beetlewarrior:"甲虫战士"},"zh-cn":{Download:"下载",retry:"重试",Stagbeetle:"锹形虫",Beetle:"甲虫",Beetlewarrior:"甲虫战士"},"zh-hk":{Download:"下載",retry:"重試",Stagbeetle:"鍬形蟲",Beetle:"甲蟲",Beetlewarrior:"甲蟲戰士"},"zh-mo":{Download:"下載",retry:"重試",Stagbeetle:"鍬形蟲",Beetle:"甲蟲",Beetlewarrior:"甲蟲戰士"},"zh-tw":{Download:"下載",retry:"重試",Stagbeetle:"鍬形蟲",Beetle:"甲蟲",Beetlewarrior:"甲蟲戰士"},en:{Download:"Download",retry:"TryAgain",Stagbeetle:"Stagbeetle",Beetle:"Beetle",Beetlewarrior:"Beetlewarrior"},fr:{Download:"Télécharger",retry:"Réessayer",Stagbeetle:"Lucane",Beetle:"Scarabée",Beetlewarrior:"Guerrier scarabée"},ja:{Download:"ダウンロード",Stagbeetle:"クワガタムシ",retry:"再試行",Beetle:"甲虫",Beetlewarrior:"甲虫戦士"},ko:{Download:"다운로드",retry:"다시 시도",Stagbeetle:"사슴벌레",Beetle:"딱정벌레",Beetlewarrior:"딱정벌레 전사"},de:{Download:"Herunterladen",retry:"Wiederholen",Stagbeetle:"Hirschkäfer",Beetle:"Käfer",Beetlewarrior:"Käferkrieger"},ru:{Download:"Скачать",Stagbeetle:"Жук-олень",retry:"Повторить",Beetle:"Жук",Beetlewarrior:"Жук-воин"}},n=o))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSingle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var n,t,a,r,i,l,o,u,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Label,u=e.Component},function(e){c=e.LanguageManager}],execute:function(){var s,g,p,f,b;i._RF.push({},"fd2a8Lt+PNHYp1308qFMRf8","LanguageSingle",void 0);var h=l.ccclass,L=l.property;e("LanguageSingle",(s=h("LanguageSingle"),g=L(o),s((b=n((f=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];return n=e.call.apply(e,[this].concat(i))||this,a(n,"label",b,r(n)),n}t(n,e);var i=n.prototype;return i.start=function(){if(this.label){var e=c.t(this.label.string);e&&(this.label.string=e)}},i.update=function(e){},n}(u)).prototype,"label",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./AnimationEvent.ts","./App.ts","./BooldPaling.ts","./BeetleController.ts","./Blood.ts","./DropController.ts","./EnemyController.ts","./EnemySpider.ts","./Entity.ts","./Flower.ts","./Flowertest.ts","./GoldMineController.ts","./HandOver.ts","./Player.ts","./PlayerAttackFlower.ts","./PlayerBeetle.ts","./PlayerController.ts","./PlayerPylon.ts","./PlayerTrigger.ts","./PlayerTurret.ts","./FlowerEvent.ts","./GameManager.ts","./ArroePath.ts","./Arrow3D.ts","./GuideManager.ts","./LanguageManager.ts","./LanguageSingle.ts","./MapShowController.ts","./PalingAttack.ts","./PalingMaterial.ts","./Agent.ts","./Common.ts","./RVOObstacles.ts","./RVOUtils.ts","./Simulator.ts","./kdtree.ts","./SceneNode.ts","./IdleState.ts","./MoveBase.ts","./MoveState.ts","./State.ts","./AnnaAniEvent.ts","./CoinComponent.ts","./GameEndManager.ts","./UIJoyStick.ts","./VirtuallInput.ts","./blockRed.ts","./AspectAdapter38_Safe.ts","./CameraMain.ts","./CloudParticleEffect.ts","./EventManager.ts","./EventType.ts","./GlobeVariable.ts","./MathUtils.ts","./NodePoolManager.ts","./ResourceManager.ts","./SateMachine.ts","./SoundManager.ts","./super_html_playable.ts","./CharacterDataJson.ts","./DataManager.ts","./MonsterData.ts","./Singleton.ts","./jumpEvent.ts","./DissolveEffect.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MapShowController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobeVariable.ts","./App.ts","./SoundManager.ts","./GameEndManager.ts"],(function(e){var i,t,a,n,o,r,l,s,h,u,c,d,g,b,m,p,C,y,A,v,w;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Node,s=e.Camera,h=e.Animation,u=e.Vec3,c=e.tween,d=e.find,g=e.BoxCollider,b=e.RigidBody,m=e.Label,p=e.Sprite,C=e.Component},function(e){y=e.GlobeVariable},function(e){A=e.App},function(e){v=e.SoundManager},function(e){w=e.GameEndManager}],execute:function(){var B,f,k,P,I,N,U,j,_,M,S,L,T,G,x;o._RF.push({},"80814rZqn9LJbULsGsEPGsW","MapShowController",void 0);var R=r.ccclass,V=r.property;e("MapShowController",(B=R("MapShowController"),f=V({type:l,tooltip:"建筑物父类Cons"}),k=V({type:l,tooltip:"建筑物 解锁区域父类UIPos"}),P=V({type:s,tooltip:"记录主摄像机"}),I=V({type:l,tooltip:"记录玩家节点"}),N=V({type:l,tooltip:" 箭头引导"}),U=V({type:h,tooltip:"结束坍塌动画"}),B((M=i((_=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return i=e.call.apply(e,[this].concat(o))||this,a(i,"buidingParent",M,n(i)),a(i,"buidingAreaParent",S,n(i)),a(i,"mianCamera",L,n(i)),a(i,"player",T,n(i)),a(i,"arrowGuide",G,n(i)),a(i,"playerAnim",x,n(i)),i.arrowTower=null,i.turret=null,i.block1=null,i.block2=null,i.beetle=null,i.flower=null,i.attackFlower=null,i.arrowTowerArea=null,i.turretArea=null,i.block1Area=null,i.block2Area=null,i.beetleArea=null,i.beetleArea1=null,i.attackFlowerArea=null,i.bubble=null,i.mainCameraPos=null,i.mainCameraRot=null,i.playerPos=null,i.playerRot=null,i.curCameraPos=new u,i}t(i,e);var o=i.prototype;return o.onLoad=function(){this.arrowTower=this.buidingParent.getChildByName("jianta"),this.turret=this.buidingParent.getChildByName("paota"),this.block1=this.buidingParent.getChildByName("juma01"),this.block2=this.buidingParent.getChildByName("juma02"),this.beetle=this.buidingParent.getChildByName("jiachong"),this.flower=this.buidingParent.getChildByName("hua"),this.attackFlower=this.buidingParent.getChildByName("shirenhua"),this.arrowTowerArea=this.buidingAreaParent.getChildByName("UI_jianta"),this.turretArea=this.buidingAreaParent.getChildByName("UI_paota"),this.block1Area=this.buidingAreaParent.getChildByName("UI_juma"),this.block2Area=this.buidingAreaParent.getChildByName("UI_juma-001"),this.beetleArea=this.buidingAreaParent.getChildByName("UI_jiachong"),this.beetleArea1=this.buidingAreaParent.getChildByName("UI_jiachong-001"),this.attackFlowerArea=this.buidingAreaParent.getChildByName("UI_shirenhua"),this.bubble=this.buidingAreaParent.getChildByName("qipao"),this.bubble.active=!1,this.beetleArea1.active=!1,this.showLable(),this.mainCameraPos=this.mianCamera.node.position.clone(),this.mainCameraRot=this.mianCamera.node.rotation.clone(),this.playerPos=this.player.position.clone(),this.playerRot=this.player.rotation.clone()},o.guildMoveCamera=function(){var e=this;y.isBeetleGuild||(y.isBeetleGuild=!0,y.isJoyStickBan=!0,this.curCameraPos=this.mianCamera.node.position.clone(),c(this.mianCamera.node).to(1.5,{position:new u(156.87,111,27.13)}).to(.8,{position:new u(156.87,111,27.13)}).to(1.5,{position:this.curCameraPos}).call((function(){y.isJoyStickBan=!1,e.arrowGuide.active=!0,e.arrowGuide.getComponent(h).play("endArrowAni")})).start())},o.continueGame=function(){this.mianCamera.node.setPosition(this.mainCameraPos),this.mianCamera.node.setRotation(this.mainCameraRot),this.player.setPosition(this.playerPos),this.player.setRotation(this.playerRot),this.arrowTower.active=!1,this.arrowTower.getChildByName("HuoChaiHeJiaTa").getChildByName("model").getChildByName("L_prp_HuoChaiHe_jt_Skin_V001").getChildByName("HuoChaiHe").getChildByName("HuoChaiGun").active=!0,this.turret.active=!1,this.block1.active=!1,this.block2.active=!1,this.beetle.active=!1,this.attackFlower.active=!1,this.arrowTowerArea.active=!0,this.turretArea.active=!1,this.block1Area.active=!1,this.block2Area.active=!1,this.beetleArea.active=!1,this.beetleArea1.active=!1,this.attackFlowerArea.active=!1,this.bubble=this.buidingAreaParent.getChildByName("qipao"),this.bubble.active=!1,this.beetleArea1.active=!1,this.continueShowLable(),this.disableColliderAndRigidBody("Physice/UI_paota"),this.disableColliderAndRigidBody("Physice/UI_jianta"),this.disableColliderAndRigidBody("Physice/UI_jiachong")},o.disableColliderAndRigidBody=function(e){var i=d(e);if(i){var t=i.getComponent(g);t&&(t.enabled=!1);var a=i.getComponent(b);a&&(a.enabled=!1)}},o.continueShowLable=function(){var e=this;y.handOverArea.forEach((function(i){var t,a=y.handVoer[i],n=e.buidingAreaParent.getChildByName(i);n&&((null==(t=n.getChildByName("UnlockTileLabel"))?void 0:t.getComponent(m)).string=a.maxCoin+"",n.getChildByName("progress").getComponent(p).fillRange=0)})),this.bubble.getChildByName("qipao").getChildByName("UnlockTileLabel-001").getComponent(m).string=y.handVoer["UI_jiachong-001"].maxCoin+""},o.bubbleAniSpeed=function(e){void 0===e&&(e=.7);var i=this.bubble.getComponent(h),t=i.getState("qipaohuxi");t&&(t.speed=e),i.play("qipaohuxi")},o.showLable=function(){var e=this;y.handOverArea.forEach((function(i){var t,a=y.handVoer[i],n=e.buidingAreaParent.getChildByName(i);n&&((null==(t=n.getChildByName("UnlockTileLabel"))?void 0:t.getComponent(m)).string=a.maxCoin+"")})),this.bubble.getChildByName("qipao").getChildByName("UnlockTileLabel-001").getComponent(m).string=y.handVoer["UI_jiachong-001"].maxCoin+""},o.setBubbleLable=function(){var e=y.handVoer["UI_jiachong-001"].maxCoin-y.handVoer["UI_jiachong-001"].showCoin;e=Math.max(0,e),this.bubble.getChildByName("qipao").getChildByName("UnlockTileLabel-001").getComponent(m).string=e+"",this.bubble.getChildByName("qipao").getChildByName("qipao-001").getComponent(p).fillRange=y.handVoer["UI_jiachong-001"].showCoin/y.handVoer["UI_jiachong-001"].maxCoin},o.start=function(){var e=this;this.buidingAreaParent.children.forEach((function(e){e.active=!1})),this.buidingParent.children.forEach((function(e){e.active=!1})),this.arrowTower.active=!0,this.scheduleOnce((function(){e.arrowTower.active=!1}),0),this.flower.active=!0,this.arrowTowerArea.active=!0},o.reunBlock1=function(){return this.block1Area.active},o.retunBeetle1=function(){return this.beetleArea1.active},o.restBlock1=function(){this.block1Area.active=!0;var e=this.block1Area.getChildByName("progress").getComponent(p),i=this.block1Area.getChildByName("UnlockTileLabel").getComponent(m),t=y.handVoer[this.block1Area.name];t.curCoin=0,t.showCoin=0,e.fillRange=0,i.string=t.maxCoin+""},o.showBeetleBubble=function(){this.bubble.active=!0,this.bubbleAniSpeed(),this.beetleArea1.active=!0},o.hideBeetleBubble=function(e){var i=y.handVoer[e];i.curCoin=0,i.showCoin=0,y.beetleIsMove=!0,y.beetleLockNum++,v.Instance.playAudio("jiachongchongfenghao"),this.bubble.active=!1,this.beetleArea1.active=!1,this.bubble.getChildByName("qipao").getChildByName("qipao-001").getComponent(p).fillRange=0,this.bubble.getChildByName("qipao").getChildByName("UnlockTileLabel-001").getComponent(m).string=y.handVoer["UI_jiachong-001"].maxCoin+""},o.showUIBlock1Area=function(){this.block1Area.active=!0},o.showUIBlock2Area=function(){this.block2Area.active=!0},o.showUIBeetleArea=function(){this.beetleArea.active=!0},o.showUIAttackFlowerArea=function(){this.attackFlowerArea.active=!0},o.showUIArrowTowerArea=function(){this.arrowTowerArea.active=!0},o.showUITurretArea=function(){this.turretArea.active=!0},o.cameraMove=function(){this.curCameraPos=this.mianCamera.node.position.clone(),c(this.mianCamera.node).to(1.5,{position:new u(118,111,66)}).to(1.5,{position:this.curCameraPos}).call((function(){y.isJoyStickBan=!1})).start()},o.showUIBuiding=function(e){if("UI_jianta"==e){var i=d("Physice/UI_jianta"),t=i.getComponent(g);t&&(t.enabled=!0);var a=i.getComponent(b);a&&(a.enabled=!0),this.arrowTower.active=!0,v.Instance.playAudio("jiesuo"),y.isStartGame=!0,A.sceneNode.enemyParent.active=!0,this.showUIBlock1Area(),A.guideManager.setGuideStepCompLate(1),A.guideManager.nexStep(),A.guideManager.nexPhase()}if("UI_juma"==e&&(this.block1.active=!0,this.block1.getComponent(h).play("juma01chuxian"),v.Instance.playAudio("jiesuo"),y.isBlock=!0,y.isFirstBlock&&(this.showUITurretArea(),A.guideManager.setGuideStepCompLate(2),A.guideManager.nexStep(),A.guideManager.nexPhase()),y.blockLockNum++),"UI_paota"==e){var n=d("Physice/UI_paota"),o=n.getComponent(g);o&&(o.enabled=!0);var r=n.getComponent(b);r&&(r.enabled=!0),this.turret.active=!0,v.Instance.playAudio("jiesuo"),y.enemySpiderNumBig=3,this.showUIAttackFlowerArea(),A.guideManager.setGuideStepCompLate(3),A.guideManager.nexStep()}if("UI_juma-001"==e&&(this.playerAnim.play("endAni"),v.Instance.playAudio("jiesuo"),setTimeout((function(){A.sceneNode.GameEnd.active=!0,A.sceneNode.GameEnd.getComponent(w).showGameEnd(1)}),2e3),y.isGameEnd=!0),"UI_jiachong"==e){var l=d("Physice/UI_jiachong"),s=l.getComponent(g);s&&(s.enabled=!0);var u=l.getComponent(b);u&&(u.enabled=!0),this.beetle.active=!0,v.Instance.playAudio("jiesuo"),y.beetleIsMove=!0,v.Instance.playAudio("jiachongchongfenghao"),y.beetleLockNum++,A.guideManager.setGuideStepCompLate(5),A.guideManager.nexStep(),A.guideManager.nexPhase()}"UI_jiachong-001"==e&&(this.hideBeetleBubble(e),this.showUIBlock2Area(),this.guildMoveCamera()),"UI_shirenhua"==e&&(v.Instance.playAudio("jiesuo"),this.attackFlower.active=!0,y.isJoyStickBan=!0,this.showUIBeetleArea(),this.cameraMove(),A.guideManager.setGuideStepCompLate(4),A.guideManager.nexStep(),A.guideManager.nexPhase())},i}(C)).prototype,"buidingParent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(_.prototype,"buidingAreaParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(_.prototype,"mianCamera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(_.prototype,"player",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(_.prototype,"arrowGuide",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(_.prototype,"playerAnim",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=_))||j));o._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(r){var t,n,e,a,o;return{setters:[function(r){t=r.cclegacy,n=r.v3,e=r.Vec3,a=r.Quat,o=r.Mat4}],execute:function(){t._RF.push({},"c96adGipyhEgo+2O3DP1nO9","MathUtils",void 0);var i=n();n(),n(),n(),r("MathUtil",function(){function r(){}return r.generateSmoothPath=function(r,t,n,o){void 0===n&&(n=100),void 0===o&&(o=5);var i=[],u=e.lerp(new e,r,t,.5);u.y+=o;for(var c=[],l=0;l<=n;l++){var s=l/n;c.push(this.quadraticBezier(r,u,t,s))}for(var v=0;v<c.length;v++){var f=void 0;if(0===v)f=(f=c[v+1].clone()).subtract(c[v]);else if(v===c.length-1)f=(f=c[v].clone()).subtract(c[v-1]);else{var d=c[v].clone();d.subtract(c[v-1]);var h=c[v+1].clone();h.subtract(c[v]),f=d.add(h).multiplyScalar(.5)}f.normalize();var y=new a;if(!f.equals(e.ZERO)){var z=new e(0,1,0);a.rotationTo(y,z,f)}i.push({position:c[v],rotation:y})}return i},r.quadraticBezier=function(r,t,n,a){var o=1-a,i=o*o,u=a*a,c=i*r.x+2*o*a*t.x+u*n.x,l=i*r.y+2*o*a*t.y+u*n.y,s=i*r.z+2*o*a*t.z+u*n.z;return new e(c,l,s)},r.getAngleBetweenQuats=function(r,t){var n=a.dot(r,t),e=Math.min(1,Math.max(-1,n));return 2*Math.acos(e)},r.localToWorldPos3D=function(r,t){if(null==t||!t.isValid)return console.warn("Target node is invalid!"),r.clone();t.updateWorldTransform();var n=new e,a=new o;return t.getWorldMatrix(a),e.transformMat4(n,r,a),n},r.signAngle=function(r,t,n){var a=e.angle(r,t);return e.cross(i,r,t),a*Math.sign(n.x*i.x+n.y*i.y+n.z*i.z)},r.eulerToForward=function(r){var t=new a;a.fromEuler(t,r.x,r.y,r.z);var n=new e(0,0,-1);return e.transformQuat(n,n,t),e.normalize(n,n),n},r.bezierCurve=function(r,t,n,a){var o=1-a,i=a*a,u=o*o,c=new e;return c.x=u*r.x+2*o*a*t.x+i*n.x,c.y=u*r.y+2*o*a*t.y+i*n.y,c.z=u*r.z+2*o*a*t.z+i*n.z,c},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterData.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"dcda9dvv0JCRp92PLfuCMqT","MonsterData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/MoveBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VirtuallInput.ts"],(function(e){var t,o,r,a,i,n,s,l,d,c,v,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,s=e.v3,l=e.find,d=e.Vec3,c=e.Quat,v=e.Component},function(e){u=e.VirtualInput}],execute:function(){var p,f,h;i._RF.push({},"afeeav5qMZLvpkPCQoISvta","MoveBase",void 0);var m=n.ccclass,M=n.property;e("MoveBase",m("MoveBase")((h=t((f=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return t=e.call.apply(e,[this].concat(i))||this,r(t,"moveSmoothFactor",h,a(t)),t.lastMoveDir=s(),t}o(t,e);var i=t.prototype;return i.handleInput=function(e,t){var o=u.horizontal,r=u.vertical;if(0!==o||0!==r){var a=l("Main Camera");if(a){var i=a.getWorldRotation(),n=new d(0,0,-1),s=new d(1,0,0);d.transformQuat(n,n,i),d.transformQuat(s,s,i),n.y=0,s.y=0,n.normalize(),s.normalize();var c=new d;d.scaleAndAdd(c,c,s,o),d.scaleAndAdd(c,c,n,r),c.normalize(),c.length()>.1?(c.normalize(),d.lerp(this.lastMoveDir,this.lastMoveDir,c,this.moveSmoothFactor),this.lastMoveDir.normalize()):this.lastMoveDir.set(0,0,0),t.destForward.set(this.lastMoveDir),this.doMove(e,t),this.doRotate(e,t)}}else t.destForward.set(0,0,0)},i.doMove=function(e,t){var o=s();d.multiplyScalar(o,t.destForward,t.moveSpeed*e);var r=t.node.getWorldPosition();t.node.setWorldPosition(r.x+o.x,r.y,r.z+o.z)},i.doRotate=function(e,t){if(!(t.destForward.length()<.1)){var o=new c;c.fromViewUp(o,t.destForward,d.UP);var r=t.node.getWorldRotation();c.slerp(r,r,o,e*t.rotateSpeed),t.node.setWorldRotation(r)}},t}(v)).prototype,"moveSmoothFactor",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),p=f))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/MoveState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts","./Entity.ts","./MoveBase.ts","./SoundManager.ts"],(function(t){var e,n,o,a,r,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){a=t.default},function(t){r=t.CharacterType},function(t){i=t.MoveBase},function(t){c=t.SoundManager}],execute:function(){var s;n._RF.push({},"ee803rH8nND2alI3Be201Yr","MoveState",void 0);var u=o.ccclass;o.property,t("MoveState",u("MoveState")(s=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).moveBase=null,e}e(n,t);var o=n.prototype;return o.onEnter=function(t){if(console.log("进入移动状态"),this.entity.getType()==r.Player){if(!this.entity.characterSkeletalAnimation)return void console.error("骨骼动画组件未初始化");this.moveBase=new i,this.entity.characterSkeletalAnimation.crossFade("Run_Anna_kt",.1)}c.Instance.playRunBGM()},o.onUpdate=function(t){this.moveBase.handleInput(t,this.entity)},o.onExit=function(t){console.log("退出移动状态"),c.Instance.stopRunBGM()},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/NodePoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,a,n,t,r;return{setters:[function(o){e=o.createClass},function(o){a=o.cclegacy,n=o._decorator,t=o.NodePool,r=o.instantiate}],execute:function(){var l,i;a._RF.push({},"09900q7FZJG+L9sU/K6SFnf","NodePoolManager",void 0);var s=n.ccclass;n.property,o("NodePoolManager",s("NodePoolManager")(((i=function(){function o(){this.poolMap=new Map}var a=o.prototype;return a.initPool=function(o,e,a){void 0===e&&(e=5);var n=a||o.data.name;this.poolMap.has(n)&&this.clearPool(n);var r=new t;this.poolMap.set(n,{pool:r,prefab:o}),this.expandPool(n,e)},a.getNode=function(o){var e=null,a="";if("string"==typeof o?(a=o,e=this.poolMap.get(a)):(a=o.data.name,(e=this.poolMap.get(a))||(this.initPool(o),e=this.poolMap.get(a))),!e)return console.warn("NodePoolManager: 未找到名为 "+a+" 的节点池"),null;var n=null,t=e,l=t.pool,i=t.prefab;return l.size()>0?n=l.get():(n=r(i)).name=i.data.name,n},a.returnNode=function(o,e){var a=e||o.name,n=this.poolMap.get(a);if(!n)return console.warn("NodePoolManager: 未找到名为 "+a+" 的节点池，节点 "+o.name+" 无法返回"),void o.destroy();try{n.pool.put(o)}catch(e){console.error("NodePoolManager: 返回节点 "+o.name+" 到池 "+a+" 时出错:",e),o.destroy()}},a.expandPool=function(o,e){var a=this.poolMap.get(o);if(a)for(var n=a.pool,t=a.prefab,l=0;l<e;l++){var i=r(t);i.name=t.data.name,n.put(i)}else console.warn("NodePoolManager: 未找到名为 "+o+" 的节点池")},a.clearPool=function(o){var e=this.poolMap.get(o);e&&(e.pool.clear(),this.poolMap.delete(o))},a.clearAllPools=function(){this.poolMap.forEach((function(o,e){o.pool.clear()})),this.poolMap.clear()},a.getPoolSize=function(o){var e=this.poolMap.get(o);return e?e.pool.size():0},e(o,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=null,l=i))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/PalingAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts"],(function(n){var a,t,i,e,s,l,c;return{setters:[function(n){a=n.extends,t=n.createForOfIteratorHelperLoose,i=n.createClass},function(n){e=n.cclegacy,s=n._decorator,l=n.Vec3},function(n){c=n.App}],execute:function(){var o,r;e._RF.push({},"469d2Eu/49Iw7WFlo26Ql/y","PalingAttack",void 0);var u=s.ccclass;n("PalingAttack",u("PalingAttack")(((r=function(){function n(){this.attackPaling={},this._palingBoundings=[],this._paling2State=0}var e=n.prototype;return e.setPaling=function(n){var a=this;if(void 0===n&&(n=1),c&&c.sceneNode){if(this.attackPaling={},1==n)(c.sceneNode.attackPalingLevel_1||[]).forEach((function(n){a.addOneAttack(n)}));else if(2==n){(c.sceneNode.attackPalingLevel_2||[]).forEach((function(n){a.addOneAttack(n)}))}else if(3==n){(c.sceneNode.attackPalingLevel_3||[]).forEach((function(n){a.addOneAttack(n)}))}else 4==n&&[].concat(c.sceneNode.attackPalingLevel_3||[],c.sceneNode.attackPalingLevel_4||[]).forEach((function(n){return a.addOneAttack(n)}));c.enemyController.resetEnemyAttackPaling()}else console.warn("App或sceneNode未初始化")},e.addOneAttack=function(n){var a=n.uuid;this.attackPaling[a]={node:n,curNum:0,maxNum:2,distance:2}},e.getNearstPaling=function(n){var a=null,t=1/0;for(var i in this.attackPaling)if(this.attackPaling.hasOwnProperty(i)){var e=this.attackPaling[i];if(e.curNum<e.maxNum){var s=l.squaredDistance(e.node.getWorldPosition(),n);s<t&&(t=s,a=e)}}return a||null},e.getAllPaling=function(){var n={};for(var t in this.attackPaling)this.attackPaling.hasOwnProperty(t)&&(n[t]=a({},this.attackPaling[t]));return n},e.getPalingByUuid=function(n){return this.attackPaling[n]},e.updatePalingCurNum=function(n,a){var t=this.attackPaling[n];return!!t&&(t.curNum=a,!0)},e.inPalingsByLevel=function(n,a){0===this._palingBoundings.length?this.updateBounding():3!==this._paling2State&&this.updatePaling2Bounding();var t=this._palingBoundings[n-1];return t?a.x>=t.minX&&a.x<=t.maxX&&a.z>=t.minZ&&a.z<=t.maxZ:(console.error("没有找到对应栅栏的边界 "+n),!1)},e.updateBounding=function(){for(var n,a=c.sceneNode.palingLevels,i=t(a);!(n=i()).done;){for(var e,s=n.value,l=1/0,o=-1/0,r=1/0,u=-1/0,g=t(s.children);!(e=g()).done;){var h=e.value.worldPosition;l=Math.min(l,h.x),o=Math.max(o,h.x),r=Math.min(r,h.z),u=Math.max(u,h.z)}this._palingBoundings.push({minX:l,maxX:o,minZ:r,maxZ:u})}},e.updatePaling2Bounding=function(){var n=0,a=c.sceneNode.palingLevels;if(a[3].active&&a[4].active&&a[5].active?(n=1,a[6].active&&(n=3)):a[6].active&&(n=2),n!==this._paling2State){var t=this._palingBoundings[1],i=t.minX,e=t.maxX,s=t.minZ,l=t.maxZ;if((1===n||3===n)&&1!==this._paling2State)for(var o=3;o<6;o++)i=Math.min(i,this._palingBoundings[o].minX),e=Math.max(e,this._palingBoundings[o].maxX),s=Math.min(s,this._palingBoundings[o].minZ),l=Math.max(l,this._palingBoundings[o].maxZ);2!==n&&3!==n||2===this._paling2State||(i=Math.min(i,this._palingBoundings[6].minX),e=Math.max(e,this._palingBoundings[6].maxX),s=Math.min(s,this._palingBoundings[6].minZ),l=Math.max(l,this._palingBoundings[6].maxZ)),this._palingBoundings[1]={minX:i,maxX:e,minZ:s,maxZ:l},this._paling2State=n}},i(n,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null,o=r))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/PalingMaterial.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,i,n,l,o,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,c=e.MeshRenderer,u=e.tween,s=e.Component}],execute:function(){var p,M,d,f,y,b,g,h,v,m,w;n._RF.push({},"2a182jLQjpMN5B8VilL6IBo","PalingMaterial",void 0);var x=l.ccclass,z=l.property;e("PalingMaterial",(p=x("PalingMaterial"),M=z({type:o,tooltip:"基础材质"}),d=z({type:o,tooltip:"红色材质"}),f=z({type:o,tooltip:"附加材质"}),y=z({type:c,tooltip:"MeshRenderer"}),p((h=t((g=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,a(t,"baseMaterial",h,i(t)),a(t,"redMaterial",v,i(t)),a(t,"extendMaterial",m,i(t)),a(t,"rendererMaterial",w,i(t)),t}r(t,e);var n=t.prototype;return n.shakeMaterial=function(){var e=this;u(this.rendererMaterial.node).sequence(u().call((function(){e.rendererMaterial.setMaterialInstance(e.redMaterial,0),e.extendMaterial&&e.rendererMaterial.setMaterialInstance(e.redMaterial,1)})),u().delay(.1),u().call((function(){e.rendererMaterial.setMaterialInstance(e.baseMaterial,0),e.extendMaterial&&e.rendererMaterial.setMaterialInstance(e.extendMaterial,1)})),u().delay(.1)).repeat(1).start()},n.start=function(){},n.update=function(e){},t}(s)).prototype,"baseMaterial",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"redMaterial",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(g.prototype,"extendMaterial",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"rendererMaterial",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./PlayerTrigger.ts","./App.ts","./GlobeVariable.ts","./EventManager.ts","./EventType.ts","./SoundManager.ts"],(function(t){var n,e,o,i,a,r,c,l,s,u,d,p,f,g,h,y,m,b,k,v,P;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Animation,l=t.BoxCollider,s=t.RigidBody,u=t.v3,d=t.tween,p=t.Vec3,f=t.Mat4,g=t.Quat},function(t){h=t.default},function(t){y=t.PlayerTrigger},function(t){m=t.App},function(t){b=t.GlobeVariable},function(t){k=t.EventManager},function(t){v=t.EventType},function(t){P=t.SoundManager}],execute:function(){var w,C,N,A,S;a._RF.push({},"95c79LXaalGUoWPGhd/e1rY","Player",void 0);var W=r.ccclass,T=r.property;t("Player",(w=W("Player"),C=T(c),w((S=n((A=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,o(n,"attackAni",S,i(n)),n.entityName=b.entifyName.player,n.moveSpeed=18,n.rotateSpeed=14,n.attack=1,n.coinNum=b.coinStartNum,n.backpack=null,n.triggerNode=new y,n.coinTween=null,n.coinHeightInterval=.45,n}e(n,t);var a=n.prototype;return a.subtractCoin=function(t){this.coinNum-=t,k.instance.emit(v.CoinSub,t),this.calibrateCoinsPosition()},a.onLoad=function(){t.prototype.onLoad.call(this),this.backpack=this.node.getChildByName("backpack")},a.onDestroy=function(){this.coinTween&&this.coinTween.stop()},a.start=function(){this.triggerNode.initTrigger(this)},a.jumpAni=function(){console.log("jumpAni 11111111"),this.characterSkeletalAnimation.play("Jump")},a.continue=function(){this.backpack.children.forEach((function(t){t.removeFromParent(),t.destroy()})),this.backpack.removeAllChildren(),this.coinNum=b.coinStartNum;for(var t=0;t<b.coinStartNum;t++){var n=m.poolManager.getNode(b.entifyName.Coin);n.getComponent(l).enabled=!1,n.getComponent(s).enabled=!1,n.parent=this.backpack,n.setPosition(u(0,.45*t,0))}},a.update=function(n){t.prototype.update.call(this,n),this.collectCoin()},a.collectCoin=function(){if(b.isStartGame&&m.dropController&&m.dropController.getAroundDrop){var t=m.dropController.getAroundDrop(this.node.worldPosition);t&&(t.getComponent(l).enabled=!1,t.getComponent(s).enabled=!1,this.coinFly(t))}},a.getGoldMineCoin=function(t,n){t&&(t.parent=m.sceneNode.effectParent,t.setWorldPosition(n),this.coinFly(t))},a.coinFly=function(t){var n=this;if(t){P.Instance.playAudio("jinbi_shiqu");var e=t.getWorldPosition().clone(),o={t:0};t.setParent(m.sceneNode.effectParent),t.setWorldPosition(e);var i=t.worldRotation.clone(),a=this.backpack.worldRotation;this.coinTween=d(o).to(.2,{t:1},{easing:"quadOut",onUpdate:function(){if(t&&t.isValid){var r=o.t,c=1-r,l=.45*n.backpack.children.length,s=new p(0,l,0),u=n.backpack.getWorldPosition(),d=n.backpack.getWorldRotation(),h=n.backpack.getWorldScale(),y=new f;f.fromSRT(y,d,u,h);var m=p.transformMat4(new p,s,y),b=new p((e.x+m.x)/2,Math.max(e.y,m.y)+2,(e.z+m.z)/2),k=new p(c*c*e.x+2*c*r*b.x+r*r*m.x,c*c*e.y+2*c*r*b.y+r*r*m.y,c*c*e.z+2*c*r*b.z+r*r*m.z);t.setWorldPosition(k);var v=new g(i.x*c+a.x*r,i.y*c+a.y*r,i.z*c+a.z*r,i.w*c+a.w*r);t.setWorldRotation(v)}}}).call((function(){if(t&&t.isValid){var e=t.getWorldPosition().clone();t.setParent(n.backpack),t.setWorldPosition(e),t.setWorldRotation(a),d(t).to(.15,{scale:new p(8.6,8.6,8.6)},{easing:"quadOut"}).to(.05,{scale:new p(8,8,8)},{easing:"quadOut"}).start(),n.coinNum++,k.instance.emit(v.CoinAdd,1),n.calibrateCoinsPosition()}})).start()}},a.calibrateCoinsPosition=function(){},n}(h)).prototype,"attackAni",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=A))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAttackFlower.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./App.ts","./EnemySpider.ts","./SoundManager.ts"],(function(t){var e,i,a,n,s,r,o,c,h,l,d,g,u,p,I,m,y,f,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,o=t._decorator,c=t.SkeletalAnimation,h=t.Collider,l=t.Node,d=t.Vec3,g=t.UIOpacity,u=t.Animation,p=t.ProgressBar,I=t.Slider},function(t){m=t.default},function(t){y=t.App},function(t){f=t.EnemySpider},function(t){v=t.SoundManager}],execute:function(){var N,A,k,x,S,w,E,b,C,U,P,T,B,F,L,z,M;r._RF.push({},"32242blRGVLS7nOvMlHj6RF","PlayerAttackFlower",void 0);var R=o.ccclass,_=o.property;t("PlayerAttackFlower",(N=R("PlayerAttackFlower"),A=_({type:c}),k=_({type:h}),x=_({type:l}),S=_({type:l,tooltip:"消化状态进度条"}),w=_({type:l,tooltip:"蜘蛛"}),E=_({tooltip:"攻击间隔"}),b=_({tooltip:"攻击间隔"}),N((P=e((U=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).attackRange=60,a(e,"characterAnima",P,n(e)),a(e,"collider",T,n(e)),a(e,"followNode",B,n(e)),a(e,"digestUINode",F,n(e)),a(e,"spaider",L,n(e)),e.iseatSpiderMove=!1,e.spiderInitPos=new d,e.spiderInitScale=new d,e.isEat=!1,e.state=0,e.attackTargetList=[],e.frameIndex=0,e.isIncreasing=!1,e.addFrame=10,e.tuanyanAudio=!1,e.hp=2,e.maxHp=2,e.attack=1,a(e,"attackInterval",z,n(e)),a(e,"testInterval",M,n(e)),e}i(e,t);var r=e.prototype;return r.showDigestUI=function(){this.digestUINode.active=!0,this.digestUINode.getChildByName("shanguang01").active=!1,this.digestUINode.getChildByName("xiaohua_shanguang").active=!1},r.continueGame=function(){this.digestUINode.active=!1},r.digestProgress=function(){var t=this,e=1-this.testInterval/this.attackInterval;if(this.iseatSpiderMove){var i=this.spaider.position.z,a=this.spaider.position.x;this.spaider.setPosition(a-=.003,this.spaider.position.y,i+=.0015)}if(e<=0){var n=this.spaider.scale,s=n.x-.002,r=n.y-.002,o=n.z-.002;if(this.spaider.setScale(s,r,o),e=-.1,this.digestUINode.getChildByName("shanguang01").active=!0,this.digestUINode.getChildByName("xiaohua_shanguang").active=!0,this.isIncreasing?(this.frameIndex+=this.addFrame,this.frameIndex>=255&&(this.frameIndex=255,this.isIncreasing=!1)):(this.frameIndex-=this.addFrame,this.frameIndex<=0&&(this.frameIndex=0,this.isIncreasing=!0)),this.scheduleOnce((function(){t.tuanyanAudio||(t.tuanyanAudio=!0,v.Instance.playAudio("tunyan"))}),.3),this.digestUINode.getChildByName("shanguang01").getComponent(g).opacity=this.frameIndex,this.digestUINode.getChildByName("xiaohua_shanguang").getComponent(g).opacity=this.frameIndex,this.characterAnima.getState("Attack-end").isPlaying)return;this.characterAnima.play("Attack-end"),this.state=3,this.characterAnima.once(u.EventType.FINISHED,(function(){t.isEat=!1,t.testInterval=6,t.state=0,t.spaider.active=!1,t.spaider.setPosition(t.spiderInitPos),t.spaider.setScale(t.spiderInitScale),t.iseatSpiderMove=!1,t.tuanyanAudio=!1}))}else this.digestUINode.getChildByName("Green").getComponent(p).progress=e,this.digestUINode.getChildByName("Slider").getComponent(I).progress=e},r.onLoad=function(){this.digestUINode.active=!1},r.start=function(){this.characterAnima.getState("Idle").isPlaying||this.characterAnima.play("Idle"),this.collider?this.collider&&(this.spiderInitPos=this.spaider.position.clone(),this.spiderInitScale=this.spaider.scale.clone(),this.collider.on("onTriggerEnter",this.onTriggerEnter,this),this.collider.on("onTriggerStay",this.onTriggerStay,this),this.collider.on("onTriggerExit",this.onTriggerExit,this)):console.warn("没有找到碰撞矩阵")},r.onTriggerEnter=function(t){if(2!=this.state&&3!=this.state){var e=t.otherCollider.node;e.getComponent(f).attackFlowerDie(this.followNode),console.log("onTriggerExit nodeName == ",e.name)}},r.onTriggerExit=function(t){console.log("onTriggerExit")},r.onTriggerStay=function(t){},r.attackList=function(){for(var t,e=this.node.worldPosition,i=[],a=s(this.attackTargetList);!(t=a()).done;){var n=t.value;if(n&&n.node){var r=new d;d.subtract(r,n.node.worldPosition,e);var o=180*Math.atan2(r.x,r.z)/Math.PI;Math.abs(o)<=60&&i.push(n)}}return i},r.move=function(){},r.attack1=function(){var t=this;v.Instance.playAudio("eat"),this.digestUINode.getChildByName("shanguang01").active=!1,this.digestUINode.getChildByName("xiaohua_shanguang").active=!1,this.characterAnima.play("Attack-start2"),this.state=1,this.scheduleOnce((function(){t.spaider&&(t.spaider.active=!0,t.iseatSpiderMove||(t.iseatSpiderMove=!0))}),.5),this.characterAnima.once(u.EventType.FINISHED,(function(){t.isEat=!0,t.digestUINode.active||t.showDigestUI(),t.characterAnima.play("Attack-loop"),t.state=2,t.testInterval=0}))},r.die=function(t){},r.update=function(t){this.isEat?(this.testInterval+=t,this.digestProgress()):(this.testInterval+=t,this.testInterval>this.attackInterval&&(this.testInterval=0,this.checkEnemy(),this.attackList().length>0?this.attack1():(this.testInterval=6,this.characterAnima.getState("Idle").isPlaying||this.characterAnima.play("Idle"),this.digestUINode.getChildByName("shanguang01").active=!0,this.digestUINode.getChildByName("xiaohua_shanguang").active=!0,this.isIncreasing?(this.frameIndex+=this.addFrame,this.frameIndex>=255&&(this.frameIndex=255,this.isIncreasing=!1)):(this.frameIndex-=this.addFrame,this.frameIndex<=0&&(this.frameIndex=0,this.isIncreasing=!0)),this.digestUINode.getChildByName("shanguang01").getComponent(g).opacity=this.frameIndex,this.digestUINode.getChildByName("xiaohua_shanguang").getComponent(g).opacity=this.frameIndex)))},r.checkEnemy=function(){this.attackTargetList=[];for(var t=y.enemyController.getEnemyRvoList(),e=y.enemyController.getEnemyList(),i=0;i<t.length;i++){var a=t[i];this.isValidEnemy(a)&&(this.isInAttackRange(a.node)&&this.attackTargetList.push(a))}for(var n=0;n<e.length;n++){var s=e[n];this.isValidEnemy(s)&&(this.isInAttackRange(s.node)&&this.attackTargetList.push(s))}},r.isValidEnemy=function(t){return t&&t.node&&t.node.isValid&&t.hp>0&&t.recordHp>0&&t.isAttack},r.isInAttackRange=function(t){return!!t&&d.distance(t.worldPosition,this.node.worldPosition)<this.attackRange},e}(m)).prototype,"characterAnima",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(U.prototype,"collider",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(U.prototype,"followNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(U.prototype,"digestUINode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(U.prototype,"spaider",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(U.prototype,"attackInterval",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),M=e(U.prototype,"testInterval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),C=U))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerBeetle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./App.ts","./EnemySpider.ts"],(function(e){var t,n,r,i,o,a,h,s,l,d,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,h=e.Node,s=e.Collider,l=e.Vec3},function(e){d=e.default},function(e){c=e.App},function(e){p=e.EnemySpider}],execute:function(){var u,g,m,v,f;o._RF.push({},"63c1ehT4mJAi4xICtpQ+rwy","PlayerBeetle",void 0);var T=a.ccclass,y=a.property;e("PlayerBeetle",(u=T("PlayerBeetle"),g=y(h),u((f=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).hp=2,t.maxHp=2,t.attack=20,r(t,"mainPath",f,i(t)),t.movePhase=1,t.currentTargetIndex=0,t.speed=15,t}n(t,e);var o=t.prototype;return o.start=function(){var e,t=c.dataManager.getCharacterById(4);t&&(this.speed=t.moveSpeed,this.attack=t.attackDamage,this.maxHp=t.maxHp,this.hp=t.hp),this.mainPath||(this.mainPath=c.sceneNode.beetleMovePath),null==(e=this.characterSkeletalAnimation)||e.play("cut_walk_f");var n=this.node.getComponent(s);n.on("onTriggerEnter",this.onTriggerEnter,this),n.on("onTriggerStay",this.onTriggerStay,this),n.on("onTriggerExit",this.onTriggerExit,this)},o.onTriggerEnter=function(e){if("Spider"==e.otherCollider.node.name||"Spider_L"==e.otherCollider.node.name){console.log("甲虫的碰撞是否生效 == "+e.otherCollider.node.name);var t=e.otherCollider.node.getComponent(p);if(t.hp>0&&t.baseHit1(this.attack,this.node.worldPosition,6),"Spider"==e.otherCollider.node.name?(this.hp-=2,this.hp<=0&&(this.hp=0)):(this.hp-=1,this.hp<=0&&(this.hp=0)),this.hp<=0)return c.beetleController.removeBeetle(this),c.poolManager.returnNode(this.node),void this.resetMovement()}},o.onTriggerStay=function(e){e.otherCollider.node.name},o.onTriggerExit=function(e){console.log("onTriggerExit")},o.update=function(e){this.handleMovement(e)},o.handleMovement=function(e){var t;this.currentTargetIndex<(null==(t=this.mainPath)?void 0:t.children.length)&&this.moveToTarget(e,this.mainPath)},o.moveToTarget=function(e,t){if(t&&0!==t.children.length){var n=t.children[this.currentTargetIndex],r=n.worldPosition,i=this.node.worldPosition;if(l.distance(i,r)<3)return this.currentTargetIndex++,this.node.eulerAngles=n.eulerAngles.clone(),this.currentTargetIndex>=t.children.length?(this.currentTargetIndex=0,c.beetleController.removeBeetle(this),c.poolManager.returnNode(this.node),void this.resetMovement()):void 0;var o=l.subtract(new l,r,i).normalize(),a=this.speed*e,h=l.add(new l,i,l.multiplyScalar(new l,o,a));this.node.worldPosition=h,this.rotateToTarget(n.eulerAngles,e)}},o.rotateToTarget=function(e,t){var n=this.node.eulerAngles,r=new l(this.smoothDamp(n.x,e.x,t),this.smoothDamp(n.y,e.y,t),this.smoothDamp(n.z,e.z,t));this.node.eulerAngles=r},o.smoothDamp=function(e,t,n,r){void 0===r&&(r=.5);var i=t-e;return i>180&&(i-=360),i<-180&&(i+=360),e+i*(1-Math.exp(-n/r))},o.resetMovement=function(){this.movePhase=1,this.currentTargetIndex=0;var e=c.dataManager.getCharacterById(4);e&&(this.speed=e.moveSpeed,this.attack=e.attackDamage,this.maxHp=e.maxHp,this.hp=e.hp)},t}(d)).prototype,"mainPath",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./App.ts"],(function(e){var t,n,l,r;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,l=e._decorator},function(e){r=e.App}],execute:function(){var i,o;n._RF.push({},"ec9de8qf+9PiLQS/E7je55l","PlayerController",void 0);var a=l.ccclass;l.property,e("PlayerController",a("PlayerController")(((o=function(){function e(){this.player=null}var n=e.prototype;return n.continueGame=function(){this.player.continue()},n.getPlayer=function(){return this.player},n.initPlayer=function(){this.player=r.sceneNode.player,this.player.idle()},n.playMove=function(){this.player.move()},n.playIdle=function(){this.player.idle()},n.playMoveAttack=function(){this.player.moveAttack()},n.update=function(e){},t(e,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=null,i=o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerPylon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./App.ts","./GlobeVariable.ts","./SoundManager.ts"],(function(t){var e,i,n,a,r,o,s,l,c,h,u,d,g,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.SkeletalAnimation,l=t.Node,c=t.Vec3,h=t.tween,u=t.Quat},function(t){d=t.default},function(t){g=t.App},function(t){f=t.GlobeVariable},function(t){p=t.SoundManager}],execute:function(){var y,v,m,k,P,w,b;r._RF.push({},"e20c0OyQYJKcb03sBZsbLzx","PlayerPylon",void 0);var A=o.ccclass,T=o.property;t("PlayerPylon",(y=A("PlayerPylon"),v=T({type:s}),m=T({type:l}),y((w=e((P=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).attackRange=30,n(e,"characterAnima",w,a(e)),n(e,"fireNode",b,a(e)),e.enemyList=[],e.attackTargetList=[],e.attackType=2,e.bulletSpeed=150,e.hp=2,e.maxHp=2,e.attack=1,e.attackInterval=.25,e.testInterval=.3,e._speed=10,e.bulletPos=null,e.enemyHitPos=null,e.currentTarget=null,e.audioPlayNum=0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){},r.start=function(){var t=g.dataManager.getCharacterById(2);t&&(this.attackRange=t.attackRange,this.attack=t.attackDamage,this.maxHp=t.maxHp,this.hp=t.hp,this.attackInterval=t.attackInterval,this.testInterval=t.attackInterval,this.fireNode.active=!0),this.bulletPos=this.node.getChildByName("attackPos")},r.move=function(){},r.restFireEvent=function(){this.fireNode.active=!0,console.log("restFireEvent")},r.AttackAni=function(){var t=this;if(this.fireNode.active=!1,this.checkEnemy(),this.currentTarget){if(!this.isValidEnemy(this.currentTarget))return void(this.currentTarget=null);var e=this.currentTarget;if(!e.hitPosNode||!e.node.isValid)return;this.enemyHitPos=e.hitPosNode.worldPosition.clone(),this.rotateTowards(this.enemyHitPos,40),p.Instance.playAudio("gonggongji");var i=g.poolManager.getNode(f.entifyName.FireArrow);i.setWorldPosition(this.bulletPos.worldPosition),i.setWorldRotation(this.bulletPos.worldRotation),i.setWorldScale(this.bulletPos.worldScale),i.parent=g.sceneNode.fireArrow,e.recordHp-=this.attack;var n=c.distance(this.bulletPos.worldPosition,this.enemyHitPos),a=Math.max(.05,n/this.bulletSpeed),r=this.enemyHitPos.clone();h(i).to(a,{worldPosition:r},{onUpdate:function(t,n){if(!(e&&e.node&&e.node.isValid&&e.isAttack))return i.removeFromParent(),void g.poolManager.returnNode(i);var a=t.worldPosition,o=new c;if(c.subtract(o,r,a),o.normalize(),o.lengthSqr()>1e-4){var s=new c(-o.x,-o.y,-o.z),l=new u;u.fromViewUp(l,s,c.UP),t.worldRotation=l}}}).call((function(){e&&e.node&&e.node.isValid&&e.hp>0&&e.isAttack&&e.baseHit(t.attack,t.bulletPos.worldPosition,4),i.removeFromParent(),g.poolManager.returnNode(i)})).start()}},r.attack1=function(){this.checkEnemy(),this.checkRange(),this.currentTarget&&this.characterAnima.play("Attack_HuoChaiHe")},r.die=function(t){},r.update=function(t){this.testInterval+=t,this.testInterval>this.attackInterval&&(this.testInterval-=this.attackInterval,this.attack1())},r.checkEnemy=function(){this.attackTargetList=[];for(var t=g.enemyController.getEnemyRvoList(),e=g.enemyController.getEnemyList(),i=0;i<t.length;i++){var n=t[i];this.isValidEnemy(n)&&(this.isInAttackRange(n.node)&&this.attackTargetList.push(n))}if(0===this.attackTargetList.length)for(var a=0;a<e.length;a++){var r=e[a];this.isValidEnemy(r)&&(this.isInAttackRange(r.node)&&this.attackTargetList.push(r))}},r.checkRange=function(){if(this.currentTarget&&this.isValidEnemy(this.currentTarget)&&this.isInAttackRange(this.currentTarget.node))return this.currentTarget;for(var t=Number.MAX_VALUE,e=null,i=0;i<this.attackTargetList.length;i++){var n=this.attackTargetList[i],a=c.distance(n.node.worldPosition,this.node.worldPosition);a<t&&(t=a,e=n)}return this.currentTarget=e,e},r.isValidEnemy=function(t){return t&&t.node&&t.node.isValid&&t.hp>0&&t.recordHp>0&&t.isAttack},r.isInAttackRange=function(t){return!!t&&c.distance(t.worldPosition,this.node.worldPosition)<this.attackRange},r.rotateTowards=function(t,e){var i=this.node.worldPosition.clone(),n=new c;if(c.subtract(n,t,i),n.y=0,n.normalize(),!(n.lengthSqr()<1e-4)){var a=new c(-n.x,.1-n.y,-n.z-.1),r=new u;u.fromViewUp(r,a,c.UP);var o=this.node.worldRotation.clone(),s=new u;u.slerp(s,o,r,Math.min(1,40*e)),this.node.worldRotation=s}},e}(d)).prototype,"characterAnima",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(P.prototype,"fireNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=P))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HandOver.ts","./App.ts","./GlobeVariable.ts","./SoundManager.ts"],(function(e){var o,r,n,i,t,l,a,s,h,c,g,d,p;return{setters:[function(e){o=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,i=e.Collider,t=e.Sprite,l=e.Label,a=e.Color,s=e.Animation,h=e.Component},function(e){c=e.HandOver},function(e){g=e.App},function(e){d=e.GlobeVariable},function(e){p=e.SoundManager}],execute:function(){var u;r._RF.push({},"d28b73zRNZM/L/EPKu1884n","PlayerTrigger",void 0);var m=n.ccclass;n.property,e("PlayerTrigger",m("Trigger")(u=function(e){function r(){for(var o,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(o=e.call.apply(e,[this].concat(n))||this).player=null,o.handOver=new c,o.spriteFrame=null,o.colliderNode=null,o.time=0,o.intervalTime=.1,o}o(r,e);var n=r.prototype;return n.initTrigger=function(e){this.player=e;var o=this.player.node.getComponent(i);o?o&&(o.on("onTriggerEnter",this.onTriggerEnter,this),o.on("onTriggerStay",this.onTriggerStay,this),o.on("onTriggerExit",this.onTriggerExit,this)):console.warn("没有找到碰撞矩阵")},n.onTriggerEnter=function(e){e.otherCollider.node.name,"UI_jiachong-001"==e.otherCollider.node.name&&g.playerController.getPlayer().coinNum>0&&g.mapShowController.bubbleAniSpeed(2)},n.callBack=function(){console.log("回调函数")},n.onTriggerStay=function(e){var o=this,r=e.otherCollider.node.name;if(-1!=d.handOverArea.indexOf(r)){var n,i;console.log("交付区域"),this.colliderNode=e.otherCollider.node;var t=d.handVoer[e.otherCollider.node.name],l=t.curCoin,a=t.maxCoin;if("UI_jiachong-001"==r&&g.playerController.getPlayer().coinNum<=0&&g.mapShowController.bubbleAniSpeed(.7),null!=(n=this.player.backpack)&&n.children.length&&l<a){if(this.time+=.1,this.time<this.intervalTime)return;this.time=0;var s=this.player.backpack.children[this.player.backpack.children.length-1],h=s.worldPosition.clone();this.player.subtractCoin(1),d.handVoer[e.otherCollider.node.name].curCoin++,s.setParent(g.sceneNode.effectParent),s.setWorldPosition(h);var c=g.sceneNode.allPos.getChildByName(r+"Pos");this.handOver.handOver(s,c,(function(){"UI_jiachong-001"!=r?o.showProgressLevel(o.colliderNode):o.showProgressBubbleLevel(o.colliderNode),s.removeFromParent(),s.destroy()})),p.Instance.playAudio("jinbi_jiaofu")}else null==(i=this.player.backpack)||i.children.length}else if("coinArea"==e.otherCollider.node.name){var u=g.goldMineController.playerGetCoin();u&&this.player.getGoldMineCoin(u.coin,u.pos)}},n.showProgressBubbleLevel=function(e){var o=d.handVoer[e.name];o.showCoin++;var r=o.maxCoin-o.showCoin;r=Math.max(0,r),g.mapShowController.setBubbleLable(),0===r&&(e.active=!1,g.mapShowController.showUIBuiding(e.name))},n.showProgressLevel=function(e){var o=e.getChildByName("progress").getComponent(t),r=e.getChildByName("UnlockTileLabel").getComponent(l),n=d.handVoer[e.name];n.showCoin++;var i=n.maxCoin-n.showCoin;i=Math.max(0,i),r.string=i.toString(),0===i&&(e.active=!1,g.mapShowController.showUIBuiding(e.name)),o.fillRange=n.showCoin/n.maxCoin},n.onTriggerExit=function(e){var o;(console.log("onTriggerExit"),g.mapShowController.bubbleAniSpeed(.7),this.spriteFrame&&(this.spriteFrame.color=new a(255,255,255)),this.colliderNode)&&(null==(o=this.colliderNode.getComponent(s))||o.stop())},r}(h))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerTurret.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./App.ts","./GlobeVariable.ts","./SoundManager.ts","./MathUtils.ts"],(function(t){var e,n,a,o,i,r,s,l,c,u,h,d,p,g,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,s=t.Animation,l=t.ParticleSystem,c=t.Quat,u=t.Vec3,h=t.tween},function(t){d=t.default},function(t){p=t.App},function(t){g=t.GlobeVariable},function(t){m=t.SoundManager},function(t){f=t.MathUtil}],execute:function(){var y,P,v,k,w;i._RF.push({},"9c5a2mYVLVN1p1LC3oq2Qa4","PlayerTurret",void 0);var T=r.ccclass,b=r.property;t("PlayerTurret",(y=T("PlayerTurret"),P=b({type:s}),y((w=e((k=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).attackRange=30,a(e,"characterAnima",w,o(e)),e.attackTargetList=[],e.bulletSpeed=90,e.explosionRangeSquared=120,e.hp=2,e.maxHp=2,e.attack=1,e.attackInterval=1.75,e.testInterval=1.75,e._speed=10,e.bulletPos=null,e.enemyHitPos=null,e.currentTarget=null,e.audioPlayNum=0,e}n(e,t);var i=e.prototype;return i.onLoad=function(){},i.start=function(){var t=p.dataManager.getCharacterById(3);t&&(this.attackRange=t.attackRange,this.attack=t.attackDamage,this.maxHp=t.maxHp,this.hp=t.hp,this.attackInterval=t.attackInterval,this.testInterval=t.attackInterval),this.bulletPos=this.node.getChildByName("attackPos")},i.move=function(){},i.AttackAni=function(){var t=this;this.checkEnemy();var e=p.poolManager.getNode(g.entifyName.TurretTx);e.parent=this.bulletPos.parent,e.setPosition(this.bulletPos.position),e.active=!0;var n=e.getChildByName("blank").getComponent(l);n.play(),this.scheduleOnce((function(){n.stop(),n.clear(),e.active=!1,e.removeFromParent(),p.poolManager.returnNode(e,g.entifyName.FlowerTx)}),1.5);var a=this.currentTarget;if(a&&a.hitPosNode){if(this.enemyHitPos=a.hitPosNode.worldPosition.clone(),!this.isInAttackRange(a.node)){this.checkEnemy(),this.checkRange();var o=this.currentTarget;if(!o||!o.hitPosNode)return;this.enemyHitPos=o.hitPosNode.worldPosition.clone()}this.rotateTowards(this.enemyHitPos,1),m.Instance.playAudio("paotafashe");var i=p.poolManager.getNode(g.entifyName.TurretBullet);i.setWorldPosition(this.bulletPos.worldPosition);var r=this.bulletPos.worldRotation.clone(),s=c.fromEuler(new c,0,0,0);c.multiply(r,r,s),i.setWorldRotation(r),i.setWorldScale(this.bulletPos.worldScale),i.parent=p.sceneNode.fireArrow,a.recordHp-=this.attack;var d=u.distance(this.bulletPos.worldPosition,this.enemyHitPos),y=Math.max(.1,d/this.bulletSpeed),P=this.bulletPos.worldPosition.clone(),v=this.enemyHitPos.clone(),k=new u((P.x+v.x)/2,Math.max(P.y,v.y)+25,(P.z+v.z)/2),w=i.eulerAngles.clone();h(i).to(y,{},{easing:"cubicInOut",onUpdate:function(t,e){var n=f.bezierCurve(P,k,v,e);t.worldPosition=n;var a=w.x+270*e;t.eulerAngles=new u(a,w.y,w.z)}}).call((function(){if(a&&a.hp>0){if(!t.isInAttackRange(a.node))return t.explodeAtPosition(t.enemyHitPos),i.removeFromParent(),void p.poolManager.returnNode(i,g.entifyName.TurretBullet);a.turretHit(t.attack,t.bulletPos.worldPosition)}t.explodeAtPosition(t.enemyHitPos),i.removeFromParent(),p.poolManager.returnNode(i,g.entifyName.TurretBullet)})).start()}},i.explodeAtPosition=function(t){var e=this;[].concat(p.enemyController.getEnemyRvoList(),p.enemyController.getEnemyList()).filter((function(n){return e.isValidEnemy(n)&&e.getDistanceSquared(n.node.worldPosition,t)<=e.explosionRangeSquared})).forEach((function(t){t.recordHp-=e.attack,t.turretHit(e.attack,e.bulletPos.worldPosition)})),this.createExplosionEffect(t)},i.createExplosionEffect=function(t){var e=p.poolManager.getNode(g.entifyName.TurretBombTx);e.parent=p.sceneNode.bombEffectParent,e.setPosition(t),e.active=!0;var n=e.getChildByName("jizhong").getComponent(l);n.play(),this.scheduleOnce((function(){n.stop(),n.clear(),e.active=!1,e.removeFromParent(),p.poolManager.returnNode(e,g.entifyName.TurretBombTx)}),1.5)},i.getDistanceSquared=function(t,e){var n=t.x-e.x,a=t.y-e.y,o=t.z-e.z;return n*n+a*a+o*o},i.attack1=function(){this.checkEnemy(),this.checkRange(),this.currentTarget&&this.characterAnima.play("attack_paota")},i.die=function(t){},i.update=function(t){this.testInterval+=t,this.testInterval>this.attackInterval&&(this.testInterval-=this.attackInterval,this.attack1())},i.checkEnemy=function(){this.attackTargetList=[];for(var t=p.enemyController.getEnemyRvoList(),e=p.enemyController.getEnemyList(),n=0;n<t.length;n++){var a=t[n];this.isValidEnemy(a)&&(this.isInAttackRange(a.node)&&this.attackTargetList.push(a))}if(0===this.attackTargetList.length)for(var o=0;o<e.length;o++){var i=e[o];this.isValidEnemy(i)&&(this.isInAttackRange(i.node)&&this.attackTargetList.push(i))}},i.checkRange=function(){if(this.currentTarget&&this.isValidEnemy(this.currentTarget)&&this.isInAttackRange(this.currentTarget.node))return this.currentTarget;for(var t=Number.MAX_VALUE,e=null,n=0;n<this.attackTargetList.length;n++){var a=this.attackTargetList[n],o=u.distance(a.node.worldPosition,this.node.worldPosition);o<t&&(t=o,e=a)}return this.currentTarget=e,e},i.isValidEnemy=function(t){return t&&t.hp>0&&t.recordHp>0},i.isInAttackRange=function(t){return!(!t||!t.worldPosition)&&u.distance(t.worldPosition,this.node.worldPosition)<this.attackRange},i.rotateTowards=function(t,e){var n=this.node.worldPosition.clone(),a=new u;if(u.subtract(a,t,n),a.y=0,a.normalize(),!(a.lengthSqr()<1e-4)){var o=new c;c.fromViewUp(o,a,u.UP);var i=this.node.worldRotation.clone(),r=new c;c.slerp(r,i,o,Math.min(1,40*e)),this.node.worldRotation=r}},e}(d)).prototype,"characterAnima",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=k))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,o,s,a,i,u,c;return{setters:[function(e){r=e.createClass,n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e.resources,a=e.AudioClip,i=e.SpriteFrame,u=e.Texture2D,c=e.Prefab}],execute:function(){o._RF.push({},"1ba87vjRK5FF6HahnOM6VB+","ResourceManager",void 0),e("ResourceManager",function(){function e(){this._resourceCache=new Map,this._loadingTasks=new Map}var o=e.prototype;return o.load=function(e,r,n){var t=this,o=this._resourceCache.get(e);if(o)return Promise.resolve(o);var a=this._loadingTasks.get(e);if(a)return a;var i=new Promise((function(o,a){s.load(e,r,n,(function(r,n){if(t._loadingTasks.delete(e),r)return console.error("资源加载失败: "+e,r),void a(r);t._resourceCache.set(e,n),o(n)}))}));return this._loadingTasks.set(e,i),i},o.loadAudioDir=function(e,r){var n=this;return new Promise((function(t,o){s.loadDir(e,a,r,(function(r,s){if(n._loadingTasks.delete(e),r)return console.error("资源加载失败: "+e,r),void o(r);t(s)}))}))},o.loadSpriteFrame=function(e,r){return this.load(e,i,r)},o.loadPrefab=function(){var e=n(t().mark((function e(r,n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r,c,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(r,n){return e.apply(this,arguments)}}(),o.loadAudio=function(e,r){return this.load(e,a,r)},o.loadTexture=function(e,r){return this.load(e,u,r)},o.loadMultiple=function(e,r,n){var t=this,o=e.map((function(e){return t.load(e,r,n)}));return Promise.all(o)},o.release=function(e){this._resourceCache.get(e)&&(s.release(e),this._resourceCache.delete(e),console.log("资源已释放: "+e))},o.releaseMultiple=function(e){var r=this;e.forEach((function(e){return r.release(e)}))},o.releaseAll=function(){this._resourceCache.forEach((function(e,r){s.release(r)})),this._resourceCache.clear(),console.log("所有资源已释放")},o.isLoaded=function(e){return this._resourceCache.has(e)},o.getLoadedAsset=function(e){return this._resourceCache.get(e)},r(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/RVOObstacles.ts",["cc","./Common.ts","./Simulator.ts"],(function(n){var e,t,o,a,r,i,c;return{setters:[function(n){e=n.cclegacy,t=n.Collider,o=n.BoxCollider,a=n.Vec3,r=n.CylinderCollider},function(n){i=n.Vector2},function(n){c=n.Simulator}],execute:function(){e._RF.push({},"3b3d2JI73JJboAuAX4nEXJe","RVOObstacles",void 0);n("default",function(){function n(){}return n.addOneObstacle=function(n){var e=n.getComponent(t);if(e){var s=n.worldPosition,u=n.worldRotation,l=n.worldScale,f=[];if(e instanceof o){var d=e.size.clone();d.x*=l.x,d.z*=l.z;var x=new a(d.x/2,0,d.z/2);[new a(-x.x,0,-x.z),new a(x.x,0,-x.z),new a(x.x,0,x.z),new a(-x.x,0,x.z),new a(-x.x,0,-x.z)].forEach((function(n){var e=a.transformQuat(new a,n,u);f.push(new i(s.x+e.x,s.z+e.z))}))}else if(e instanceof r)for(var z=e.radius*Math.max(l.x,l.z),w=0;w<=6;w++){var v=w/6*Math.PI*2,h=Math.cos(v)*z,m=Math.sin(v)*z;f.push(new i(s.x+h,s.z+m))}c.instance.addObstacle(f)}},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/RVOUtils.ts",["cc"],(function(t){var n,e,u;return{setters:[function(t){n=t.cclegacy,e=t.v2,u=t.v3}],execute:function(){n._RF.push({},"35406m8QkhHJaFFI6GI9yeC","RVOUtils",void 0);t("default",function(){function t(){}return t.simpleV2=function(t,n){return n?(n.set(t,t),n):e(t,t)},t.simpleV3=function(t,n){return n?(n.set(t,t,t),n):u(t,t,t)},t.v2t3=function(t,n){return n?(n.x=t.x,n.y=0,n.z=t.y,n):u(t.x,t.y,1)},t.v3t2=function(t,n){return n?(n.x=t.x,n.y=t.z,n):e(t.x,t.z)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SateMachine.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a17cbLAdLZCV5QtIxYdeo5v","SateMachine",void 0);t("default",function(){function t(){this.currentState=null,this.states={}}var e=t.prototype;return e.addState=function(t,e){this.states[t]=e},e.setState=function(t,e){this.currentState&&this.currentState.onExit(e),this.currentState=this.states[t],this.currentState&&this.currentState.onEnter(e)},e.getState=function(){return this.currentState},e.getStateName=function(){for(var t in this.states)if(this.states[t]===this.currentState)return t;return null},e.update=function(t){this.currentState&&this.currentState.onUpdate(t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SceneNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts"],(function(e){var t,i,n,r,o,l,a,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.Component},function(e){p=e.Player}],execute:function(){var c,b,y,f,m,P,s,g,w,z,h,v,d,B,M,k,A,E,N,S,F,L,R,_,j,D,J,G,I,Q,x,C,H,O,T,X,Z,q,K,U,V,W,Y,$,ee,te,ie,ne,re,oe,le,ae,ue,pe,ce,be,ye;o._RF.push({},"f27e56AJApO/Z/X092IgnwP","SceneNode",void 0);var fe=l.ccclass,me=l.property;e("SceneNode",(c=fe("SceneNode"),b=me({type:p,tooltip:"主角玩家"}),y=me({type:a,tooltip:"敌人的父节点"}),f=me({type:a,tooltip:"血条的父节点"}),m=me({type:a,tooltip:"金币父节点"}),P=me({type:a,tooltip:"临时效果父节点"}),s=me({type:a,tooltip:"临时爆炸父节点"}),g=me({type:a,tooltip:"敌人出现的位置"}),w=me({type:a,tooltip:"敌人出现的位置"}),z=me({type:a,tooltip:"敌人移动的路径第一段"}),h=me({type:a,tooltip:"敌人移动的路径第二段"}),v=me({type:a,tooltip:"攻击拒马敌人移动的路径第二段"}),d=me({type:a,tooltip:"障碍物父节点"}),B=me({type:a,tooltip:"追击的拦截点位置"}),M=me({type:a,tooltip:"结束的拦截点位置"}),k=me({type:a,tooltip:"拒马的节点"}),A=me({type:a,tooltip:"所有的位置父节点"}),E=me({type:a,tooltip:"火柴箭头的父节点"}),N=me({type:a,tooltip:" Beetle移动的路径"}),S=me({type:a,tooltip:" Beetle出现的位置"}),F=me({type:a,tooltip:" Beetle的父节点"}),L=me({type:a,tooltip:" 花朵"}),R=me({type:a,tooltip:" 游戏结束界面"}),_=me({type:a,tooltip:" 引导箭头的父节点"}),j=me({type:a,tooltip:" 引导箭头的父节点"}),D=me({type:a,tooltip:" 拒马"}),J=me({type:a,tooltip:" 攻击花朵"}),G=me({type:a,tooltip:"禁止金币掉落区域"}),c((x=t((Q=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"player",x,r(t)),n(t,"enemyParent",C,r(t)),n(t,"bloodParent",H,r(t)),n(t,"coinParent",O,r(t)),n(t,"effectParent",T,r(t)),n(t,"bombEffectParent",X,r(t)),n(t,"enemyBirthPos",Z,r(t)),n(t,"enemyBirthPos1",q,r(t)),n(t,"enemyMovePath",K,r(t)),n(t,"enemyMovePath2",U,r(t)),n(t,"enemyMoveRvoPath",V,r(t)),n(t,"obstacleParrent",W,r(t)),n(t,"moveBlockPos",Y,r(t)),n(t,"moveEndBlockPos",$,r(t)),n(t,"juma01",ee,r(t)),n(t,"allPos",te,r(t)),n(t,"fireArrow",ie,r(t)),n(t,"beetleMovePath",ne,r(t)),n(t,"beetleBirthPos",re,r(t)),n(t,"beetleParent",oe,r(t)),n(t,"flower",le,r(t)),n(t,"GameEnd",ae,r(t)),n(t,"guideParent",ue,r(t)),n(t,"guideList",pe,r(t)),n(t,"QianBiJuMa",ce,r(t)),n(t,"attackFlower",be,r(t)),n(t,"coinAreaBan",ye,r(t)),t}return i(t,e),t.prototype.start=function(){this.enemyParent.active=!1},t}(u)).prototype,"player",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(Q.prototype,"enemyParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(Q.prototype,"bloodParent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(Q.prototype,"coinParent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(Q.prototype,"effectParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(Q.prototype,"bombEffectParent",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Q.prototype,"enemyBirthPos",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(Q.prototype,"enemyBirthPos1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(Q.prototype,"enemyMovePath",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(Q.prototype,"enemyMovePath2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(Q.prototype,"enemyMoveRvoPath",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(Q.prototype,"obstacleParrent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(Q.prototype,"moveBlockPos",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Q.prototype,"moveEndBlockPos",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(Q.prototype,"juma01",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(Q.prototype,"allPos",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(Q.prototype,"fireArrow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(Q.prototype,"beetleMovePath",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(Q.prototype,"beetleBirthPos",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(Q.prototype,"beetleParent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(Q.prototype,"flower",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(Q.prototype,"GameEnd",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(Q.prototype,"guideParent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(Q.prototype,"guideList",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce=t(Q.prototype,"QianBiJuMa",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=t(Q.prototype,"attackFlower",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(Q.prototype,"coinAreaBan",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=Q))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/Simulator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Agent.ts","./Common.ts","./kdtree.ts"],(function(t){var e,n,i,s,a,g;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.Agent},function(t){s=t.RVOMath,a=t.Obstacle},function(t){g=t.KdTree}],execute:function(){n._RF.push({},"75cc9/dH6FEGZPLYf/qJkdP","Simulator",void 0),t("Simulator",function(){function t(){this.agentId=0,this.agentIdLst=[],this.aid2agent=Object.create(null),this.obstacles=[],this.kdTree=new g,this.defaultAgent=void 0,this.time=0}var n=t.prototype;return n.getAgent=function(t){return this.aid2agent[this.agentIdLst[t]]},n.getAgentByAid=function(t){return this.aid2agent[t]},n.getGlobalTime=function(){return this.time},n.getNumAgents=function(){return this.agentIdLst.length},n.getAgentAidByIdx=function(t){return this.agentIdLst[t]},n.setAgentPrefVelocity=function(t,e){this.aid2agent[t].prefVelocity_.copy(e)},n.getAgentPosition=function(t){return this.aid2agent[t]?this.aid2agent[t].position_:null},n.getAgentPrefVelocity=function(t){return this.aid2agent[t].prefVelocity_},n.getAgentVelocity=function(t){return this.aid2agent[t].velocity_},n.getAgentRadius=function(t){return this.aid2agent[t].radius_},n.getAgentOrcaLines=function(t){return this.aid2agent[t].orcaLines_},n.addAgent=function(t,e,n,s,a){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=null),!this.defaultAgent)throw new Error("no default agent");var g=new i;return g.position_.copy(t),g.maxNeighbors_=this.defaultAgent.maxNeighbors_,g.maxSpeed_=n||this.defaultAgent.maxSpeed_,g.neighborDist=this.defaultAgent.neighborDist,g.radius_=e||this.defaultAgent.radius_,g.timeHorizon=this.defaultAgent.timeHorizon,g.timeHorizonObst=this.defaultAgent.timeHorizonObst,g.velocity_.copy(s||this.defaultAgent.velocity_),g.id=this.agentId++,a&&a>=0&&(g.mass=a),this.aid2agent[g.id]=g,this.agentIdLst.push(g.id),g.id},n.removeAgent=function(t){if(this.hasAgent(t)){var e=this.agentIdLst.indexOf(t);e>=0&&(this.agentIdLst[e]=this.agentIdLst[this.agentIdLst.length-1],this.agentIdLst.length--),delete this.aid2agent[t]}},n.hasAgent=function(t){return!!this.aid2agent[t]},n.setAgentMass=function(t,e){this.aid2agent[t].mass=e},n.getAgentMass=function(t){return this.aid2agent[t].mass},n.setAgentRadius=function(t,e){this.aid2agent[t].radius_=e},n.setAgentDefaults=function(t,e,n,s,a,g,o){this.defaultAgent||(this.defaultAgent=new i),this.defaultAgent.maxNeighbors_=e,this.defaultAgent.maxSpeed_=g,this.defaultAgent.neighborDist=t,this.defaultAgent.radius_=a,this.defaultAgent.timeHorizon=n,this.defaultAgent.timeHorizonObst=s,this.defaultAgent.velocity_=o},n.run=function(t){this.kdTree.buildAgentTree(this.getNumAgents());for(var e=this.agentIdLst.length,n=0;n<e;n++)this.aid2agent[this.agentIdLst[n]].computeNeighbors(this),this.aid2agent[this.agentIdLst[n]].computeNewVelocity(t);for(var i=0;i<e;i++)this.aid2agent[this.agentIdLst[i]].update(t);this.time+=t},n.addObstacle=function(t){if(t.length<2)return-1;for(var e=this.obstacles.length,n=0;n<t.length;++n){var i=new a;i.point=t[n],0!=n&&(i.previous=this.obstacles[this.obstacles.length-1],i.previous.next=i),n==t.length-1&&(i.next=this.obstacles[e],i.next.previous=i),i.direction=s.normalize(t[n==t.length-1?0:n+1].minus(t[n])),2==t.length?i.convex=!0:i.convex=s.leftOf(t[0==n?t.length-1:n-1],t[n],t[n==t.length-1?0:n+1])>=0,i.id=this.obstacles.length,this.obstacles.push(i)}return e},n.processObstacles=function(){this.kdTree.buildObstacleTree()},n.queryVisibility=function(t,e,n){return this.kdTree.queryVisibility(t,e,n)},n.getObstacles=function(){return this.obstacles},n.clear=function(){this.agentIdLst.length=0,this.agentId=0,this.aid2agent=Object.create(null),this.defaultAgent=null,this.kdTree=new g,this.obstacles.length=0},e(t,null,[{key:"instance",get:function(){return t._inst||(t._inst=new t),t._inst}}]),t}())._inst=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"6ba6bqmGzdH25zIo9rvxec0","Singleton",void 0),n("Singleton",function(){function n(){var t=this.constructor.name;if(n.instances[t])return n.instances[t];n.instances[t]=this}return n.getInstance=function(){return n.instances[this.name]||(n.instances[this.name]=new this),n.instances[this.name]},n}()).instances={},t._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceManager.ts"],(function(o){var i,e,n,t,u,s,d;return{setters:[function(o){i=o.createForOfIteratorHelperLoose,e=o.createClass},function(o){n=o.cclegacy,t=o.Node,u=o.director,s=o.AudioSource},function(o){d=o.ResourceManager}],execute:function(){n._RF.push({},"73edbJNmAlHS4Vl+358HhHo","SoundManager",void 0),o("SoundManager",function(){function o(){this._backgroundNode=null,this._audioNode=null,this._bgmAudioSource=null,this._runSource=null,this._miningSource=null,this.audioClips=new Map,this.effectsPool=[],this.POOL_SIZE=8,this._backgroundNode=new t,this._audioNode=new t,u.getScene().addChild(this._backgroundNode),u.getScene().addChild(this._audioNode),u.addPersistRootNode(this._backgroundNode),u.addPersistRootNode(this._audioNode),this._bgmAudioSource=this._backgroundNode.getComponent(s),this._bgmAudioSource||(this._bgmAudioSource=this._backgroundNode.addComponent(s)),this.initRunSource(),this.initMiningSoundSource()}var n=o.prototype;return n.initRunSource=function(){var o=new t;u.getScene().addChild(o),u.addPersistRootNode(o),this._runSource=o.addComponent(s)},n.initMiningSoundSource=function(){var o=new t;u.getScene().addChild(o),u.addPersistRootNode(o),this._miningSource=o.addComponent(s)},n.playRunBGM=function(){var o=this.audioClips.get("run");o?(this._runSource.stop(),this._runSource.clip=o,this._runSource.loop=!0,this._runSource.play()):console.error("run not found!")},n.stopRunBGM=function(){this._runSource.stop()},n.playMiningBGM=function(){var o=this.audioClips.get("YX_kuangshi");o?this._miningSource.playing||(this._miningSource.clip=o,this._miningSource.loop=!1,this._miningSource.play()):console.error("mining not found!")},n.stopMiningBGM=function(){this._miningSource.stop()},n.clearEffectsPool=function(){if(this.stopAllEffects(),this.effectsPool.forEach((function(o){o.isValid&&o.destroy()})),this.effectsPool=[],this._audioNode){var o=this._audioNode.getChildByName("EffectsPool");o&&o.isValid&&o.destroy()}},n.getIdleEffectSource=function(){for(;this.effectsPool.length>=this.POOL_SIZE;){var o=this.effectsPool.shift();o.stop(),o.destroy()}var i=this._audioNode.addComponent(s);return i.volume=1,this.effectsPool.push(i),i},n.playBGM=function(o){var i=this.audioClips.get(o);i?(this._bgmAudioSource.stop(),this._bgmAudioSource.clip=i,this._bgmAudioSource.loop=!0,this._bgmAudioSource.play()):console.error("BGM "+o+" not found!")},n.stopBGM=function(){this._bgmAudioSource.stop()},n.pauseBGM=function(){this._bgmAudioSource.pause()},n.resumeBGM=function(){this._bgmAudioSource.play()},n.playAudio=function(o,i){void 0===i&&(i=1);var e=this.audioClips.get(o);if(e){var n=this.getIdleEffectSource();n&&(n.volume=i,n.playOneShot(e))}else console.error("Audio "+o+" not found!")},n.stopAllEffects=function(){for(var o,e=i(this.effectsPool);!(o=e()).done;){o.value.stop()}},n.preloadAudioClips=function(){var o=this;d.instance.loadAudio("bgm/BGM").then((function(i){console.log("audio load "+i.name),o.audioClips.set(i.name,i),o.playBGM("BGM"),o.loadLeftAudios()}))},n.loadLeftAudios=function(){var o=this;d.instance.loadAudioDir("sounds").then((function(i){i.forEach((function(i){console.log("audio load "+i.name),o.audioClips.set(i.name,i)}))}))},e(o,null,[{key:"Instance",get:function(){return o._instance||(o._instance=new o),o._instance}}]),o}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9df27FLP7BJQ4voSxx+U5zk","State",void 0);t("default",(function(t){this.entity=void 0,this.entity=t}));e._RF.pop()}}}));

System.register("chunks:///_virtual/super_html_playable.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"22112mHU15FTadQdIjTzhru","super_html_playable",void 0);var n=e("super_html_playable",function(){function e(){}var o=e.prototype;return o.download=function(){console.log("download"),window.super_html&&super_html.download()},o.game_end=function(){console.log("game end"),window.super_html&&super_html.game_end()},o.is_hide_download=function(){return!(!window.super_html||!super_html.is_hide_download)&&super_html.is_hide_download()},o.set_google_play_url=function(e){window.super_html&&(super_html.google_play_url=e)},o.set_app_store_url=function(e){window.super_html&&(super_html.appstore_url=e)},o.is_audio=function(){return window.super_html&&super_html.is_audio()||!0},e}());e("default",new n);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIJoyStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VirtuallInput.ts","./GlobeVariable.ts","./App.ts"],(function(t){var i,o,n,e,a,s,r,h,l,u,c,p,d,y,f,m,T,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Sprite,h=t.Node,l=t.CCFloat,u=t.v3,c=t.Vec3,p=t.UIOpacity,d=t.Input,y=t.math,f=t.Component},function(t){m=t.VirtualInput},function(t){T=t.GlobeVariable},function(t){b=t.App}],execute:function(){var v,g,C,P,E,S,z,O,k,U,I,V,H,M,w,_;a._RF.push({},"789f3NYuP1KJ5rN9IlOyMVz","UIJoyStick",void 0);var B=s.ccclass,D=s.property;t("UIJoyStick",(v=B("UIJoyStick"),g=D(r),C=D(r),P=D(h),E=D(l),v((O=i((z=function(t){function i(){for(var i,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,n(i,"thumbnail",O,e(i)),n(i,"joyStickBg",k,e(i)),n(i,"hand",U,e(i)),n(i,"radius",I,e(i)),i.initJoyStickBgPosition=u(),i.uiOpacity=null,n(i,"amplitudeX",V,e(i)),n(i,"amplitudeY",H,e(i)),n(i,"speed",M,e(i)),n(i,"pauseDuration",w,e(i)),n(i,"smoothFactor",_,e(i)),i.lastHorizontal=0,i.lastVertical=0,i.t=0,i.loopCount=0,i.isPaused=!1,i.pauseTimer=0,i.handStartPos=new c,i}o(i,t);var a=i.prototype;return a.start=function(){T.isTouching&&(this.uiOpacity=this.node.getComponent(p)||this.node.addComponent(p),this.uiOpacity.opacity=0),this.node.on(d.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(d.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(d.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(d.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.initJoyStickBgPosition=this.joyStickBg.node.worldPosition,this.hand&&(this.handStartPos=this.hand.getPosition().clone())},a.onDestroy=function(){this.node.off(d.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(d.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(d.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(d.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},a.onTouchStart=function(t){var i;if(null!=(i=b.playerController)&&i.playMove&&b.playerController.playMove(),!T.isDeactivateVirtualJoystick&&!T.isGameEnd&&T.isCameraMoveEnd){T.isTouching=!0,this.hand&&(this.hand.active=!1);var o=t.touch.getUILocationX(),n=t.touch.getUILocationY();this.joyStickBg.node.setWorldPosition(o,n,0),this.uiOpacity&&(this.uiOpacity.opacity=255)}},a.onTouchMove=function(t){if(!(T.isDeactivateVirtualJoystick||T.isGameEnd||T.isJoyStickBan)&&T.isCameraMoveEnd){var i=t.touch.getUILocationX(),o=t.touch.getUILocationY(),n=new c(i,o,0),e=u();this.joyStickBg.node.inverseTransformPoint(e,n);var a=u(),s=e.length();e.normalize(),c.scaleAndAdd(a,u(),e,y.clamp(s,0,this.radius)),this.thumbnail.node.setPosition(a);var r=this.thumbnail.node.position.x/this.radius,h=this.thumbnail.node.position.y/this.radius;this.lastHorizontal=this.lastHorizontal+(r-this.lastHorizontal)*this.smoothFactor,this.lastVertical=this.lastVertical+(h-this.lastVertical)*this.smoothFactor,m.horizontal=this.lastHorizontal,m.vertical=this.lastVertical}},a.onTouchEnd=function(t){b.playerController.playIdle(),m.horizontal=0,m.vertical=0,this.lastHorizontal=0,this.lastVertical=0,this.thumbnail.node.setPosition(c.ZERO),this.joyStickBg.node.setWorldPosition(this.initJoyStickBgPosition),T.isTouching&&(this.uiOpacity=this.node.getComponent(p)||this.node.addComponent(p),this.uiOpacity.opacity=0)},a.update=function(t){if(!T.isTouching){if(this.isPaused)return this.pauseTimer+=t,void(this.pauseTimer>=this.pauseDuration&&(this.pauseTimer=0,this.isPaused=!1,this.t=0));this.t+=t*this.speed;var i=this.amplitudeX*Math.sin(this.t),o=this.amplitudeY*Math.sin(this.t)*Math.cos(this.t),n=new c(o,-i,0);if(this.thumbnail.node.setPosition(n),this.hand){var e=this.handStartPos.clone().add(n);this.hand.setPosition(e)}this.t>=2*Math.PI&&(this.loopCount+=1,this.t=0,this.loopCount>=2&&(this.loopCount=0,this.thumbnail.node.setPosition(c.ZERO),this.hand&&this.hand.setPosition(this.handStartPos),this.isPaused=!0))}},i}(f)).prototype,"thumbnail",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(z.prototype,"joyStickBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(z.prototype,"hand",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(z.prototype,"radius",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 130}}),V=i(z.prototype,"amplitudeX",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),H=i(z.prototype,"amplitudeY",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),M=i(z.prototype,"speed",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),w=i(z.prototype,"pauseDuration",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=i(z.prototype,"smoothFactor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),S=z))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/VirtuallInput.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e;return{setters:[function(t){n=t.createClass},function(t){r=t.cclegacy,e=t._decorator}],execute:function(){var i,u;r._RF.push({},"3d39cM46ZVGdYHfpBeKoINt","VirtuallInput",void 0);var c=e.ccclass;e.property,t("VirtualInput",c("VirtualInput")(((u=function(){function t(){}return n(t,null,[{key:"horizontal",get:function(){return this._horizontal},set:function(t){this._horizontal=t}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=t}}]),t}())._horizontal=0,u._vertical=0,i=u))||i);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});