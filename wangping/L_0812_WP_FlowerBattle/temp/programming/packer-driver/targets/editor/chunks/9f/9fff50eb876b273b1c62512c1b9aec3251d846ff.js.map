{"version":3,"sources":["file:///D:/Cocos/PlayAble/L_0812_WP_FlowerBattle/assets/JavaScript/Guide/Arrow3D.ts"],"names":["_decorator","Component","Vec3","ccclass","property","Arrow3D","_floatingTime","_floatingRotateY","_floatingSpeed","_floatingAmplitude","_floatingHeightOffset","_floatingRotateSpeed","start","setActive","isActive","node","active","playFloatingEffect","deltaTime","targetVec","floatY","Math","sin","PI","setWorldPosition","x","y","z","setRotationFromEuler"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;;;;;;;;;OAChC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;yBAGjBK,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BJ,SAD7B,CACuC;AAAA;AAAA;AAAA,eAC3BK,aAD2B,GACX,CADW;AAAA,eAE3BC,gBAF2B,GAER,CAFQ;AAAA,eAGlBC,cAHkB,GAGD,GAHC;AAAA,eAIlBC,kBAJkB,GAIG,GAJH;AAAA,eAKlBC,qBALkB,GAKM,EALN;AAAA,eAMlBC,oBANkB,GAMK,GANL;AAAA;;AAQnCC,QAAAA,KAAK,GAAS,CACZ;AACC;AACF;;AACDC,QAAAA,SAAS,CAACC,QAAD,EAAoB;AACzB,eAAKC,IAAL,CAAUC,MAAV,GAAmBF,QAAnB;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIG,QAAAA,kBAAkB,CAACC,SAAD,EAAoBC,SAApB,EAAqC;AACnD,eAAKb,aAAL,IAAsBY,SAAtB,CADmD,CAGnD;;AACA,gBAAME,MAAM,GAAGC,IAAI,CAACC,GAAL,CAAS,KAAKhB,aAAL,GAAqB,CAArB,GAAyBe,IAAI,CAACE,EAA9B,GAAmC,KAAKf,cAAjD,IAAmE,KAAKC,kBAAvF;;AAEA,eAAKM,IAAL,CAAUS,gBAAV,CAA2B,IAAItB,IAAJ,CACvBiB,SAAS,CAACM,CADa,EAEvBN,SAAS,CAACO,CAAV,GAAc,KAAKhB,qBAAnB,GAA2CU,MAFpB,EAGvBD,SAAS,CAACQ,CAHa,CAA3B,EANmD,CAYnD;;AACA,eAAKpB,gBAAL,IAAyB,KAAKI,oBAAL,GAA4BO,SAArD;AACA,eAAKX,gBAAL,IAAyB,GAAzB;AAEA,eAAKQ,IAAL,CAAUa,oBAAV,CAA+B,CAAC,GAAhC,EAAqC,KAAKrB,gBAA1C,EAA4D,CAA5D;AACH;;AArCkC,O","sourcesContent":["import { _decorator, Component, Node, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Arrow3D')\r\nexport class Arrow3D extends Component {\r\n    private _floatingTime = 0;\r\n    private _floatingRotateY = 0;\r\n    private readonly _floatingSpeed = 0.6;\r\n    private readonly _floatingAmplitude = 0.8;\r\n    private readonly _floatingHeightOffset = 11;\r\n    private readonly _floatingRotateSpeed = 180;\r\n\r\n    start(): void {\r\n      //  DataManager.Instance.arrow3DManager = this;\r\n       // this.node.active = false;\r\n    }\r\n    setActive(isActive: boolean) {\r\n        this.node.active = isActive;\r\n    }\r\n    /**\r\n     * 播放立起来跳动 + 自转效果（调用前需设置 _targetVec）\r\n     * @param deltaTime 每帧传入的时间\r\n     * @param targetVec 箭头要跳动的目标位置\r\n     */\r\n    playFloatingEffect(deltaTime: number, targetVec: Vec3) {\r\n        this._floatingTime += deltaTime;\r\n\r\n        // 上下浮动\r\n        const floatY = Math.sin(this._floatingTime * 2 * Math.PI * this._floatingSpeed) * this._floatingAmplitude;\r\n\r\n        this.node.setWorldPosition(new Vec3(\r\n            targetVec.x,\r\n            targetVec.y + this._floatingHeightOffset + floatY,\r\n            targetVec.z\r\n        ));\r\n\r\n        // 自转\r\n        this._floatingRotateY += this._floatingRotateSpeed * deltaTime;\r\n        this._floatingRotateY %= 360;\r\n\r\n        this.node.setRotationFromEuler(-270, this._floatingRotateY, 0);\r\n    }\r\n}\r\n\r\n\r\n"]}