{"version":3,"sources":["file:///D:/Cocos/PlayAble/L_0812_WP_FlowerBattle/assets/JavaScript/App.ts"],"names":["_decorator","Component","instantiate","Node","PlayerController","SceneNode","ResourceManager","GlobeVariable","NodePoolManager","GameManager","EnemyController","DropController","MapShowController","GoldMineController","super_html_playable","BeetleController","GuideManager","SoundManager","DataManager","ccclass","property","App","gameManager","onLoad","Instance","preloadAudioClips","sceneNode","node","getComponent","mapShowController","root","poolManager","resManager","instance","dataManager","init","initRes","beetleController","playerController","enemyController","goldMineController","dropController","initPlayer","guideManager","startGame","prefab","loadPrefab","prefabPath","EnemySpider","initPool","entifyName","prefabL","EnemySpiderL","prefabBlood","BloodBar","fireArrow","FireArrow","turret","TurretBullet","beetle","Beetle","prefabCoin","Coin","prefabArrow3D","Guid_Arrow3D","guidArrow3D","prefabArrowPath","Guid_ArrowPath","prefabFlowerTxPath","FlowerTx","prefabTurretTxPath","TurretTx","prefabTurretBombTxPath","TurretBombTx","prefabArrowTxPath","ArrowTX","prefabBeetleCollideTxPath","BeetleCollideTx","start","google_play","appstore","set_google_play_url","set_app_store_url","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node } from 'cc';\r\nimport { PlayerController } from './Entitys/PlayerController';\r\nimport { SceneNode } from './SceneNode';\r\nimport { ResourceManager } from './core/ResourceManager';\r\nimport { GlobeVariable } from './core/GlobeVariable';\r\nimport { NodePoolManager } from './core/NodePoolManager';\r\nimport { GameManager } from './GameManager';\r\nimport { EnemyController } from './Entitys/EnemyController';\r\nimport DropController from './Entitys/DropController';\r\nimport { MapShowController } from './MapShowController';\r\nimport GoldMineController from './Entitys/GoldMineController';\r\nimport super_html_playable from './core/super_html_playable';\r\nimport { BeetleController } from './Entitys/BeetleController';\r\nimport { GuideManager } from './Guide/GuideManager';\r\nimport { SoundManager } from './core/SoundManager';\r\nimport { DataManager } from './data/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('App')\r\nexport class App extends Component {\r\n    //游戏的主入口所有入口都在这个类中\r\n    public static playerController: PlayerController = null;\r\n    public static enemyController: EnemyController = null;\r\n    public static beetleController: BeetleController = null;\r\n\r\n    public static sceneNode: SceneNode = null;\r\n    public static resManager: ResourceManager = null;\r\n    public static poolManager: NodePoolManager = null;\r\n    public static dropController: DropController = null;\r\n    public static mapShowController: MapShowController = null;\r\n    public static goldMineController: GoldMineController = null;\r\n    public static dataManager:DataManager  = null;\r\n    public static guidArrow3D: Node = null;\r\n    private gameManager: GameManager = null;\r\n    public static gameManager: GameManager = null;\r\n    public static guideManager: GuideManager = null;\r\n\r\n    //public static soundManager: SoundManager = null;\r\n    @property(Node)\r\n    private root: Node = null;\r\n    protected async onLoad() {\r\n        SoundManager.Instance.preloadAudioClips();\r\n        App.sceneNode = this.node.getComponent(SceneNode);\r\n        App.mapShowController = this.root.getComponent(MapShowController);\r\n        App.poolManager = NodePoolManager.Instance;\r\n        App.resManager = ResourceManager.instance;\r\n        App.dataManager = DataManager.Instance;\r\n        await App.dataManager.init();\r\n        await this.initRes()\r\n        // App.soundManager = SoundManager.Instance;\r\n  \r\n        App.beetleController = BeetleController.Instance;\r\n        App.playerController = PlayerController.Instance;\r\n        App.enemyController = EnemyController.Instance;\r\n        App.enemyController.init();\r\n        App.goldMineController = GoldMineController.Instance;\r\n        App.dropController = DropController.Instance;\r\n        App.playerController.initPlayer();\r\n        App.guideManager = GuideManager.Instance;\r\n        this.gameManager = new GameManager();\r\n        App.gameManager = this.gameManager;\r\n        this.gameManager.startGame();\r\n\r\n\r\n    }\r\n    /**应该放在加载进度中  没有进度在次调用 */\r\n    async initRes() {\r\n        // //创建敌人\r\n        let prefab = await App.resManager.loadPrefab(GlobeVariable.prefabPath.EnemySpider)\r\n        if (prefab) {\r\n            App.poolManager.initPool(prefab, 100, GlobeVariable.entifyName.EnemySpider);\r\n        }\r\n        // //创建敌人\r\n        let prefabL = await App.resManager.loadPrefab(GlobeVariable.prefabPath.EnemySpiderL)\r\n        if (prefabL) {\r\n            App.poolManager.initPool(prefabL, 100, GlobeVariable.entifyName.EnemySpiderL);\r\n        }\r\n        //创建血条\r\n        let prefabBlood = await App.resManager.loadPrefab(GlobeVariable.prefabPath.BloodBar);\r\n        if (prefabBlood) {\r\n            App.poolManager.initPool(prefabBlood, 100, GlobeVariable.entifyName.BloodBar);\r\n        }\r\n        //创建火柴棍箭矢\r\n        let fireArrow = await App.resManager.loadPrefab(GlobeVariable.prefabPath.FireArrow);\r\n        if (fireArrow) {\r\n            App.poolManager.initPool(fireArrow, 100, GlobeVariable.entifyName.FireArrow);\r\n        }\r\n\r\n        //创建炮塔胶囊\r\n        let turret = await App.resManager.loadPrefab(GlobeVariable.prefabPath.TurretBullet);\r\n        if (turret) {\r\n            App.poolManager.initPool(turret, 100, GlobeVariable.entifyName.TurretBullet);\r\n        }\r\n\r\n        //创建炮塔胶囊\r\n        let beetle = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Beetle);\r\n        if (beetle) {\r\n            App.poolManager.initPool(beetle, 100, GlobeVariable.entifyName.Beetle);\r\n        }\r\n        //创建金币\r\n        let prefabCoin = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Coin);\r\n        if (prefabCoin) {\r\n            App.poolManager.initPool(prefabCoin, 100, GlobeVariable.entifyName.Coin);\r\n        }\r\n\r\n        //箭头3d \r\n        let prefabArrow3D = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Guid_Arrow3D);\r\n        App.guidArrow3D = instantiate(prefabArrow3D);\r\n\r\n        //箭头路径\r\n        let prefabArrowPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Guid_ArrowPath);\r\n        if (prefabArrowPath) {\r\n            App.poolManager.initPool(prefabArrowPath, 10, GlobeVariable.entifyName.Guid_ArrowPath);\r\n        }\r\n\r\n        //花瓣特效\r\n        let prefabFlowerTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.FlowerTx);\r\n        if (prefabFlowerTxPath) {\r\n            App.poolManager.initPool(prefabFlowerTxPath, 10, GlobeVariable.entifyName.FlowerTx);\r\n\r\n        }\r\n        //炮塔攻击特效\r\n        let prefabTurretTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.TurretTx);\r\n        if (prefabTurretTxPath) {\r\n            App.poolManager.initPool(prefabTurretTxPath, 22, GlobeVariable.entifyName.TurretTx);\r\n        }\r\n        //炮塔攻击特效\r\n        let prefabTurretBombTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.TurretBombTx);\r\n        if (prefabTurretBombTxPath) {\r\n            App.poolManager.initPool(prefabTurretBombTxPath, 10, GlobeVariable.entifyName.TurretBombTx);\r\n\r\n        }\r\n        //-arrow 火柴攻击人物受击特效\r\n        let prefabArrowTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.ArrowTX);\r\n        if (prefabArrowTxPath) {\r\n            App.poolManager.initPool(prefabArrowTxPath, 10, GlobeVariable.entifyName.ArrowTX);\r\n        }\r\n\r\n\r\n        //-arrow  Beetle 攻击受击特效\r\n        let prefabBeetleCollideTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.BeetleCollideTx);\r\n        if (prefabBeetleCollideTxPath) {\r\n            App.poolManager.initPool(prefabBeetleCollideTxPath, 10, GlobeVariable.entifyName.BeetleCollideTx);\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n        const google_play = \"https://play.google.com/store/apps/details?gl=US&hl=en-US&id=com.gzgroup.lproject3\";\r\n        const appstore = \"https://play.google.com/store/apps/details?gl=US&hl=en-US&id=com.gzgroup.lproject3\";\r\n\r\n        super_html_playable.set_google_play_url(google_play);\r\n        super_html_playable.set_app_store_url(appstore);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        if (this.gameManager) {\r\n            this.gameManager.update(deltaTime);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n"]}