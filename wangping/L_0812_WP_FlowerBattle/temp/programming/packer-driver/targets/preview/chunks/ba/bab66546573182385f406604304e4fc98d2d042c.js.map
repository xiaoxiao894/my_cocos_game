{"version":3,"sources":["file:///D:/Cocos/PlayAble/L_0812_WP_FlowerBattle/assets/JavaScript/MapShowController.ts"],"names":["_decorator","Component","Label","Node","tween","Vec3","Animation","Sprite","find","BoxCollider","RigidBody","Camera","GlobeVariable","App","SoundManager","GameEndManager","ccclass","property","MapShowController","type","tooltip","arrowTower","turret","block1","block2","beetle","flower","attackFlower","arrowTowerArea","turretArea","block1Area","block2Area","beetleArea","beetleArea1","attackFlowerArea","bubble","mainCameraPos","mainCameraRot","playerPos","playerRot","curCameraPos","onLoad","buidingParent","getChildByName","buidingAreaParent","active","showLable","mianCamera","node","position","clone","rotation","player","guildMoveCamera","isBeetleGuild","isJoyStickBan","to","call","arrowGuide","getComponent","play","start","continueGame","setPosition","setRotation","arrowTowerModel","continueShowLable","disableColliderAndRigidBody","path","obj","collider","enabled","rigidBody","handOverArea","forEach","element","passData","handVoer","nodes","lab","string","maxCoin","sp","fillRange","bubbleAniSpeed","speed","ani","state","getState","setBubbleLable","remaining","showCoin","Math","max","children","scheduleOnce","reunBlock1","retunBeetle1","restBlock1","lb","name","curCoin","showBeetleBubble","hideBeetleBubble","areaName","beetleIsMove","beetleLockNum","Instance","playAudio","showUIBlock1Area","showUIBlock2Area","showUIBeetleArea","showUIAttackFlowerArea","showUIArrowTowerArea","showUITurretArea","cameraMove","showUIBuiding","jiantou","isStartGame","sceneNode","enemyParent","guideManager","setGuideStepCompLate","nexStep","nexPhase","isBlock","isFirstBlock","blockLockNum","enemySpiderNumBig","playerAnim","setTimeout","GameEnd","showGameEnd","isGameEnd"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;;AAClGC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,c,iBAAAA,c;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBjB,U;;mCAOjBkB,iB,WALZF,OAAO,CAAC,mBAAD,C,UAOHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEhB,IAAR;AAAciB,QAAAA,OAAO,EAAE;AAAvB,OAAD,C,UAGRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEhB,IAAR;AAAciB,QAAAA,OAAO,EAAE;AAAvB,OAAD,C,UAGRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAER,MAAR;AAAgBS,QAAAA,OAAO,EAAE;AAAzB,OAAD,C,UAGRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEhB,IAAR;AAAciB,QAAAA,OAAO,EAAE;AAAvB,OAAD,C,UAGRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEhB,IAAR;AAAciB,QAAAA,OAAO,EAAE;AAAvB,OAAD,C,UAGRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEb,SAAR;AAAmBc,QAAAA,OAAO,EAAE;AAA5B,OAAD,C,2BAtBb,MAKaF,iBALb,SAKuCjB,SALvC,CAKiD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAoB7C;AApB6C,eAqBrCoB,UArBqC,GAqBlB,IArBkB;AAqBb;AArBa,eAsBrCC,MAtBqC,GAsBtB,IAtBsB;AAsBjB;AAtBiB,eAuBrCC,MAvBqC,GAuBtB,IAvBsB;AAuBjB;AAvBiB,eAwBrCC,MAxBqC,GAwBtB,IAxBsB;AAwBjB;AAxBiB,eAyBrCC,MAzBqC,GAyBtB,IAzBsB;AAyBjB;AAzBiB,eA0BrCC,MA1BqC,GA0BtB,IA1BsB;AA0BjB;AA1BiB,eA2BrCC,YA3BqC,GA2BhB,IA3BgB;AA2BX;AAElC;AA7B6C,eA8BrCC,cA9BqC,GA8Bd,IA9Bc;AA8BT;AA9BS,eA+BrCC,UA/BqC,GA+BlB,IA/BkB;AA+Bb;AA/Ba,eAgCrCC,UAhCqC,GAgClB,IAhCkB;AAgCb;AAhCa,eAiCrCC,UAjCqC,GAiClB,IAjCkB;AAiCb;AAjCa,eAkCrCC,UAlCqC,GAkClB,IAlCkB;AAkCb;AAlCa,eAmCrCC,WAnCqC,GAmCjB,IAnCiB;AAmCZ;AAnCY,eAoCrCC,gBApCqC,GAoCZ,IApCY;AAoCP;AApCO,eAqCrCC,MArCqC,GAqCtB,IArCsB;AAqChB;AArCgB,eAsCrCC,aAtCqC,GAsCf,IAtCe;AAAA,eAuCrCC,aAvCqC,GAuCf,IAvCe;AAAA,eAwCrCC,SAxCqC,GAwCnB,IAxCmB;AAAA,eAyCrCC,SAzCqC,GAyCnB,IAzCmB;AAAA,eAsRrCC,YAtRqC,GAsRhB,IAAInC,IAAJ,EAtRgB;AAAA;;AA0CnCoC,QAAAA,MAAM,GAAS;AACrB;AACA,eAAKpB,UAAL,GAAkB,KAAKqB,aAAL,CAAmBC,cAAnB,CAAkC,QAAlC,CAAlB;AACA,eAAKrB,MAAL,GAAc,KAAKoB,aAAL,CAAmBC,cAAnB,CAAkC,OAAlC,CAAd;AACA,eAAKpB,MAAL,GAAc,KAAKmB,aAAL,CAAmBC,cAAnB,CAAkC,QAAlC,CAAd;AACA,eAAKnB,MAAL,GAAc,KAAKkB,aAAL,CAAmBC,cAAnB,CAAkC,QAAlC,CAAd;AACA,eAAKlB,MAAL,GAAc,KAAKiB,aAAL,CAAmBC,cAAnB,CAAkC,UAAlC,CAAd;AACA,eAAKjB,MAAL,GAAc,KAAKgB,aAAL,CAAmBC,cAAnB,CAAkC,KAAlC,CAAd;AACA,eAAKhB,YAAL,GAAoB,KAAKe,aAAL,CAAmBC,cAAnB,CAAkC,WAAlC,CAApB,CARqB,CASrB;;AACA,eAAKf,cAAL,GAAsB,KAAKgB,iBAAL,CAAuBD,cAAvB,CAAsC,WAAtC,CAAtB;AACA,eAAKd,UAAL,GAAkB,KAAKe,iBAAL,CAAuBD,cAAvB,CAAsC,UAAtC,CAAlB;AACA,eAAKb,UAAL,GAAkB,KAAKc,iBAAL,CAAuBD,cAAvB,CAAsC,SAAtC,CAAlB;AACA,eAAKZ,UAAL,GAAkB,KAAKa,iBAAL,CAAuBD,cAAvB,CAAsC,aAAtC,CAAlB;AACA,eAAKX,UAAL,GAAkB,KAAKY,iBAAL,CAAuBD,cAAvB,CAAsC,aAAtC,CAAlB;AACA,eAAKV,WAAL,GAAmB,KAAKW,iBAAL,CAAuBD,cAAvB,CAAsC,iBAAtC,CAAnB;AACA,eAAKT,gBAAL,GAAwB,KAAKU,iBAAL,CAAuBD,cAAvB,CAAsC,cAAtC,CAAxB;AAEA,eAAKR,MAAL,GAAc,KAAKS,iBAAL,CAAuBD,cAAvB,CAAsC,OAAtC,CAAd;AACA,eAAKR,MAAL,CAAYU,MAAZ,GAAqB,KAArB;AACA,eAAKZ,WAAL,CAAiBY,MAAjB,GAA0B,KAA1B;AACA,eAAKC,SAAL,GArBqB,CAsBrB;;AACA,eAAKV,aAAL,GAAqB,KAAKW,UAAL,CAAgBC,IAAhB,CAAqBC,QAArB,CAA8BC,KAA9B,EAArB;AACA,eAAKb,aAAL,GAAqB,KAAKU,UAAL,CAAgBC,IAAhB,CAAqBG,QAArB,CAA8BD,KAA9B,EAArB;AACA,eAAKZ,SAAL,GAAiB,KAAKc,MAAL,CAAYH,QAAZ,CAAqBC,KAArB,EAAjB;AACA,eAAKX,SAAL,GAAiB,KAAKa,MAAL,CAAYD,QAAZ,CAAqBD,KAArB,EAAjB;AACH;;AACDG,QAAAA,eAAe,GAAG;AACd,cAAI;AAAA;AAAA,8CAAcC,aAAlB,EAAiC;AAC7B;AACH;;AACD;AAAA;AAAA,8CAAcA,aAAd,GAA8B,IAA9B;AACA;AAAA;AAAA,8CAAcC,aAAd,GAA8B,IAA9B;AACA,eAAKf,YAAL,GAAoB,KAAKO,UAAL,CAAgBC,IAAhB,CAAqBC,QAArB,CAA8BC,KAA9B,EAApB;AACA9C,UAAAA,KAAK,CAAC,KAAK2C,UAAL,CAAgBC,IAAjB,CAAL,CACKQ,EADL,CACQ,GADR,EACa;AAAEP,YAAAA,QAAQ,EAAE,IAAI5C,IAAJ,CAAS,MAAT,EAAiB,GAAjB,EAAsB,KAAtB;AAAZ,WADb,EAEKmD,EAFL,CAEQ,GAFR,EAEa;AAAEP,YAAAA,QAAQ,EAAE,IAAI5C,IAAJ,CAAS,MAAT,EAAiB,GAAjB,EAAsB,KAAtB;AAAZ,WAFb,EAEwD;AAFxD,WAGKmD,EAHL,CAGQ,GAHR,EAGa;AAAEP,YAAAA,QAAQ,EAAE,KAAKT;AAAjB,WAHb,EAIKiB,IAJL,CAIU,MAAM;AACR;AAAA;AAAA,gDAAcF,aAAd,GAA8B,KAA9B,CADQ,CAER;;AACA,iBAAKG,UAAL,CAAgBb,MAAhB,GAAyB,IAAzB;AACA,iBAAKa,UAAL,CAAgBC,YAAhB,CAA6BrD,SAA7B,EAAwCsD,IAAxC,CAA6C,aAA7C,EAJQ,CAKR;AACH,WAVL,EAWKC,KAXL;AAYH;;AACDC,QAAAA,YAAY,GAAG;AACX;AACA,eAAKf,UAAL,CAAgBC,IAAhB,CAAqBe,WAArB,CAAiC,KAAK3B,aAAtC;AACA,eAAKW,UAAL,CAAgBC,IAAhB,CAAqBgB,WAArB,CAAiC,KAAK3B,aAAtC;AACA,eAAKe,MAAL,CAAYW,WAAZ,CAAwB,KAAKzB,SAA7B;AACA,eAAKc,MAAL,CAAYY,WAAZ,CAAwB,KAAKzB,SAA7B;AAEA,eAAKlB,UAAL,CAAgBwB,MAAhB,GAAyB,KAAzB;AACA,cAAIoB,eAAe,GAAG,KAAK5C,UAAL,CAAgBsB,cAAhB,CAA+B,gBAA/B,EAAiDA,cAAjD,CAAgE,OAAhE,EAAyEA,cAAzE,CAAwF,8BAAxF,CAAtB;AACAsB,UAAAA,eAAe,CAACtB,cAAhB,CAA+B,WAA/B,EAA4CA,cAA5C,CAA2D,YAA3D,EAAyEE,MAAzE,GAAkF,IAAlF;AACA,eAAKvB,MAAL,CAAYuB,MAAZ,GAAqB,KAArB;AACA,eAAKtB,MAAL,CAAYsB,MAAZ,GAAqB,KAArB;AACA,eAAKrB,MAAL,CAAYqB,MAAZ,GAAqB,KAArB;AACA,eAAKpB,MAAL,CAAYoB,MAAZ,GAAqB,KAArB;AACA,eAAKlB,YAAL,CAAkBkB,MAAlB,GAA2B,KAA3B;AAEA,eAAKjB,cAAL,CAAoBiB,MAApB,GAA6B,IAA7B;AACA,eAAKhB,UAAL,CAAgBgB,MAAhB,GAAyB,KAAzB;AACA,eAAKf,UAAL,CAAgBe,MAAhB,GAAyB,KAAzB;AACA,eAAKd,UAAL,CAAgBc,MAAhB,GAAyB,KAAzB;AACA,eAAKb,UAAL,CAAgBa,MAAhB,GAAyB,KAAzB;AACA,eAAKZ,WAAL,CAAiBY,MAAjB,GAA0B,KAA1B;AACA,eAAKX,gBAAL,CAAsBW,MAAtB,GAA+B,KAA/B;AAEA,eAAKV,MAAL,GAAc,KAAKS,iBAAL,CAAuBD,cAAvB,CAAsC,OAAtC,CAAd;AACA,eAAKR,MAAL,CAAYU,MAAZ,GAAqB,KAArB;AACA,eAAKZ,WAAL,CAAiBY,MAAjB,GAA0B,KAA1B;AACA,eAAKqB,iBAAL,GA3BW,CA6BX;;AACA,eAAKC,2BAAL,CAAiC,kBAAjC;AACA,eAAKA,2BAAL,CAAiC,mBAAjC;AACA,eAAKA,2BAAL,CAAiC,qBAAjC;AACH,SA3H4C,CA4H7C;;;AACAA,QAAAA,2BAA2B,CAACC,IAAD,EAAO;AAC9B,cAAMC,GAAG,GAAG7D,IAAI,CAAC4D,IAAD,CAAhB;AACA,cAAI,CAACC,GAAL,EAAU;AAEV,cAAMC,QAAQ,GAAGD,GAAG,CAACV,YAAJ,CAAiBlD,WAAjB,CAAjB;AACA,cAAI6D,QAAJ,EAAcA,QAAQ,CAACC,OAAT,GAAmB,KAAnB;AAEd,cAAMC,SAAS,GAAGH,GAAG,CAACV,YAAJ,CAAiBjD,SAAjB,CAAlB;AACA,cAAI8D,SAAJ,EAAeA,SAAS,CAACD,OAAV,GAAoB,KAApB;AAClB;;AACDL,QAAAA,iBAAiB,GAAG;AAChB;AAAA;AAAA,8CAAcO,YAAd,CAA2BC,OAA3B,CAAmCC,OAAO,IAAI;AAC1C,gBAAMC,QAAQ,GAAG;AAAA;AAAA,gDAAcC,QAAd,CAAuBF,OAAvB,CAAjB;AACA,gBAAIG,KAAK,GAAG,KAAKlC,iBAAL,CAAuBD,cAAvB,CAAsCgC,OAAtC,CAAZ;;AACA,gBAAIG,KAAJ,EAAW;AAAA;;AACP,kBAAIC,GAAG,4BAAGD,KAAK,CAACnC,cAAN,CAAqB,iBAArB,CAAH,qBAAG,sBAAyCgB,YAAzC,CAAsDzD,KAAtD,CAAV;AACA6E,cAAAA,GAAG,CAACC,MAAJ,GAAaJ,QAAQ,CAACK,OAAT,GAAmB,EAAhC;AAEA,kBAAIC,EAAE,GAAGJ,KAAK,CAACnC,cAAN,CAAqB,UAArB,EAAiCgB,YAAjC,CAA8CpD,MAA9C,CAAT;AACA2E,cAAAA,EAAE,CAACC,SAAH,GAAe,CAAf;AACH,aATyC,CAU1C;AACA;;AACH,WAZD;AAaA,eAAKhD,MAAL,CAAYQ,cAAZ,CAA2B,OAA3B,EAAoCA,cAApC,CAAmD,qBAAnD,EAA0EgB,YAA1E,CAAuFzD,KAAvF,EAA8F8E,MAA9F,GAAuG;AAAA;AAAA,8CAAcH,QAAd,CAAuB,iBAAvB,EAA0CI,OAA1C,GAAoD,EAA3J;AAEH;;AACDG,QAAAA,cAAc,CAACC,KAAD,EAAsB;AAAA,cAArBA,KAAqB;AAArBA,YAAAA,KAAqB,GAAL,GAAK;AAAA;;AAChC,cAAIC,GAAG,GAAG,KAAKnD,MAAL,CAAYwB,YAAZ,CAAyBrD,SAAzB,CAAV;AACA,cAAIiF,KAAK,GAAGD,GAAG,CAACE,QAAJ,CAAa,WAAb,CAAZ;;AACA,cAAID,KAAJ,EAAW;AACPA,YAAAA,KAAK,CAACF,KAAN,GAAcA,KAAd;AACH;;AACDC,UAAAA,GAAG,CAAC1B,IAAJ,CAAS,WAAT;AAEH;;AAEDd,QAAAA,SAAS,GAAG;AACR;AAAA;AAAA,8CAAc2B,YAAd,CAA2BC,OAA3B,CAAmCC,OAAO,IAAI;AAC1C,gBAAMC,QAAQ,GAAG;AAAA;AAAA,gDAAcC,QAAd,CAAuBF,OAAvB,CAAjB;AACA,gBAAIG,KAAK,GAAG,KAAKlC,iBAAL,CAAuBD,cAAvB,CAAsCgC,OAAtC,CAAZ;;AACA,gBAAIG,KAAJ,EAAW;AAAA;;AACP,kBAAIC,GAAG,6BAAGD,KAAK,CAACnC,cAAN,CAAqB,iBAArB,CAAH,qBAAG,uBAAyCgB,YAAzC,CAAsDzD,KAAtD,CAAV;AACA6E,cAAAA,GAAG,CAACC,MAAJ,GAAaJ,QAAQ,CAACK,OAAT,GAAmB,EAAhC;AACH,aANyC,CAO1C;AACA;;AACH,WATD;AAUA,eAAK9C,MAAL,CAAYQ,cAAZ,CAA2B,OAA3B,EAAoCA,cAApC,CAAmD,qBAAnD,EAA0EgB,YAA1E,CAAuFzD,KAAvF,EAA8F8E,MAA9F,GAAuG;AAAA;AAAA,8CAAcH,QAAd,CAAuB,iBAAvB,EAA0CI,OAA1C,GAAoD,EAA3J;AAEH;;AAGDQ,QAAAA,cAAc,GAAG;AACb,cAAIC,SAAS,GAAG;AAAA;AAAA,8CAAcb,QAAd,CAAuB,iBAAvB,EAA0CI,OAA1C,GAAoD;AAAA;AAAA,8CAAcJ,QAAd,CAAuB,iBAAvB,EAA0Cc,QAA9G,CADa,CAC0G;AACvH;;AACAD,UAAAA,SAAS,GAAGE,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYH,SAAZ,CAAZ;AACA,eAAKvD,MAAL,CAAYQ,cAAZ,CAA2B,OAA3B,EAAoCA,cAApC,CAAmD,qBAAnD,EAA0EgB,YAA1E,CAAuFzD,KAAvF,EAA8F8E,MAA9F,GAAuGU,SAAS,GAAG,EAAnH;AACA,cAAIR,EAAE,GAAG,KAAK/C,MAAL,CAAYQ,cAAZ,CAA2B,OAA3B,EAAoCA,cAApC,CAAmD,WAAnD,EAAgEgB,YAAhE,CAA6EpD,MAA7E,CAAT;AACA2E,UAAAA,EAAE,CAACC,SAAH,GAAe;AAAA;AAAA,8CAAcN,QAAd,CAAuB,iBAAvB,EAA0Cc,QAA1C,GAAqD;AAAA;AAAA,8CAAcd,QAAd,CAAuB,iBAAvB,EAA0CI,OAA9G;AACH;;AAGSpB,QAAAA,KAAK,GAAS;AACpB,eAAKjB,iBAAL,CAAuBkD,QAAvB,CAAgCpB,OAAhC,CAAwCC,OAAO,IAAI;AAC/CA,YAAAA,OAAO,CAAC9B,MAAR,GAAiB,KAAjB;AACH,WAFD;AAGA,eAAKH,aAAL,CAAmBoD,QAAnB,CAA4BpB,OAA5B,CAAoCC,OAAO,IAAI;AAC3CA,YAAAA,OAAO,CAAC9B,MAAR,GAAiB,KAAjB;AACH,WAFD;AAGA,eAAKxB,UAAL,CAAgBwB,MAAhB,GAAyB,IAAzB;AACA,eAAKkD,YAAL,CAAkB,MAAM;AACpB,iBAAK1E,UAAL,CAAgBwB,MAAhB,GAAyB,KAAzB;AACH,WAFD,EAEG,CAFH;AAGA,eAAKnB,MAAL,CAAYmB,MAAZ,GAAqB,IAArB;AACA,eAAKjB,cAAL,CAAoBiB,MAApB,GAA6B,IAA7B,CAZoB,CAapB;AACD;AAGF;;AACDmD,QAAAA,UAAU,GAAG;AACT,iBAAO,KAAKlE,UAAL,CAAgBe,MAAvB;AACH;;AACDoD,QAAAA,YAAY,GAAG;AACX,iBAAO,KAAKhE,WAAL,CAAiBY,MAAxB;AACH;;AAGDqD,QAAAA,UAAU,GAAG;AACT,eAAKpE,UAAL,CAAgBe,MAAhB,GAAyB,IAAzB;AACA,cAAMqC,EAAE,GAAG,KAAKpD,UAAL,CAAgBa,cAAhB,CAA+B,UAA/B,EAA2CgB,YAA3C,CAAwDpD,MAAxD,CAAX;AACA,cAAM4F,EAAE,GAAG,KAAKrE,UAAL,CAAgBa,cAAhB,CAA+B,iBAA/B,EAAkDgB,YAAlD,CAA+DzD,KAA/D,CAAX,CAHS,CAKT;;AACA,cAAM0E,QAAQ,GAAG;AAAA;AAAA,8CAAcC,QAAd,CAAuB,KAAK/C,UAAL,CAAgBsE,IAAvC,CAAjB;AACAxB,UAAAA,QAAQ,CAACyB,OAAT,GAAmB,CAAnB;AACAzB,UAAAA,QAAQ,CAACe,QAAT,GAAoB,CAApB,CARS,CAQa;;AACtBT,UAAAA,EAAE,CAACC,SAAH,GAAe,CAAf;AACAgB,UAAAA,EAAE,CAACnB,MAAH,GAAYJ,QAAQ,CAACK,OAAT,GAAmB,EAA/B;AAEH,SAlO4C,CAmO7C;;;AACAqB,QAAAA,gBAAgB,GAAG;AACf,eAAKnE,MAAL,CAAYU,MAAZ,GAAqB,IAArB;AACA,eAAKuC,cAAL,GAFe,CAGf;;AACA,eAAKnD,WAAL,CAAiBY,MAAjB,GAA0B,IAA1B;AACH,SAzO4C,CA0O7C;;;AACA0D,QAAAA,gBAAgB,CAACC,QAAD,EAAmB;AAC/B;AACA,cAAM5B,QAAQ,GAAG;AAAA;AAAA,8CAAcC,QAAd,CAAuB2B,QAAvB,CAAjB;AACA5B,UAAAA,QAAQ,CAACyB,OAAT,GAAmB,CAAnB;AACAzB,UAAAA,QAAQ,CAACe,QAAT,GAAoB,CAApB,CAJ+B,CAIT;;AAEtB;AAAA;AAAA,8CAAcc,YAAd,GAA6B,IAA7B;AACA;AAAA;AAAA,8CAAcC,aAAd;AACA;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,SAAtB,CAAgC,sBAAhC;AAEA,eAAKzE,MAAL,CAAYU,MAAZ,GAAqB,KAArB,CAV+B,CAW/B;;AACA,eAAKZ,WAAL,CAAiBY,MAAjB,GAA0B,KAA1B;AACA,cAAIqC,EAAE,GAAG,KAAK/C,MAAL,CAAYQ,cAAZ,CAA2B,OAA3B,EAAoCA,cAApC,CAAmD,WAAnD,EAAgEgB,YAAhE,CAA6EpD,MAA7E,CAAT;AACA2E,UAAAA,EAAE,CAACC,SAAH,GAAe,CAAf;AACA,eAAKhD,MAAL,CAAYQ,cAAZ,CAA2B,OAA3B,EAAoCA,cAApC,CAAmD,qBAAnD,EAA0EgB,YAA1E,CAAuFzD,KAAvF,EAA8F8E,MAA9F,GAAuG;AAAA;AAAA,8CAAcH,QAAd,CAAuB,iBAAvB,EAA0CI,OAA1C,GAAoD,EAA3J;AACH,SA3P4C,CA4P7C;;;AACA4B,QAAAA,gBAAgB,GAAG;AACf,eAAK/E,UAAL,CAAgBe,MAAhB,GAAyB,IAAzB;AACH;;AACDiE,QAAAA,gBAAgB,GAAG;AACf,eAAK/E,UAAL,CAAgBc,MAAhB,GAAyB,IAAzB;AACH,SAlQ4C,CAmQ7C;;;AACAkE,QAAAA,gBAAgB,GAAG;AAEf,eAAK/E,UAAL,CAAgBa,MAAhB,GAAyB,IAAzB;AACH,SAvQ4C,CAwQ7C;;;AACAmE,QAAAA,sBAAsB,GAAG;AACrB,eAAK9E,gBAAL,CAAsBW,MAAtB,GAA+B,IAA/B;AACH,SA3Q4C,CA4Q7C;;;AAEAoE,QAAAA,oBAAoB,GAAG;AAEnB,eAAKrF,cAAL,CAAoBiB,MAApB,GAA6B,IAA7B;AACH,SAjR4C,CAkR7C;;;AACAqE,QAAAA,gBAAgB,GAAG;AACf,eAAKrF,UAAL,CAAgBgB,MAAhB,GAAyB,IAAzB;AACH;;AAEDsE,QAAAA,UAAU,GAAE;AACR,eAAK3E,YAAL,GAAoB,KAAKO,UAAL,CAAgBC,IAAhB,CAAqBC,QAArB,CAA8BC,KAA9B,EAApB;AACA9C,UAAAA,KAAK,CAAC,KAAK2C,UAAL,CAAgBC,IAAjB,CAAL,CACKQ,EADL,CACQ,GADR,EACa;AAAEP,YAAAA,QAAQ,EAAE,IAAI5C,IAAJ,CAAS,GAAT,EAAc,GAAd,EAAmB,EAAnB;AAAZ,WADb,EAEKmD,EAFL,CAEQ,GAFR,EAEa;AAAEP,YAAAA,QAAQ,EAAE,KAAKT;AAAjB,WAFb,EAGKiB,IAHL,CAGU,MAAM;AACR;AAAA;AAAA,gDAAcF,aAAd,GAA8B,KAA9B,CADQ,CAER;AACH,WANL,EAOKM,KAPL;AAQH;AACD;AACJ;AACA;AACA;;;AACWuD,QAAAA,aAAa,CAACZ,QAAD,EAAmB;AACnC,cAAIA,QAAQ,IAAI,WAAhB,EAA6B;AAAE;AAC3B,gBAAMa,OAAO,GAAG7G,IAAI,CAAC,mBAAD,CAApB;AACA,gBAAM8D,QAAQ,GAAG+C,OAAO,CAAC1D,YAAR,CAAqBlD,WAArB,CAAjB;;AACA,gBAAI6D,QAAJ,EAAc;AACVA,cAAAA,QAAQ,CAACC,OAAT,GAAmB,IAAnB;AACH;;AACD,gBAAMC,SAAS,GAAG6C,OAAO,CAAC1D,YAAR,CAAqBjD,SAArB,CAAlB;;AACA,gBAAI8D,SAAJ,EAAe;AACXA,cAAAA,SAAS,CAACD,OAAV,GAAoB,IAApB;AACH;;AAED,iBAAKlD,UAAL,CAAgBwB,MAAhB,GAAyB,IAAzB;AACA;AAAA;AAAA,8CAAa8D,QAAb,CAAsBC,SAAtB,CAAgC,QAAhC;AACA;AAAA;AAAA,gDAAcU,WAAd,GAA4B,IAA5B;AACA;AAAA;AAAA,4BAAIC,SAAJ,CAAcC,WAAd,CAA0B3E,MAA1B,GAAmC,IAAnC;AACA,iBAAKgE,gBAAL;AACA;AAAA;AAAA,4BAAIY,YAAJ,CAAiBC,oBAAjB,CAAsC,CAAtC;AACA;AAAA;AAAA,4BAAID,YAAJ,CAAiBE,OAAjB;AACA;AAAA;AAAA,4BAAIF,YAAJ,CAAiBG,QAAjB;AACH;;AACD,cAAIpB,QAAQ,IAAI,SAAhB,EAA2B;AACvB,iBAAKjF,MAAL,CAAYsB,MAAZ,GAAqB,IAArB;AACA,iBAAKtB,MAAL,CAAYoC,YAAZ,CAAyBrD,SAAzB,EAAoCsD,IAApC,CAAyC,eAAzC;AACA;AAAA;AAAA,8CAAa+C,QAAb,CAAsBC,SAAtB,CAAgC,QAAhC;AACA;AAAA;AAAA,gDAAciB,OAAd,GAAwB,IAAxB;;AACA,gBAAI;AAAA;AAAA,gDAAcC,YAAlB,EAAgC;AAC5B,mBAAKZ,gBAAL;AACA;AAAA;AAAA,8BAAIO,YAAJ,CAAiBC,oBAAjB,CAAsC,CAAtC;AACA;AAAA;AAAA,8BAAID,YAAJ,CAAiBE,OAAjB;AACA;AAAA;AAAA,8BAAIF,YAAJ,CAAiBG,QAAjB;AACH;;AACD;AAAA;AAAA,gDAAcG,YAAd;AACH;;AACD,cAAIvB,QAAQ,IAAI,UAAhB,EAA4B;AACxB,gBAAMa,QAAO,GAAG7G,IAAI,CAAC,kBAAD,CAApB;;AACA,gBAAM8D,SAAQ,GAAG+C,QAAO,CAAC1D,YAAR,CAAqBlD,WAArB,CAAjB;;AACA,gBAAI6D,SAAJ,EAAc;AACVA,cAAAA,SAAQ,CAACC,OAAT,GAAmB,IAAnB;AACH;;AACD,gBAAMC,UAAS,GAAG6C,QAAO,CAAC1D,YAAR,CAAqBjD,SAArB,CAAlB;;AACA,gBAAI8D,UAAJ,EAAe;AACXA,cAAAA,UAAS,CAACD,OAAV,GAAoB,IAApB;AACH;;AACD,iBAAKjD,MAAL,CAAYuB,MAAZ,GAAqB,IAArB;AACA;AAAA;AAAA,8CAAa8D,QAAb,CAAsBC,SAAtB,CAAgC,QAAhC;AACA;AAAA;AAAA,gDAAcoB,iBAAd,GAAkC,CAAlC;AAEA,iBAAKhB,sBAAL;AACA;AAAA;AAAA,4BAAIS,YAAJ,CAAiBC,oBAAjB,CAAsC,CAAtC;AACA;AAAA;AAAA,4BAAID,YAAJ,CAAiBE,OAAjB,GAhBwB,CAiBzB;AAEF;;AACD,cAAInB,QAAQ,IAAI,aAAhB,EAA+B;AAE3B;AACA,iBAAKyB,UAAL,CAAgBrE,IAAhB,CAAqB,QAArB;AACA;AAAA;AAAA,8CAAa+C,QAAb,CAAsBC,SAAtB,CAAgC,QAAhC;AACAsB,YAAAA,UAAU,CAAC,MAAM;AACb;AAAA;AAAA,8BAAIX,SAAJ,CAAcY,OAAd,CAAsBtF,MAAtB,GAA+B,IAA/B;AACA;AAAA;AAAA,8BAAI0E,SAAJ,CAAcY,OAAd,CAAsBxE,YAAtB;AAAA;AAAA,oDAAmDyE,WAAnD,CAA+D,CAA/D;AAEH,aAJS,EAIP,IAJO,CAAV;AAKA;AAAA;AAAA,gDAAcC,SAAd,GAA0B,IAA1B;AACH;;AACD,cAAI7B,QAAQ,IAAI,aAAhB,EAA+B;AAC3B,gBAAMa,SAAO,GAAG7G,IAAI,CAAC,qBAAD,CAApB;;AACA,gBAAM8D,UAAQ,GAAG+C,SAAO,CAAC1D,YAAR,CAAqBlD,WAArB,CAAjB;;AACA,gBAAI6D,UAAJ,EAAc;AACVA,cAAAA,UAAQ,CAACC,OAAT,GAAmB,IAAnB;AACH;;AACD,gBAAMC,WAAS,GAAG6C,SAAO,CAAC1D,YAAR,CAAqBjD,SAArB,CAAlB;;AACA,gBAAI8D,WAAJ,EAAe;AACXA,cAAAA,WAAS,CAACD,OAAV,GAAoB,IAApB;AACH;;AACD,iBAAK9C,MAAL,CAAYoB,MAAZ,GAAqB,IAArB;AACA;AAAA;AAAA,8CAAa8D,QAAb,CAAsBC,SAAtB,CAAgC,QAAhC;AACA;AAAA;AAAA,gDAAcH,YAAd,GAA6B,IAA7B;AACA;AAAA;AAAA,8CAAaE,QAAb,CAAsBC,SAAtB,CAAgC,sBAAhC;AAEA;AAAA;AAAA,gDAAcF,aAAd;AACA;AAAA;AAAA,4BAAIe,YAAJ,CAAiBC,oBAAjB,CAAsC,CAAtC;AACA;AAAA;AAAA,4BAAID,YAAJ,CAAiBE,OAAjB;AACA;AAAA;AAAA,4BAAIF,YAAJ,CAAiBG,QAAjB;AAEH;;AACD,cAAIpB,QAAQ,IAAI,iBAAhB,EAAmC;AAE/B,iBAAKD,gBAAL,CAAsBC,QAAtB;AACA,iBAAKM,gBAAL;AACA,iBAAKzD,eAAL;AAEH;;AACD,cAAImD,QAAQ,IAAI,cAAhB,EAAgC;AAC5B;AAAA;AAAA,8CAAaG,QAAb,CAAsBC,SAAtB,CAAgC,QAAhC;AACA,iBAAKjF,YAAL,CAAkBkB,MAAlB,GAA2B,IAA3B;AACA;AAAA;AAAA,gDAAcU,aAAd,GAA8B,IAA9B;AACA,iBAAKwD,gBAAL;AACA,iBAAKI,UAAL;AACA;AAAA;AAAA,4BAAIM,YAAJ,CAAiBC,oBAAjB,CAAsC,CAAtC;AACA;AAAA;AAAA,4BAAID,YAAJ,CAAiBE,OAAjB;AACA;AAAA;AAAA,4BAAIF,YAAJ,CAAiBG,QAAjB,GAR4B,CAS5B;AACA;AAEH;AAEJ;;AAlZ4C,O;;;;;iBAGf,I;;;;;;;iBAGI,I;;;;;;;iBAGL,I;;;;;;;iBAGN,I;;;;;;;iBAGI,I;;;;;;;iBAGK,I","sourcesContent":["import { _decorator, Component, Label, Node, tween, Vec3, Animation, Sprite, find, BoxCollider, RigidBody, Camera, Quat } from 'cc';\r\nimport { GlobeVariable } from './core/GlobeVariable';\r\nimport { App } from './App';\r\nimport { SoundManager } from './core/SoundManager';\r\nimport { GameEndManager } from './UI/GameEndManager';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapShowController')\r\n/**地图显示控制器\r\n * 按照场景拼音命名以防忘了\r\n * \r\n */\r\nexport class MapShowController extends Component {\r\n\r\n    @property({ type: Node, tooltip: \"建筑物父类Cons\" })\r\n    private buidingParent: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"建筑物 解锁区域父类UIPos\" })\r\n    private buidingAreaParent: Node = null;\r\n\r\n    @property({ type: Camera, tooltip: \"记录主摄像机\" })\r\n    private mianCamera: Camera = null;\r\n\r\n    @property({ type: Node, tooltip: \"记录玩家节点\" })\r\n    private player: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \" 箭头引导\" })\r\n    private arrowGuide: Node = null;\r\n\r\n    @property({ type: Animation, tooltip: \"结束坍塌动画\" })\r\n    private playerAnim: Animation = null;\r\n\r\n    //显示模型\r\n    private arrowTower: Node = null;//箭塔模型\r\n    private turret: Node = null;//炮塔模型\r\n    private block1: Node = null;//拦截拒马\r\n    private block2: Node = null;//拦截拒马\r\n    private beetle: Node = null;// Beetle模型\r\n    private flower: Node = null;//花模型\r\n    private attackFlower: Node = null;//攻击的花\r\n\r\n    //解锁区域 \r\n    private arrowTowerArea: Node = null;//箭塔模型\r\n    private turretArea: Node = null;//炮塔模型\r\n    private block1Area: Node = null;//拦截拒马\r\n    private block2Area: Node = null;//拦截拒马\r\n    private beetleArea: Node = null;// Beetle 甲虫骑士兵营\r\n    private beetleArea1: Node = null;// Beetle 甲虫骑士\r\n    private attackFlowerArea: Node = null;//攻击的花\r\n    private bubble: Node = null; // 兵营气泡\r\n    private mainCameraPos: Vec3 = null;\r\n    private mainCameraRot: Quat = null;\r\n    private playerPos: Vec3 = null;\r\n    private playerRot: Quat = null;\r\n    protected onLoad(): void {\r\n        //模型\r\n        this.arrowTower = this.buidingParent.getChildByName(\"jianta\");\r\n        this.turret = this.buidingParent.getChildByName(\"paota\");\r\n        this.block1 = this.buidingParent.getChildByName(\"juma01\");\r\n        this.block2 = this.buidingParent.getChildByName(\"juma02\");\r\n        this.beetle = this.buidingParent.getChildByName(\"jiachong\");\r\n        this.flower = this.buidingParent.getChildByName(\"hua\");\r\n        this.attackFlower = this.buidingParent.getChildByName(\"shirenhua\");\r\n        //解锁区域\r\n        this.arrowTowerArea = this.buidingAreaParent.getChildByName(\"UI_jianta\");\r\n        this.turretArea = this.buidingAreaParent.getChildByName(\"UI_paota\");\r\n        this.block1Area = this.buidingAreaParent.getChildByName(\"UI_juma\");\r\n        this.block2Area = this.buidingAreaParent.getChildByName(\"UI_juma-001\");\r\n        this.beetleArea = this.buidingAreaParent.getChildByName(\"UI_jiachong\");\r\n        this.beetleArea1 = this.buidingAreaParent.getChildByName(\"UI_jiachong-001\");\r\n        this.attackFlowerArea = this.buidingAreaParent.getChildByName(\"UI_shirenhua\");\r\n\r\n        this.bubble = this.buidingAreaParent.getChildByName(\"qipao\")\r\n        this.bubble.active = false;\r\n        this.beetleArea1.active = false;\r\n        this.showLable();\r\n        // 记录初始位置和旋转\r\n        this.mainCameraPos = this.mianCamera.node.position.clone();\r\n        this.mainCameraRot = this.mianCamera.node.rotation.clone();\r\n        this.playerPos = this.player.position.clone();\r\n        this.playerRot = this.player.rotation.clone();\r\n    }\r\n    guildMoveCamera() {\r\n        if (GlobeVariable.isBeetleGuild) {\r\n            return;\r\n        }\r\n        GlobeVariable.isBeetleGuild = true;\r\n        GlobeVariable.isJoyStickBan = true;\r\n        this.curCameraPos = this.mianCamera.node.position.clone();\r\n        tween(this.mianCamera.node)\r\n            .to(1.5, { position: new Vec3(156.87, 111, 27.13) })\r\n            .to(0.8, { position: new Vec3(156.87, 111, 27.13) })// 添加1秒延时\r\n            .to(1.5, { position: this.curCameraPos })\r\n            .call(() => {\r\n                GlobeVariable.isJoyStickBan = false;\r\n                // 箭头引导\r\n                this.arrowGuide.active = true;\r\n                this.arrowGuide.getComponent(Animation).play(\"endArrowAni\");\r\n                //this.mianCamera.node.position = this.curCameraPos;\r\n            })\r\n            .start();\r\n    }\r\n    continueGame() {\r\n        // 恢复初始位置和旋转\r\n        this.mianCamera.node.setPosition(this.mainCameraPos);\r\n        this.mianCamera.node.setRotation(this.mainCameraRot);\r\n        this.player.setPosition(this.playerPos);\r\n        this.player.setRotation(this.playerRot);\r\n\r\n        this.arrowTower.active = false;\r\n        let arrowTowerModel = this.arrowTower.getChildByName(\"HuoChaiHeJiaTa\").getChildByName(\"model\").getChildByName(\"L_prp_HuoChaiHe_jt_Skin_V001\")\r\n        arrowTowerModel.getChildByName(\"HuoChaiHe\").getChildByName(\"HuoChaiGun\").active = true;\r\n        this.turret.active = false;\r\n        this.block1.active = false;\r\n        this.block2.active = false;\r\n        this.beetle.active = false;\r\n        this.attackFlower.active = false;\r\n\r\n        this.arrowTowerArea.active = true;\r\n        this.turretArea.active = false;\r\n        this.block1Area.active = false;\r\n        this.block2Area.active = false;\r\n        this.beetleArea.active = false;\r\n        this.beetleArea1.active = false;\r\n        this.attackFlowerArea.active = false;\r\n\r\n        this.bubble = this.buidingAreaParent.getChildByName(\"qipao\")\r\n        this.bubble.active = false;\r\n        this.beetleArea1.active = false;\r\n        this.continueShowLable();\r\n\r\n        // 调用函数处理不同路径的物体\r\n        this.disableColliderAndRigidBody(\"Physice/UI_paota\");\r\n        this.disableColliderAndRigidBody(\"Physice/UI_jianta\");\r\n        this.disableColliderAndRigidBody(\"Physice/UI_jiachong\");\r\n    }\r\n    // 定义一个通用函数来禁用物体的碰撞器和刚体\r\n    disableColliderAndRigidBody(path) {\r\n        const obj = find(path);\r\n        if (!obj) return;\r\n\r\n        const collider = obj.getComponent(BoxCollider);\r\n        if (collider) collider.enabled = false;\r\n\r\n        const rigidBody = obj.getComponent(RigidBody);\r\n        if (rigidBody) rigidBody.enabled = false;\r\n    }\r\n    continueShowLable() {\r\n        GlobeVariable.handOverArea.forEach(element => {\r\n            const passData = GlobeVariable.handVoer[element];\r\n            let nodes = this.buidingAreaParent.getChildByName(element)\r\n            if (nodes) {\r\n                let lab = nodes.getChildByName(\"UnlockTileLabel\")?.getComponent(Label)\r\n                lab.string = passData.maxCoin + \"\"\r\n\r\n                let sp = nodes.getChildByName(\"progress\").getComponent(Sprite);\r\n                sp.fillRange = 0\r\n            }\r\n            // passData.isShow = true;\r\n            // passData.showCoin = passData.maxCoin;\r\n        })\r\n        this.bubble.getChildByName(\"qipao\").getChildByName(\"UnlockTileLabel-001\").getComponent(Label).string = GlobeVariable.handVoer[\"UI_jiachong-001\"].maxCoin + \"\";\r\n\r\n    }\r\n    bubbleAniSpeed(speed: number = 0.7) {\r\n        let ani = this.bubble.getComponent(Animation);\r\n        let state = ani.getState(\"qipaohuxi\");\r\n        if (state) {\r\n            state.speed = speed;\r\n        }\r\n        ani.play(\"qipaohuxi\")\r\n\r\n    }\r\n\r\n    showLable() {\r\n        GlobeVariable.handOverArea.forEach(element => {\r\n            const passData = GlobeVariable.handVoer[element];\r\n            let nodes = this.buidingAreaParent.getChildByName(element)\r\n            if (nodes) {\r\n                let lab = nodes.getChildByName(\"UnlockTileLabel\")?.getComponent(Label)\r\n                lab.string = passData.maxCoin + \"\"\r\n            }\r\n            // passData.isShow = true;\r\n            // passData.showCoin = passData.maxCoin;\r\n        })\r\n        this.bubble.getChildByName(\"qipao\").getChildByName(\"UnlockTileLabel-001\").getComponent(Label).string = GlobeVariable.handVoer[\"UI_jiachong-001\"].maxCoin + \"\";\r\n\r\n    }\r\n\r\n\r\n    setBubbleLable() {\r\n        let remaining = GlobeVariable.handVoer[\"UI_jiachong-001\"].maxCoin - GlobeVariable.handVoer[\"UI_jiachong-001\"].showCoin;//passData.curCoin;\r\n        // 处理边界值\r\n        remaining = Math.max(0, remaining);\r\n        this.bubble.getChildByName(\"qipao\").getChildByName(\"UnlockTileLabel-001\").getComponent(Label).string = remaining + \"\";\r\n        let sp = this.bubble.getChildByName(\"qipao\").getChildByName(\"qipao-001\").getComponent(Sprite);\r\n        sp.fillRange = GlobeVariable.handVoer[\"UI_jiachong-001\"].showCoin / GlobeVariable.handVoer[\"UI_jiachong-001\"].maxCoin;\r\n    }\r\n\r\n\r\n    protected start(): void {\r\n        this.buidingAreaParent.children.forEach(element => {\r\n            element.active = false;\r\n        });\r\n        this.buidingParent.children.forEach(element => {\r\n            element.active = false;\r\n        });\r\n        this.arrowTower.active = true;\r\n        this.scheduleOnce(() => {\r\n            this.arrowTower.active = false;\r\n        }, 0);\r\n        this.flower.active = true;\r\n        this.arrowTowerArea.active = true;\r\n        //临时功能\r\n       // this.attackFlower.active = true;\r\n\r\n\r\n    }\r\n    reunBlock1() {\r\n        return this.block1Area.active;\r\n    }\r\n    retunBeetle1() {\r\n        return this.beetleArea1.active;\r\n    }\r\n\r\n\r\n    restBlock1() {\r\n        this.block1Area.active = true;\r\n        const sp = this.block1Area.getChildByName(\"progress\").getComponent(Sprite);\r\n        const lb = this.block1Area.getChildByName(\"UnlockTileLabel\").getComponent(Label);\r\n\r\n        // 缓存当前关卡数据\r\n        const passData = GlobeVariable.handVoer[this.block1Area.name];\r\n        passData.curCoin = 0;\r\n        passData.showCoin = 0;//passData.curCoin;\r\n        sp.fillRange = 0;\r\n        lb.string = passData.maxCoin + \"\";\r\n\r\n    }\r\n    //显示甲虫的气泡\r\n    showBeetleBubble() {\r\n        this.bubble.active = true;\r\n        this.bubbleAniSpeed();\r\n        //  this.bubble.getChildByName(\"qipao_red\").active = false;\r\n        this.beetleArea1.active = true;\r\n    }\r\n    //显示甲虫的气泡\r\n    hideBeetleBubble(areaName: string) {\r\n        // 缓存当前关卡数据\r\n        const passData = GlobeVariable.handVoer[areaName];\r\n        passData.curCoin = 0;\r\n        passData.showCoin = 0;//passData.curCoin;\r\n\r\n        GlobeVariable.beetleIsMove = true;\r\n        GlobeVariable.beetleLockNum++;\r\n        SoundManager.Instance.playAudio(\"jiachongchongfenghao\");\r\n\r\n        this.bubble.active = false;\r\n        //this.bubble.getChildByName(\"qipao_red\").active = true;\r\n        this.beetleArea1.active = false;\r\n        let sp = this.bubble.getChildByName(\"qipao\").getChildByName(\"qipao-001\").getComponent(Sprite);\r\n        sp.fillRange = 0;\r\n        this.bubble.getChildByName(\"qipao\").getChildByName(\"UnlockTileLabel-001\").getComponent(Label).string = GlobeVariable.handVoer[\"UI_jiachong-001\"].maxCoin + \"\";\r\n    }\r\n    //显示拦截拒马解锁区域\r\n    showUIBlock1Area() {\r\n        this.block1Area.active = true;\r\n    }\r\n    showUIBlock2Area() {\r\n        this.block2Area.active = true;\r\n    }\r\n    //甲虫骑士解锁区域\r\n    showUIBeetleArea() {\r\n\r\n        this.beetleArea.active = true;\r\n    }\r\n    //攻击的花解锁区域  \r\n    showUIAttackFlowerArea() {\r\n        this.attackFlowerArea.active = true;\r\n    }\r\n    //箭塔解锁区域\r\n\r\n    showUIArrowTowerArea() {\r\n\r\n        this.arrowTowerArea.active = true;\r\n    }\r\n    //炮塔解锁区域\r\n    showUITurretArea() {\r\n        this.turretArea.active = true;\r\n    }\r\n    private curCameraPos: Vec3 = new Vec3();\r\n    cameraMove(){\r\n        this.curCameraPos = this.mianCamera.node.position.clone();\r\n        tween(this.mianCamera.node)\r\n            .to(1.5, { position: new Vec3(118, 111, 66) })\r\n            .to(1.5, { position: this.curCameraPos })\r\n            .call(() => {\r\n                GlobeVariable.isJoyStickBan = false;\r\n                //this.mianCamera.node.position = this.curCameraPos;\r\n            })\r\n            .start();\r\n    }\r\n    /**\r\n     * 显示区域建筑\r\n     * @param areaName 区域名称\r\n     */\r\n    public showUIBuiding(areaName: string) {\r\n        if (areaName == \"UI_jianta\") { //解锁箭塔后显示拒马交付区域\r\n            const jiantou = find(\"Physice/UI_jianta\");\r\n            const collider = jiantou.getComponent(BoxCollider);\r\n            if (collider) {\r\n                collider.enabled = true;\r\n            }\r\n            const rigidBody = jiantou.getComponent(RigidBody);\r\n            if (rigidBody) {\r\n                rigidBody.enabled = true;\r\n            }\r\n\r\n            this.arrowTower.active = true;\r\n            SoundManager.Instance.playAudio(\"jiesuo\");\r\n            GlobeVariable.isStartGame = true\r\n            App.sceneNode.enemyParent.active = true;\r\n            this.showUIBlock1Area();\r\n            App.guideManager.setGuideStepCompLate(1);\r\n            App.guideManager.nexStep();\r\n            App.guideManager.nexPhase();\r\n        }\r\n        if (areaName == \"UI_juma\") {\r\n            this.block1.active = true;\r\n            this.block1.getComponent(Animation).play(\"juma01chuxian\")\r\n            SoundManager.Instance.playAudio(\"jiesuo\");\r\n            GlobeVariable.isBlock = true;\r\n            if (GlobeVariable.isFirstBlock) {\r\n                this.showUITurretArea();\r\n                App.guideManager.setGuideStepCompLate(2);\r\n                App.guideManager.nexStep();\r\n                App.guideManager.nexPhase();\r\n            }\r\n            GlobeVariable.blockLockNum++;\r\n        }\r\n        if (areaName == \"UI_paota\") {\r\n            const jiantou = find(\"Physice/UI_paota\");\r\n            const collider = jiantou.getComponent(BoxCollider);\r\n            if (collider) {\r\n                collider.enabled = true;\r\n            }\r\n            const rigidBody = jiantou.getComponent(RigidBody);\r\n            if (rigidBody) {\r\n                rigidBody.enabled = true;\r\n            }\r\n            this.turret.active = true;\r\n            SoundManager.Instance.playAudio(\"jiesuo\");\r\n            GlobeVariable.enemySpiderNumBig = 3;\r\n          \r\n            this.showUIAttackFlowerArea();\r\n            App.guideManager.setGuideStepCompLate(3);\r\n            App.guideManager.nexStep();\r\n           // App.guideManager.nexPhase();\r\n\r\n        }\r\n        if (areaName == \"UI_juma-001\") {\r\n\r\n            //this.block2.active = true;\r\n            this.playerAnim.play(\"endAni\");\r\n            SoundManager.Instance.playAudio(\"jiesuo\");\r\n            setTimeout(() => {\r\n                App.sceneNode.GameEnd.active = true;\r\n                App.sceneNode.GameEnd.getComponent(GameEndManager).showGameEnd(1);\r\n\r\n            }, 2000);\r\n            GlobeVariable.isGameEnd = true;\r\n        }\r\n        if (areaName == \"UI_jiachong\") {\r\n            const jiantou = find(\"Physice/UI_jiachong\");\r\n            const collider = jiantou.getComponent(BoxCollider);\r\n            if (collider) {\r\n                collider.enabled = true;\r\n            }\r\n            const rigidBody = jiantou.getComponent(RigidBody);\r\n            if (rigidBody) {\r\n                rigidBody.enabled = true;\r\n            }\r\n            this.beetle.active = true;\r\n            SoundManager.Instance.playAudio(\"jiesuo\");\r\n            GlobeVariable.beetleIsMove = true;\r\n            SoundManager.Instance.playAudio(\"jiachongchongfenghao\");\r\n            \r\n            GlobeVariable.beetleLockNum++;\r\n            App.guideManager.setGuideStepCompLate(5);\r\n            App.guideManager.nexStep();\r\n            App.guideManager.nexPhase();\r\n\r\n        }\r\n        if (areaName == \"UI_jiachong-001\") {\r\n            \r\n            this.hideBeetleBubble(areaName);\r\n            this.showUIBlock2Area();\r\n            this.guildMoveCamera();\r\n\r\n        }\r\n        if (areaName == \"UI_shirenhua\") {\r\n            SoundManager.Instance.playAudio(\"jiesuo\");\r\n            this.attackFlower.active = true;\r\n            GlobeVariable.isJoyStickBan = true;\r\n            this.showUIBeetleArea();\r\n            this.cameraMove();\r\n            App.guideManager.setGuideStepCompLate(4);\r\n            App.guideManager.nexStep();\r\n            App.guideManager.nexPhase();\r\n            // GlobeVariable.beetleLockNum++;\r\n            // this.hideBeetleBubble(areaName);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}