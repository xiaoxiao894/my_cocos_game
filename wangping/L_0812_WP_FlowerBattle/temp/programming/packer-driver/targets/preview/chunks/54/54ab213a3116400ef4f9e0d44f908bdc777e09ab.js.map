{"version":3,"sources":["file:///D:/Cocos/PlayAble/L_0812_WP_FlowerBattle/assets/JavaScript/App.ts"],"names":["_decorator","Component","instantiate","Node","PlayerController","SceneNode","ResourceManager","GlobeVariable","NodePoolManager","GameManager","EnemyController","DropController","MapShowController","GoldMineController","super_html_playable","BeetleController","GuideManager","SoundManager","DataManager","ccclass","property","App","gameManager","onLoad","Instance","preloadAudioClips","sceneNode","node","getComponent","mapShowController","root","poolManager","resManager","instance","dataManager","init","initRes","beetleController","playerController","enemyController","goldMineController","dropController","initPlayer","guideManager","startGame","prefab","loadPrefab","prefabPath","EnemySpider","initPool","entifyName","prefabL","EnemySpiderL","prefabBlood","BloodBar","fireArrow","FireArrow","turret","TurretBullet","beetle","Beetle","prefabCoin","Coin","prefabArrow3D","Guid_Arrow3D","guidArrow3D","prefabArrowPath","Guid_ArrowPath","prefabFlowerTxPath","FlowerTx","prefabTurretTxPath","TurretTx","prefabTurretBombTxPath","TurretBombTx","prefabArrowTxPath","ArrowTX","prefabBeetleCollideTxPath","BeetleCollideTx","start","google_play","appstore","set_google_play_url","set_app_store_url","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node } from 'cc';\r\nimport { PlayerController } from './Entitys/PlayerController';\r\nimport { SceneNode } from './SceneNode';\r\nimport { ResourceManager } from './core/ResourceManager';\r\nimport { GlobeVariable } from './core/GlobeVariable';\r\nimport { NodePoolManager } from './core/NodePoolManager';\r\nimport { GameManager } from './GameManager';\r\nimport { EnemyController } from './Entitys/EnemyController';\r\nimport DropController from './Entitys/DropController';\r\nimport { MapShowController } from './MapShowController';\r\nimport GoldMineController from './Entitys/GoldMineController';\r\nimport super_html_playable from './core/super_html_playable';\r\nimport { BeetleController } from './Entitys/BeetleController';\r\nimport { GuideManager } from './Guide/GuideManager';\r\nimport { SoundManager } from './core/SoundManager';\r\nimport { DataManager } from './data/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('App')\r\nexport class App extends Component {\r\n    //游戏的主入口所有入口都在这个类中\r\n    public static playerController: PlayerController = null;\r\n    public static enemyController: EnemyController = null;\r\n    public static beetleController: BeetleController = null;\r\n\r\n    public static sceneNode: SceneNode = null;\r\n    public static resManager: ResourceManager = null;\r\n    public static poolManager: NodePoolManager = null;\r\n    public static dropController: DropController = null;\r\n    public static mapShowController: MapShowController = null;\r\n    public static goldMineController: GoldMineController = null;\r\n    public static dataManager:DataManager  = null;\r\n    public static guidArrow3D: Node = null;\r\n    private gameManager: GameManager = null;\r\n    public static gameManager: GameManager = null;\r\n    public static guideManager: GuideManager = null;\r\n\r\n    //public static soundManager: SoundManager = null;\r\n    @property(Node)\r\n    private root: Node = null;\r\n    protected async onLoad() {\r\n        SoundManager.Instance.preloadAudioClips();\r\n        App.sceneNode = this.node.getComponent(SceneNode);\r\n        App.mapShowController = this.root.getComponent(MapShowController);\r\n        App.poolManager = NodePoolManager.Instance;\r\n        App.resManager = ResourceManager.instance;\r\n        App.dataManager = DataManager.Instance;\r\n        await App.dataManager.init();\r\n        await this.initRes()\r\n        // App.soundManager = SoundManager.Instance;\r\n  \r\n        App.beetleController = BeetleController.Instance;\r\n        App.playerController = PlayerController.Instance;\r\n        App.enemyController = EnemyController.Instance;\r\n        App.enemyController.init();\r\n        App.goldMineController = GoldMineController.Instance;\r\n        App.dropController = DropController.Instance;\r\n        App.playerController.initPlayer();\r\n        App.guideManager = GuideManager.Instance;\r\n        this.gameManager = new GameManager();\r\n        App.gameManager = this.gameManager;\r\n        this.gameManager.startGame();\r\n\r\n\r\n    }\r\n    /**应该放在加载进度中  没有进度在次调用 */\r\n    async initRes() {\r\n        // //创建敌人\r\n        let prefab = await App.resManager.loadPrefab(GlobeVariable.prefabPath.EnemySpider)\r\n        if (prefab) {\r\n            App.poolManager.initPool(prefab, 100, GlobeVariable.entifyName.EnemySpider);\r\n        }\r\n        // //创建敌人\r\n        let prefabL = await App.resManager.loadPrefab(GlobeVariable.prefabPath.EnemySpiderL)\r\n        if (prefabL) {\r\n            App.poolManager.initPool(prefabL, 100, GlobeVariable.entifyName.EnemySpiderL);\r\n        }\r\n        //创建血条\r\n        let prefabBlood = await App.resManager.loadPrefab(GlobeVariable.prefabPath.BloodBar);\r\n        if (prefabBlood) {\r\n            App.poolManager.initPool(prefabBlood, 100, GlobeVariable.entifyName.BloodBar);\r\n        }\r\n        //创建火柴棍箭矢\r\n        let fireArrow = await App.resManager.loadPrefab(GlobeVariable.prefabPath.FireArrow);\r\n        if (fireArrow) {\r\n            App.poolManager.initPool(fireArrow, 100, GlobeVariable.entifyName.FireArrow);\r\n        }\r\n\r\n        //创建炮塔胶囊\r\n        let turret = await App.resManager.loadPrefab(GlobeVariable.prefabPath.TurretBullet);\r\n        if (turret) {\r\n            App.poolManager.initPool(turret, 100, GlobeVariable.entifyName.TurretBullet);\r\n        }\r\n\r\n        //创建炮塔胶囊\r\n        let beetle = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Beetle);\r\n        if (beetle) {\r\n            App.poolManager.initPool(beetle, 100, GlobeVariable.entifyName.Beetle);\r\n        }\r\n        //创建金币\r\n        let prefabCoin = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Coin);\r\n        if (prefabCoin) {\r\n            App.poolManager.initPool(prefabCoin, 100, GlobeVariable.entifyName.Coin);\r\n        }\r\n\r\n        //箭头3d \r\n        let prefabArrow3D = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Guid_Arrow3D);\r\n        App.guidArrow3D = instantiate(prefabArrow3D);\r\n\r\n        //箭头路径\r\n        let prefabArrowPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.Guid_ArrowPath);\r\n        if (prefabArrowPath) {\r\n            App.poolManager.initPool(prefabArrowPath, 10, GlobeVariable.entifyName.Guid_ArrowPath);\r\n        }\r\n\r\n        //花瓣特效\r\n        let prefabFlowerTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.FlowerTx);\r\n        if (prefabFlowerTxPath) {\r\n            App.poolManager.initPool(prefabFlowerTxPath, 10, GlobeVariable.entifyName.FlowerTx);\r\n\r\n        }\r\n        //炮塔攻击特效\r\n        let prefabTurretTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.TurretTx);\r\n        if (prefabTurretTxPath) {\r\n            App.poolManager.initPool(prefabTurretTxPath, 22, GlobeVariable.entifyName.TurretTx);\r\n        }\r\n        //炮塔攻击特效\r\n        let prefabTurretBombTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.TurretBombTx);\r\n        if (prefabTurretBombTxPath) {\r\n            App.poolManager.initPool(prefabTurretBombTxPath, 10, GlobeVariable.entifyName.TurretBombTx);\r\n\r\n        }\r\n        //-arrow 火柴攻击人物受击特效\r\n        let prefabArrowTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.ArrowTX);\r\n        if (prefabArrowTxPath) {\r\n            App.poolManager.initPool(prefabArrowTxPath, 10, GlobeVariable.entifyName.ArrowTX);\r\n        }\r\n\r\n\r\n        //-arrow  Beetle 攻击受击特效\r\n        let prefabBeetleCollideTxPath = await App.resManager.loadPrefab(GlobeVariable.prefabPath.BeetleCollideTx);\r\n        if (prefabBeetleCollideTxPath) {\r\n            App.poolManager.initPool(prefabBeetleCollideTxPath, 10, GlobeVariable.entifyName.BeetleCollideTx);\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n        const google_play = \"https://play.google.com/store/apps/details?gl=US&hl=en-US&id=com.gzgroup.lproject3\";\r\n        const appstore = \"https://play.google.com/store/apps/details?gl=US&hl=en-US&id=com.gzgroup.lproject3\";\r\n\r\n        super_html_playable.set_google_play_url(google_play);\r\n        super_html_playable.set_app_store_url(appstore);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        if (this.gameManager) {\r\n            this.gameManager.update(deltaTime);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n"]}