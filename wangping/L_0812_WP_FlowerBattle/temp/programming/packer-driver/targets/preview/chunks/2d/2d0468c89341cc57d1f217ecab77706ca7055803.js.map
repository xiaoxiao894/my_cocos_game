{"version":3,"sources":["file:///D:/Cocos/PlayAble/L_0812_WP_FlowerBattle/assets/JavaScript/State/MoveState.ts"],"names":["_decorator","State","CharacterType","MoveBase","SoundManager","ccclass","property","MoveState","moveBase","onEnter","callback","console","log","entity","getType","Player","characterSkeletalAnimation","error","crossFade","Instance","playRunBGM","onUpdate","dt","handleInput","onExit","stopRunBGM"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACFC,MAAAA,K;;AACEC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;2BAGjBO,S,WADZF,OAAO,CAAC,WAAD,C,gBAAR,MACaE,SADb;AAAA;AAAA,0BACqC;AAAA;AAAA;AAAA,eAEzBC,QAFyB,GAEJ,IAFI;AAAA;;AAGjCC,QAAAA,OAAO,CAACC,QAAD,EAA0C;AAC7CC,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AACA,cAAI,KAAKC,MAAL,CAAYC,OAAZ,MAAyB;AAAA;AAAA,8CAAcC,MAA3C,EAAmD;AAE/C;AACA,gBAAI,CAAC,KAAKF,MAAL,CAAYG,0BAAjB,EAA6C;AACzCL,cAAAA,OAAO,CAACM,KAAR,CAAc,YAAd;AACA;AACH;;AACD,iBAAKT,QAAL,GAAgB;AAAA;AAAA,uCAAhB,CAP+C,CAQ/C;;AACA,iBAAKK,MAAL,CAAYG,0BAAZ,CAAuCE,SAAvC,CAAiD,aAAjD,EAAgE,GAAhE;AAEH;;AACD;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,UAAtB;AAGH;;AAEDC,QAAAA,QAAQ,CAACC,EAAD,EAAa;AACjB,eAAKd,QAAL,CAAce,WAAd,CAA0BD,EAA1B,EAA8B,KAAKT,MAAnC;AACH;;AAEDW,QAAAA,MAAM,CAACd,QAAD,EAA0C;AAC5CC,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA;AAAA;AAAA,4CAAaO,QAAb,CAAsBM,UAAtB;AAEH;;AA9BgC,O","sourcesContent":["import { _decorator } from 'cc';\r\nimport State from './State';\r\nimport { CharacterType } from '../Entitys/Entity';\r\nimport { MoveBase } from './MoveBase';\r\nimport { App } from '../App';\r\nimport { SoundManager } from '../core/SoundManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MoveState')\r\nexport class MoveState extends State {\r\n\r\n    private moveBase: MoveBase = null;\r\n    onEnter(callback?: (...agrs: unknown[]) => void) {\r\n        console.log(\"进入移动状态\")\r\n        if (this.entity.getType() == CharacterType.Player) {\r\n\r\n            // 检查骨骼动画组件是否存在\r\n            if (!this.entity.characterSkeletalAnimation) {\r\n                console.error(\"骨骼动画组件未初始化\");\r\n                return;\r\n            }\r\n            this.moveBase = new MoveBase();\r\n            // this.entity.characterSkeletalAnimation.play(\"Run_Anna_kt\")\r\n            this.entity.characterSkeletalAnimation.crossFade(\"Run_Anna_kt\", 0.1);\r\n\r\n        }\r\n        SoundManager.Instance.playRunBGM();\r\n\r\n\r\n    }\r\n\r\n    onUpdate(dt: number) {\r\n        this.moveBase.handleInput(dt, this.entity);\r\n    }\r\n\r\n    onExit(callback?: (...agrs: unknown[]) => void) {\r\n        console.log(\"退出移动状态\")\r\n        SoundManager.Instance.stopRunBGM();\r\n\r\n    }\r\n\r\n\r\n}"]}