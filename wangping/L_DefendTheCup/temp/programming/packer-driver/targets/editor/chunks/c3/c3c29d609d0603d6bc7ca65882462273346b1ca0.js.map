{"version":3,"sources":["file:///D:/Cocos/PlayAble/L_DefendTheCup/assets/JavaScript/Sounds/SoundManager.ts"],"names":["_decorator","assert","AudioClip","AudioSource","Component","Node","DataManager","ccclass","property","SoundManager","playRingSoundDynamically","name","delay","setTimeout","audioNode","audioSource","addComponent","clip","skillSound1","skillSound2","skillSound3","skillSound4","skillSound5","volume","play","node","addChild","once","EventType","ENDED","destroy","playIconSound","IconSound","start","Instance","soundManager","playLoopAudio","BgSound","stop","bgSoundClip","loop","duration","getDuration","scheduleOnce","PlayerAttackSoundPlay","PlayerAttackSound","IconSoundPlay","BuildingUnlockSoundPlay","BuildingUnlockSound","ClickCardSoundPlay","ClickCardSound","CardEjectSoundPlay","CardEjectSound","CreatePartnerSoundPlay","CreatePartnerSound","SkillSound1Play","SkillSound1","SkillSound2Play","SkillSound2","SkillSound3Play","SkillSound3","SkillSound4Play","SkillSound4","SkillSound5Play","SkillSound5","WeaponPickingUpSoundPlay","WeaponPickingUpSound","WinSoundPlay","WinSound"],"mappings":"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","sourcesContent":["import { _decorator, assert, AudioClip, AudioSource, Component, Node, resources } from 'cc';\r\nimport { DataManager } from '../Global/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SoundManager')\r\nexport class SoundManager extends Component {\r\n    @property(AudioSource)\r\n    BgSound: AudioSource = null;\r\n\r\n    @property(AudioClip)\r\n    bgSoundClip: AudioClip = null;\r\n\r\n    @property(AudioSource)\r\n    PlayerAttackSound: AudioSource = null;\r\n\r\n    @property(AudioClip)\r\n    IconSound: AudioClip = null;\r\n\r\n    @property(AudioSource)\r\n    BuildingUnlockSound: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    CardEjectSound: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    ClickCardSound: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    CreatePartnerSound: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    SkillSound1: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    SkillSound2: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    SkillSound3: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    SkillSound4: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    SkillSound5: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    WeaponPickingUpSound: AudioSource = null;\r\n\r\n    @property(AudioSource)\r\n    WinSound: AudioSource = null;\r\n\r\n    @property(AudioClip)\r\n    skillSound1: AudioClip = null;\r\n\r\n    @property(AudioClip)\r\n    skillSound2: AudioClip = null;\r\n\r\n    @property(AudioClip)\r\n    skillSound3: AudioClip = null;\r\n\r\n    @property(AudioClip)\r\n    skillSound4: AudioClip = null;\r\n\r\n    @property(AudioClip)\r\n    skillSound5: AudioClip = null;\r\n\r\n    playRingSoundDynamically(name: string, delay: number) {\r\n        setTimeout(() => {\r\n            // 创建音效节点\r\n            const audioNode = new Node('SkillRingAudio');\r\n            const audioSource = audioNode.addComponent(AudioSource);\r\n            if (name == \"Partner1-L\") {\r\n                audioSource.clip = this.skillSound1;\r\n            } else if (name == \"Partner2-L\") {\r\n                audioSource.clip = this.skillSound2;\r\n            } else if (name == \"Partner3-L\") {\r\n                audioSource.clip = this.skillSound3;\r\n            } else if (name == \"Partner4-L\") {\r\n                audioSource.clip = this.skillSound4;\r\n            } else if (name == \"Partner5-L\") {\r\n                audioSource.clip = this.skillSound5;\r\n            }\r\n\r\n            audioSource.volume = 1.0;\r\n            audioSource.play();\r\n\r\n            // 添加到场景中\r\n            this.node.addChild(audioNode);\r\n\r\n            // 自动销毁\r\n            audioSource.node.once(AudioSource.EventType.ENDED, () => {\r\n                audioNode.destroy();\r\n            });\r\n        }, delay * 1000);\r\n    }\r\n\r\n    playIconSound() {\r\n        // 创建音效节点\r\n        const audioNode = new Node('SkillRingAudio');\r\n        const audioSource = audioNode.addComponent(AudioSource);\r\n        audioSource.clip = this.IconSound;\r\n        audioSource.volume = 1.0;\r\n        audioSource.play();\r\n\r\n        // 添加到场景中\r\n        this.node.addChild(audioNode);\r\n\r\n        // 自动销毁\r\n        audioSource.node.once(AudioSource.EventType.ENDED, () => {\r\n            audioNode.destroy();\r\n        });\r\n    }\r\n\r\n    start() {\r\n        DataManager.Instance.soundManager = this;\r\n    }\r\n\r\n    playLoopAudio() {\r\n        this.BgSound.stop();\r\n        this.BgSound.clip = this.bgSoundClip;\r\n        this.BgSound.loop = false;\r\n        this.BgSound.play();\r\n\r\n        const duration = this.bgSoundClip.getDuration();\r\n\r\n        // 提前 0.05 秒调度下一轮播放，避免停顿\r\n        this.scheduleOnce(() => {\r\n            this.playLoopAudio();\r\n        }, duration - 0.08);\r\n    }\r\n\r\n    PlayerAttackSoundPlay() {\r\n        assert(this.PlayerAttackSound);\r\n        this.PlayerAttackSound.play();\r\n    }\r\n\r\n    IconSoundPlay() {\r\n        assert(this.IconSound);\r\n        this.IconSound.play();\r\n    }\r\n\r\n    BuildingUnlockSoundPlay() {\r\n        assert(this.BuildingUnlockSound);\r\n        this.BuildingUnlockSound.play();\r\n    }\r\n\r\n    ClickCardSoundPlay() {\r\n        assert(this.ClickCardSound);\r\n        this.ClickCardSound.play();\r\n    }\r\n\r\n    CardEjectSoundPlay() {\r\n        assert(this.CardEjectSound);\r\n        this.CardEjectSound.play();\r\n    }\r\n\r\n    CreatePartnerSoundPlay() {\r\n        assert(this.CreatePartnerSound);\r\n        this.CreatePartnerSound.play();\r\n    }\r\n\r\n    SkillSound1Play() {\r\n        assert(this.SkillSound1);\r\n        this.SkillSound1.play();\r\n    }\r\n\r\n    SkillSound2Play() {\r\n        assert(this.SkillSound2);\r\n        this.SkillSound2.play();\r\n    }\r\n\r\n    SkillSound3Play() {\r\n        assert(this.SkillSound3);\r\n        this.SkillSound3.play();\r\n    }\r\n\r\n    SkillSound4Play() {\r\n        assert(this.SkillSound4);\r\n        this.SkillSound4.play();\r\n    }\r\n\r\n    SkillSound5Play() {\r\n        assert(this.SkillSound5);\r\n        this.SkillSound5.play();\r\n    }\r\n\r\n    WeaponPickingUpSoundPlay() {\r\n        assert(this.WeaponPickingUpSound);\r\n        this.WeaponPickingUpSound.play();\r\n    }\r\n\r\n\r\n    WinSoundPlay() {\r\n        assert(this.WinSound);\r\n        this.WinSound.play();\r\n    }\r\n}\r\n\r\n\r\n"]}