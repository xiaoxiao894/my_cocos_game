{"version":3,"sources":["file:///D:/Cocos/PlayAble/L_DefendTheCup/assets/JavaScript/Common/ItemPool.ts"],"names":["ItemPool","instantiate","NodePool","DataManager","constructor","type","num","_itemPool","_type","_prefab","Instance","prefabMap","get","i","prefab","itemNode","active","put","getItem","node","putItem","destroy"],"mappings":";;;mHAIqBA,Q;;;;;;;;;;;;;;;;;;;AAJZC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,Q,OAAAA,Q;;AACnBC,MAAAA,W,iBAAAA,W;;;;;;;;;yBAGYH,Q,GAAN,MAAMA,QAAN,CAAe;AAOnBI,QAAAA,WAAW,CAACC,IAAD,EAAuBC,GAAvB,EAAwC;AAAA,cAAjBA,GAAiB;AAAjBA,YAAAA,GAAiB,GAAH,CAAG;AAAA;;AAAA,eALlDC,SAKkD;AAL7B;AAK6B,eAHlDC,KAGkD;AAH3B;AAG2B,eAFlDC,OAEkD;AACtD,eAAKD,KAAL,GAAaH,IAAb;AACA,eAAKE,SAAL,GAAiB,IAAIL,QAAJ,EAAjB;AACA,eAAKO,OAAL,GAAe;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,SAArB,CAA+BC,GAA/B,CAAmC,KAAKJ,KAAxC,CAAf;;AACA,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,GAApB,EAAyBO,CAAC,EAA1B,EAA8B;AAC1B,gBAAMC,MAAM,GAAG;AAAA;AAAA,4CAAYJ,QAAZ,CAAqBC,SAArB,CAA+BC,GAA/B,CAAmC,KAAKJ,KAAxC,CAAf;;AACA,gBAAIM,MAAJ,EAAY;AACR,kBAAIC,QAAQ,GAAGd,WAAW,CAACa,MAAD,CAA1B;AACAC,cAAAA,QAAQ,CAACC,MAAT,GAAkB,KAAlB;;AACA,mBAAKT,SAAL,CAAeU,GAAf,CAAmBF,QAAnB;AACH;AACJ;AACJ;;AAGMG,QAAAA,OAAO,GAAS;AACnB,cAAI,CAAC,KAAKT,OAAV,EAAmB;AACf,mBAAO,IAAP;AACH;;AACD,cAAIU,IAAU,GAAGlB,WAAW,CAAC,KAAKQ,OAAN,CAA5B;AACAU,UAAAA,IAAI,CAACH,MAAL,GAAc,IAAd;AACA,iBAAOG,IAAP;AACH;;AAEMC,QAAAA,OAAO,CAACL,QAAD,EAAiB;AAC3BA,UAAAA,QAAQ,CAACM,OAAT,GAD2B,CAE3B;AACA;AACH;;AAnCyB,O","sourcesContent":["import { instantiate, Node, NodePool, Prefab } from \"cc\";\r\nimport { DataManager } from \"../Global/DataManager\";\r\nimport { EntityTypeEnum } from \"../Enum/Index\";\r\n\r\nexport default class ItemPool {\r\n\r\n    private _itemPool: NodePool; //缓存池\r\n\r\n    private _type: EntityTypeEnum; //类型\r\n    private _prefab: Prefab;\r\n\r\n    public constructor(type: EntityTypeEnum, num: number = 8) {\r\n        this._type = type;\r\n        this._itemPool = new NodePool();\r\n        this._prefab = DataManager.Instance.prefabMap.get(this._type);\r\n        for (let i = 0; i < num; i++) {\r\n            const prefab = DataManager.Instance.prefabMap.get(this._type)\r\n            if (prefab) {\r\n                let itemNode = instantiate(prefab);\r\n                itemNode.active = false;\r\n                this._itemPool.put(itemNode);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public getItem(): Node {\r\n        if (!this._prefab) {\r\n            return null;\r\n        }\r\n        let node: Node = instantiate(this._prefab);\r\n        node.active = true;\r\n        return node;\r\n    }\r\n\r\n    public putItem(itemNode: Node) {\r\n        itemNode.destroy();\r\n        // itemNode.active = false;\r\n        // this._itemPool.put(itemNode);\r\n    }\r\n}"]}