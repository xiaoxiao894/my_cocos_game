{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_0623_JHF_FaMuShengCun/assets/JavaScript/Pool/Pool.ts"],"names":["Pool","instantiate","NodePool","DataManager","constructor","type","num","_pool","_entityType","_prefab","Instance","prefabMap","get","i","prefab","itemNode","active","put","getItem","node","putItem","destroy"],"mappings":";;;mHAIqBA,I;;;;;;;;;;;;;;;;;;;AAJWC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,Q,OAAAA,Q;;AAE1CC,MAAAA,W,iBAAAA,W;;;;;;;;;yBAEYH,I,GAAN,MAAMA,IAAN,CAAW;AAKfI,QAAAA,WAAW,CAACC,IAAD,EAAuBC,GAAvB,EAAwC;AAAA,cAAjBA,GAAiB;AAAjBA,YAAAA,GAAiB,GAAH,CAAG;AAAA;;AAAA,eAJlDC,KAIkD;AAAA,eAHlDC,WAGkD;AAAA,eAFlDC,OAEkD;AACtD,eAAKD,WAAL,GAAmBH,IAAnB;AACA,eAAKE,KAAL,GAAa,IAAIL,QAAJ,EAAb;AACA,eAAKO,OAAL,GAAe;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,SAArB,CAA+BC,GAA/B,CAAmC,KAAKJ,WAAxC,CAAf;;AACA,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,GAApB,EAAyBO,CAAC,EAA1B,EAA8B;AAC1B,gBAAMC,MAAM,GAAG;AAAA;AAAA,4CAAYJ,QAAZ,CAAqBC,SAArB,CAA+BC,GAA/B,CAAmC,KAAKJ,WAAxC,CAAf;;AACA,gBAAIM,MAAJ,EAAY;AACR,kBAAIC,QAAQ,GAAGd,WAAW,CAACa,MAAD,CAA1B;AACAC,cAAAA,QAAQ,CAACC,MAAT,GAAkB,KAAlB;;AACA,mBAAKT,KAAL,CAAWU,GAAX,CAAeF,QAAf;AACH;AACJ;AACJ;;AAEMG,QAAAA,OAAO,GAAS;AACnB,cAAI,CAAC,KAAKT,OAAV,EAAmB;AACf,mBAAO,IAAP;AACH;;AAED,cAAIU,IAAU,GAAGlB,WAAW,CAAC,KAAKQ,OAAN,CAA5B;AACAU,UAAAA,IAAI,CAACH,MAAL,GAAc,IAAd;AAEA,iBAAOG,IAAP;AACH;;AAEMC,QAAAA,OAAO,CAACL,QAAD,EAAiB;AAC3BA,UAAAA,QAAQ,CAACC,MAAT,GAAkB,KAAlB;AACAD,UAAAA,QAAQ,CAACM,OAAT;AACH;;AAjCqB,O","sourcesContent":["import { _decorator, Component, instantiate, Node, NodePool, Prefab } from 'cc';\r\nimport { EntityTypeEnum } from '../Enum/Index';\r\nimport { DataManager } from '../Global/DataManager';\r\n\r\nexport default class Pool {\r\n    private _pool: NodePool;\r\n    private _entityType: EntityTypeEnum;\r\n    private _prefab: Prefab;\r\n\r\n    public constructor(type: EntityTypeEnum, num: number = 8) {\r\n        this._entityType = type;\r\n        this._pool = new NodePool();\r\n        this._prefab = DataManager.Instance.prefabMap.get(this._entityType);\r\n        for (let i = 0; i < num; i++) {\r\n            const prefab = DataManager.Instance.prefabMap.get(this._entityType)\r\n            if (prefab) {\r\n                let itemNode = instantiate(prefab);\r\n                itemNode.active = false;\r\n                this._pool.put(itemNode);\r\n            }\r\n        }\r\n    }\r\n\r\n    public getItem(): Node {\r\n        if (!this._prefab) {\r\n            return null;\r\n        }\r\n\r\n        let node: Node = instantiate(this._prefab);\r\n        node.active = true;\r\n\r\n        return node;\r\n    }\r\n\r\n    public putItem(itemNode: Node) {\r\n        itemNode.active = false;\r\n        itemNode.destroy();\r\n    }\r\n}\r\n\r\n\r\n"]}