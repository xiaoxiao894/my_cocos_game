{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_0623_JHF_FaMuShengCun/assets/JavaScript/Actor/ConveyerBeltManager.ts"],"names":["_decorator","Component","Node","tween","Vec3","DataManager","ccclass","property","ConveyerBeltManager","start","Instance","conveyerBeltManager","init","scheduleOnce","chuansongdaiAni","mianqianAni","children","chuansongdai","halfDur","duration","i","length","child","delay","delayBetween","to","scale","scaleUp","position","x","z","easing","scaleEnd","mianqian","baseScale","peakScale"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, tween, Vec3 } from 'cc';\r\nimport { DataManager } from '../Global/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ConveyerBeltManager')\r\nexport class ConveyerBeltManager extends Component {\r\n    @property(Node)\r\n    chuansongdai: Node = null;\r\n\r\n    @property(Node)\r\n    mianqian: Node = null;\r\n\r\n    @property\r\n    private delayBetween: number = 0.1;\r\n\r\n    @property\r\n    private scaleUp: number = 1.2;\r\n\r\n    @property\r\n    private scaleEnd: number = 1.0;\r\n\r\n    @property\r\n    private duration: number = 0.3; // 总时长（放大+缩小）\r\n\r\n    start() {\r\n        DataManager.Instance.conveyerBeltManager = this;\r\n    }\r\n\r\n    init() {\r\n        this.scheduleOnce(() => {\r\n            this.chuansongdaiAni();\r\n            this.mianqianAni();\r\n        })\r\n    }\r\n\r\n    chuansongdaiAni() {\r\n        const children = this.chuansongdai.children;\r\n        const halfDur = this.duration / 2;\r\n\r\n        for (let i = 0; i < children.length; i++) {\r\n            const child = children[i];\r\n            const delay = i * this.delayBetween;\r\n\r\n            tween(child)\r\n                .delay(delay)\r\n                .to(halfDur, { scale: new Vec3(this.scaleUp, this.scaleUp, this.scaleUp), position: new Vec3(child.position.x, 0.025, child.position.z) }, { easing: 'quadOut' })\r\n                .to(halfDur, { scale: new Vec3(this.scaleEnd, this.scaleEnd, this.scaleEnd) }, { easing: 'quadIn' })\r\n                .start();\r\n        }\r\n    }\r\n\r\n    mianqianAni() {\r\n        const children = this.mianqian.children;\r\n        const halfDur = this.duration / 2;\r\n\r\n        for (let i = 0; i < children.length; i++) {\r\n            const child = children[i];\r\n            const delay = i * this.delayBetween;\r\n\r\n            const baseScale = new Vec3(40, 40, 40); // 初始缩放\r\n            const peakScale = new Vec3(40, 40, 44); // 抛物线顶点\r\n\r\n            // 强制设置初始 x/y = 40\r\n            // child.setScale(baseScale);\r\n\r\n            tween(child)\r\n                .delay(delay)\r\n                .to(halfDur, { scale: peakScale }, { easing: 'quadOut' })\r\n                .to(halfDur, { scale: baseScale }, { easing: 'quadIn' })\r\n                .start();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}