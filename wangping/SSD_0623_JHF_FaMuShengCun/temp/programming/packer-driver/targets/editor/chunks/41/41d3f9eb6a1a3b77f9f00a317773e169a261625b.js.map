{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_0623_JHF_FaMuShengCun/assets/JavaScript/UI/GameEndManager.ts"],"names":["_decorator","Component","Label","Node","Sprite","tween","UIOpacity","Vec3","DataManager","super_html_playable","SoundManager","LanguageManager","ccclass","property","GameEndManager","isExecuteClickButton","start","Instance","gameEndManager","node","active","downloadLabel","download","getChildByName","getComponent","text","t","string","iconSpr","icon","UIPropertyManager","adaptationLanguageLogo","onEnable","init","hand","opacityCom","bg","addComponent","opacity","to","setScale","inst","playAudio","scale","delay","call","playFingerAndButtonAnim","repeatForever","onClickButton"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, Sprite, tween, UIOpacity, Vec3 } from 'cc';\r\nimport { DataManager } from '../Global/DataManager';\r\nimport super_html_playable from '../Common/super_html_playable';\r\nimport { SoundManager } from '../Common/SoundManager';\r\nimport { LanguageManager } from '../Language/LanguageManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameEndManager')\r\nexport class GameEndManager extends Component {\r\n    @property(Node)\r\n    bg: Node = null;\r\n\r\n    @property(Node)\r\n    icon: Node = null;\r\n\r\n    @property(Node)\r\n    download: Node = null;\r\n\r\n    @property(Node)\r\n    win: Node = null;\r\n\r\n    @property(Node)\r\n    hand: Node = null;\r\n\r\n    private isExecuteClickButton = false;\r\n\r\n    start() {\r\n        DataManager.Instance.gameEndManager = this;\r\n\r\n        this.node.active = false;\r\n\r\n        const downloadLabel = this.download?.getChildByName(\"Label\")?.getComponent(Label);\r\n        const text = LanguageManager.t('Download');\r\n        if (downloadLabel && text) {\r\n            downloadLabel.string = text;\r\n        }\r\n\r\n        const iconSpr = this.icon.getComponent(Sprite);\r\n        DataManager.Instance.UIPropertyManager.adaptationLanguageLogo(iconSpr);\r\n    }\r\n\r\n    onEnable() {\r\n        // this.scheduleOnce(() => {\r\n        //     if (!this.isExecuteClickButton) {\r\n        //         this.isExecuteClickButton = true;\r\n        //         this.onClickButton();\r\n        //     }\r\n        // }, 2);\r\n    }\r\n\r\n    init() {\r\n        this.hand.active = false;\r\n        this.node.active = true;\r\n        // 背景淡入\r\n        const opacityCom = this.bg.getComponent(UIOpacity) || this.bg.addComponent(UIOpacity);\r\n        opacityCom.opacity = 0;\r\n        tween(opacityCom)\r\n            .to(0.1, { opacity: 150 })\r\n            .start();\r\n\r\n        // 初始缩放\r\n        this.icon.setScale(0, 0, 0);\r\n        // this.win.setScale(0, 1, 1);\r\n        this.download.setScale(0, 1, 1);\r\n\r\n        SoundManager.inst.playAudio(\"DC_shengli\");\r\n\r\n        tween(this.icon)\r\n            .to(0.3, { scale: new Vec3(2.2, 2.2, 2.2) })\r\n            .to(0.3, { scale: new Vec3(2, 2, 2) })\r\n            .start();\r\n\r\n        tween(this.download)\r\n            .delay(0.3)\r\n            .to(0.3, { scale: new Vec3(2.1, 2.1, 2.1) })\r\n            .to(0.3, { scale: new Vec3(2, 2, 2) })\r\n            .call(() => {\r\n                this.hand.active = true;\r\n                this.playFingerAndButtonAnim();\r\n            })\r\n            .start();\r\n\r\n        // tween(this.win)\r\n        //     .delay(0.1)\r\n        //     .to(0.3, { scale: new Vec3(1.1, 1.1, 1.1) })\r\n        //     .to(0.3, { scale: new Vec3(1, 1, 1) })\r\n        //     .call(() => {\r\n        //         this.hand.active = true;\r\n        //         this.playFingerAndButtonAnim();\r\n        //     })\r\n        //     .start();\r\n    }\r\n\r\n    // 手指+按钮循环提示动画\r\n    playFingerAndButtonAnim() {\r\n        // 手指动画（0.9 -> 1 循环）\r\n        tween(this.hand)\r\n            .repeatForever(\r\n                tween()\r\n                    .to(0.3, { scale: new Vec3(0.3, 0.3, 0.3) })\r\n                    .to(0.3, { scale: new Vec3(0.4, 0.4, 0.4) })\r\n            )\r\n            .start();\r\n\r\n        // 按钮点击提示动画（1.0 -> 1.1 -> 1.0 循环）\r\n        // tween(this.download)\r\n        //     .repeatForever(\r\n        //         tween()\r\n        //             .to(0.3, { scale: new Vec3(1.1, 1.1, 1.1) })\r\n        //             .to(0.3, { scale: new Vec3(1, 1, 1) })\r\n        //     )\r\n        //     .start();\r\n    }\r\n\r\n    onClickButton() {\r\n        this.isExecuteClickButton = true;\r\n        super_html_playable.download();\r\n    }\r\n}\r\n\r\n\r\n"]}