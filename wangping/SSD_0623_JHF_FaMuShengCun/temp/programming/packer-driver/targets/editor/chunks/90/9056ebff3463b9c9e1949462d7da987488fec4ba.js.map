{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_0623_JHF_FaMuShengCun/assets/JavaScript/Actor/PartnerManager.ts"],"names":["_decorator","Animation","Component","ccclass","property","PartnerManager","_isWalkAttack","start","update","deltaTime","pauseAttackEffect","_onAttackFinished","anim","state","name","jack","node","getChildByName","txWalkAttack","active","walkingAttackEffects","walkAttackSprite","walkAttackAni","getComponent","once","EventType","FINISHED","_onWalkAttackFinished","play"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA2BC,MAAAA,S,OAAAA,S;;;;;;;;;OAE1C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;gCAGjBK,c,WADZF,OAAO,CAAC,gBAAD,C,gBAAR,MACaE,cADb,SACoCH,SADpC,CAC8C;AAAA;AAAA;AAAA,eAClCI,aADkC,GAClB,KADkB;AAAA;;AAG1CC,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB,CATyC,CAW1C;;;AACAC,QAAAA,iBAAiB,GAAG,CAChB;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACH;;AAEOC,QAAAA,iBAAiB,CAACC,IAAD,EAAkBC,KAAlB,EAAyC;AAC9D,cAAIA,KAAK,CAACC,IAAN,KAAe,WAAnB,EAAgC;AAC5B,kBAAMC,IAAI,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAb;AACA,kBAAMC,YAAY,GAAGH,IAAI,CAACE,cAAL,CAAoB,WAApB,CAArB;AACAC,YAAAA,YAAY,CAACC,MAAb,GAAsB,KAAtB;;AAEA,gBAAI,KAAKb,aAAT,EAAwB;AACpB,mBAAKA,aAAL,GAAqB,KAArB,CADoB,CAGpB;AACH;AACJ;AACJ,SAxCyC,CA0C1C;;;AACAc,QAAAA,oBAAoB,GAAG;AACnB,gBAAML,IAAI,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAb;AACA,gBAAMC,YAAY,GAAGH,IAAI,CAACE,cAAL,CAAoB,gBAApB,CAArB;AACAC,UAAAA,YAAY,CAACC,MAAb,GAAsB,IAAtB;AACA,gBAAME,gBAAgB,GAAGH,YAAY,CAACD,cAAb,CAA4B,QAA5B,CAAzB;;AAEA,cAAII,gBAAJ,EAAsB;AAClB,kBAAMC,aAAa,GAAGD,gBAAgB,CAACE,YAAjB,CAA8BtB,SAA9B,CAAtB;;AACA,gBAAIqB,aAAJ,EAAmB;AACfA,cAAAA,aAAa,CAACE,IAAd,CAAmBvB,SAAS,CAACwB,SAAV,CAAoBC,QAAvC,EAAiD,KAAKC,qBAAtD,EAA6E,IAA7E,EADe,CAEf;;AACAL,cAAAA,aAAa,QAAb,IAAAA,aAAa,CAAEM,IAAf,CAAoB,WAApB;AACH;AACJ;AACJ;;AAEOD,QAAAA,qBAAqB,CAACf,IAAD,EAAkBC,KAAlB,EAAyC;AAClE,cAAIA,KAAK,CAACC,IAAN,KAAe,WAAnB,EAAgC;AAC5B,kBAAMC,IAAI,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAb;AACA,kBAAMC,YAAY,GAAGH,IAAI,CAACE,cAAL,CAAoB,gBAApB,CAArB;AACAC,YAAAA,YAAY,CAACC,MAAb,GAAsB,KAAtB;AACH;AACJ;;AAjEyC,O","sourcesContent":["import { _decorator, Animation, AnimationState, Component, Node } from 'cc';\r\nimport { DataManager } from '../Global/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PartnerManager')\r\nexport class PartnerManager extends Component {\r\n    private _isWalkAttack = false;\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n\r\n    // 停顿攻击特效\r\n    pauseAttackEffect() {\r\n        // const jack = this.node.getChildByName(\"jack\");\r\n        // const txWalkAttack = jack.getChildByName(\"TX_attack\");\r\n        // txWalkAttack.active = true;\r\n        // const attackSprite = txWalkAttack.getChildByName(\"Sprite\");\r\n\r\n        // if (attackSprite) {\r\n        //     const walkAttackAni = attackSprite.getComponent(Animation);\r\n        //     if (walkAttackAni) {\r\n        //         walkAttackAni.once(Animation.EventType.FINISHED, this._onAttackFinished, this);\r\n\r\n        //         walkAttackAni.play(\"TX_Attack\");\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    private _onAttackFinished(anim: Animation, state: AnimationState) {\r\n        if (state.name === \"TX_Attack\") {\r\n            const jack = this.node.getChildByName(\"jack\");\r\n            const txWalkAttack = jack.getChildByName(\"TX_attack\");\r\n            txWalkAttack.active = false;\r\n\r\n            if (this._isWalkAttack) {\r\n                this._isWalkAttack = false;\r\n\r\n                // this.walkingAttackEffects();\r\n            }\r\n        }\r\n    }\r\n\r\n    // 走路攻击特效\r\n    walkingAttackEffects() {\r\n        const jack = this.node.getChildByName(\"jack\");\r\n        const txWalkAttack = jack.getChildByName(\"TX_walk_attack\");\r\n        txWalkAttack.active = true;\r\n        const walkAttackSprite = txWalkAttack.getChildByName(\"Sprite\");\r\n\r\n        if (walkAttackSprite) {\r\n            const walkAttackAni = walkAttackSprite.getComponent(Animation);\r\n            if (walkAttackAni) {\r\n                walkAttackAni.once(Animation.EventType.FINISHED, this._onWalkAttackFinished, this);\r\n                // walkAttackAni?.stop();\r\n                walkAttackAni?.play(\"TX_Attack\");\r\n            }\r\n        }\r\n    }\r\n\r\n    private _onWalkAttackFinished(anim: Animation, state: AnimationState) {\r\n        if (state.name === \"TX_Attack\") {\r\n            const jack = this.node.getChildByName(\"jack\");\r\n            const txWalkAttack = jack.getChildByName(\"TX_walk_attack\");\r\n            txWalkAttack.active = false;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}