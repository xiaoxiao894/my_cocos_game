{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_PullWire/assets/JavaScript/Global/DataManager.ts"],"names":["_decorator","Vec3","Vec4","Singleton","EventManager","EventName","ccclass","property","DataManager","prefabMap","Map","sceneManger","soundManager","isMapBesastSatr","mainCamera","ropeManager","nowPlug","nowSocket","socketNodes","arrowNodes","Arrow_beast","Arrow_mining","Arrow_farmLand","cameraLimit","plugConnectDistance","cloudHideDistance","upgradeAnimationType","upgradeTween","upgradeNode","plugMoveAngles","plugFinalAngles","isGameOver","leftSocket","coinNum","upgradeCoinNum","towerCoinNum","coinEndNode","Instance","GetInstance","addCoin","num","inst","emit","CoinAdd"],"mappings":"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","sourcesContent":["import { _decorator, Prefab, Vec2, Vec3, Node, Vec4, Tween } from 'cc';\r\nimport Singleton from '../Base/Singleton';\r\nimport { CameraMain } from '../Camera/CameraMain';\r\nimport { RopeManager } from '../Repo/RopeManager';\r\nimport { SceneManager } from '../SceneManger';\r\nimport { eventMgr } from '../core/EventManager';\r\nimport { EventManager } from './EventManager';\r\nimport { EventName } from '../Common/Enum';\r\nimport { SoundManager } from '../core/SoundManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DataManager')\r\nexport class DataManager extends Singleton {\r\n    static get Instance() {\r\n        return super.GetInstance<DataManager>();\r\n    }\r\n\r\n    public prefabMap: Map<string, Prefab> = new Map();\r\n\r\n    public sceneManger: SceneManager = null;\r\n\r\n    public soundManager: SoundManager = null;\r\n\r\n    public isMapBesastSatr:boolean = false;\r\n\r\n    /** 主摄像机 */\r\n    public mainCamera: CameraMain = null;\r\n\r\n\r\n    /** 电线管理类 */\r\n    public ropeManager: RopeManager = null;\r\n\r\n    /** 当前操控的插头 */\r\n    public nowPlug: Node = null;\r\n\r\n    //当前插座\r\n    public nowSocket: Node = null;\r\n\r\n    /**所有插座节点 */\r\n    public socketNodes: Node[] = [];\r\n    /**所有箭头节点 */\r\n    public arrowNodes: Node[] = [];\r\n\r\n\r\n\r\n    public Arrow_beast: Node = null;\r\n\r\n\r\n    public Arrow_mining: Node = null;\r\n\r\n    public Arrow_farmLand: Node = null;\r\n\r\n    /**摄像机移动限制 */\r\n    /**\r\n     * (-19, -40, 37.9, 22);\r\n     * 向左滑动右边界\r\n     * 向右滑动左边界  \r\n     * 向下滑动上边界\r\n     * 向上滑动下边界\r\n     */\r\n    // Vec4(xMax, xMin, zMax, zMin)\r\n    public cameraLimit: Vec4 = new Vec4(14, -14, 56, 23.64);\r\n    /** 插头插座连接距离 */\r\n    public plugConnectDistance: number = 6;\r\n    public cloudHideDistance: number = 10;\r\n\r\n    public upgradeAnimationType:number = 1;\r\n    public upgradeTween:Tween<Node> = null;\r\n    public upgradeNode:Node = null;\r\n\r\n    /** 插头移动旋转角度 顺序对应插座 */\r\n    public plugMoveAngles: Vec3[] = [\r\n        new Vec3(-90, 0, 0),\r\n        new Vec3(90, 90, 0),\r\n        new Vec3(90, 0, 0),\r\n        new Vec3(90, -90, 0),\r\n        new Vec3(-90, 0, 0),\r\n    ]\r\n\r\n    /** 插头最终旋转角度 顺序对应插座 */\r\n    public plugFinalAngles: Vec3[] = [\r\n        new Vec3(-90, 0, 0),\r\n        new Vec3(90, 90, 0),\r\n        new Vec3(90, 90, 0),\r\n        new Vec3(125, -127, 0),\r\n        new Vec3(-90, 0, 0),\r\n    ]\r\n    /** 游戏结束 */\r\n    public isGameOver: boolean = false;\r\n    public leftSocket: number[] = [0, 1, 2, 3, 4];\r\n\r\n    //当前金币数量\r\n    public coinNum: number = 0;\r\n\r\n    public addCoin(num: number = 1) {\r\n        this.coinNum += num;\r\n        EventManager.inst.emit(EventName.CoinAdd);\r\n    }\r\n\r\n\r\n    //升级需要金币数量\r\n    public upgradeCoinNum: number = 900;\r\n\r\n    //塔当前金币数量\r\n    public towerCoinNum: number = 0;\r\n\r\n    //飞金币节点\r\n    public coinEndNode: Node = null;\r\n\r\n}\r\n\r\n"]}