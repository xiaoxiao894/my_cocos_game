{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_PullWire/assets/JavaScript/core/SoundManager.ts"],"names":["_decorator","AudioSource","Component","DataManager","ccclass","property","SoundManager","type","tooltip","playBgMusic","BgSound","state","AudioState","PLAYING","play","playPlugSound","plugSound","playSocketSound","socketSound","playVictorySound","victorySound","playElectricSound","electricSound","playPalingSound","palingSound","playLockSound","lockSound","playCheerSound","cheerSound","playWateringSound","wateringSound","playWateringSoundThreeTimes","playCount","totalPlays","interval","playNext","playOneShot","clip","scheduleOnce","playGrowSound","growSound","playUpgradeSound","upSound","playOreSound","oreSound","playOreSoundThreeTimes","playPalingElectricSound","palingElectric","playAttackPalingSound","attackPaling","playBearSound","bearSound","playElephantSound","elephantSound","playDogSound","dogSound","playResourceSound","resourceSound","start","Instance","soundManager"],"mappings":"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","sourcesContent":["import { _decorator, assert, AudioSource, Component, Node } from 'cc';\r\nimport { DataManager } from '../Global/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SoundManager')\r\nexport class SoundManager extends Component {\r\n\r\n    // 背景音乐\r\n    @property({ type: AudioSource, tooltip: '背景音乐' })\r\n    BgSound: AudioSource = null;\r\n\r\n    // 选择插销\r\n    @property({ type: AudioSource, tooltip: '选择插销' })\r\n    plugSound: AudioSource = null;\r\n\r\n    // 插入插销\r\n    @property({ type: AudioSource, tooltip: '插入插销' })\r\n    socketSound: AudioSource = null;\r\n\r\n    // 通电\r\n    @property({ type: AudioSource, tooltip: '通电' })\r\n    electricSound: AudioSource = null;\r\n\r\n    // 围墙出生\r\n    @property({ type: AudioSource, tooltip: '围墙出生' })\r\n    palingSound: AudioSource = null;\r\n\r\n    // 解锁\r\n    @property({ type: AudioSource, tooltip: '解锁' })\r\n    lockSound: AudioSource = null;\r\n\r\n    // 欢呼\r\n    @property({ type: AudioSource, tooltip: '欢呼' })\r\n    cheerSound: AudioSource = null;\r\n\r\n    // 洒水\r\n    @property({ type: AudioSource, tooltip: '洒水' })\r\n    wateringSound: AudioSource = null;\r\n\r\n    // 生长\r\n    @property({ type: AudioSource, tooltip: '生长' })\r\n    growSound: AudioSource = null;\r\n\r\n    // 升级\r\n    @property({ type: AudioSource, tooltip: '升级' })\r\n    upSound: AudioSource = null;\r\n\r\n    // 矿石\r\n    @property({ type: AudioSource, tooltip: '矿石' })\r\n    oreSound: AudioSource = null;\r\n\r\n    // 围墙电流\r\n    @property({ type: AudioSource, tooltip: '围墙电流' })\r\n    palingElectric: AudioSource = null;\r\n\r\n    // 攻击围墙\r\n    @property({ type: AudioSource, tooltip: '攻击围墙' })\r\n    attackPaling: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '熊' })\r\n    bearSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '大象' })\r\n    elephantSound: AudioSource = null; // 修正拼写错误\r\n\r\n    @property({ type: AudioSource, tooltip: '狗' })\r\n    dogSound: AudioSource = null;\r\n\r\n    // 资源投放\r\n    @property({ type: AudioSource, tooltip: '资源投放' })\r\n    resourceSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '胜利' })\r\n    victorySound: AudioSource = null;\r\n\r\n    /** 播放背景音乐 */\r\n    playBgMusic() {\r\n        if (this.BgSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.BgSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放选择插销音效 */\r\n    playPlugSound() {\r\n        if (this.plugSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.plugSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放插入插销音效 */\r\n    playSocketSound() {\r\n        if (this.socketSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.socketSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放背景音效 */\r\n    playVictorySound() {\r\n        if (this.victorySound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.victorySound.play();\r\n        }\r\n    }\r\n    /** 播放通电音效 */\r\n    playElectricSound() {\r\n        if (this.electricSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.electricSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放围墙出生音效 */\r\n    playPalingSound() {\r\n        if (this.palingSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.palingSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放解锁音效 */\r\n    playLockSound() {\r\n        if (this.lockSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.lockSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放欢呼音效 */\r\n    playCheerSound() {\r\n        if (this.cheerSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.cheerSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放洒水音效 */\r\n    playWateringSound() {\r\n        if (this.wateringSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.wateringSound.play();\r\n        }\r\n    }\r\n    /** 播放洒水音效3次 */\r\n    playWateringSoundThreeTimes() {\r\n        let playCount = 0;\r\n        const totalPlays = 3;\r\n        const interval = 0.5; // 每次播放之间的间隔时间（秒）\r\n\r\n        const playNext = () => {\r\n            if (playCount < totalPlays) {\r\n                this.wateringSound.playOneShot(this.wateringSound.clip, 1);\r\n                playCount++;\r\n\r\n                // 使用 scheduleOnce 来安排下一次播放\r\n                this.scheduleOnce(() => {\r\n                    playNext();\r\n                }, interval);\r\n            }\r\n        };\r\n\r\n        playNext();\r\n    }\r\n\r\n    /** 播放生长音效 */\r\n    playGrowSound() {\r\n        if (this.growSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.growSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放升级音效 */\r\n    playUpgradeSound() {\r\n        if (this.upSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.upSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放矿石音效 */\r\n    playOreSound() {\r\n        if (this.oreSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.oreSound.play();\r\n        }\r\n    }\r\n    /** 播放3次矿石音效 */\r\n    playOreSoundThreeTimes() {\r\n        let playCount = 0;\r\n        const totalPlays = 3;\r\n        const interval = 0.5; // 每次播放之间的间隔时间（秒）\r\n\r\n        const playNext = () => {\r\n            if (playCount < totalPlays) {\r\n                this.oreSound.playOneShot(this.oreSound.clip, 1);\r\n                playCount++;\r\n\r\n                // 使用 scheduleOnce 来安排下一次播放\r\n                this.scheduleOnce(() => {\r\n                    playNext();\r\n                }, interval);\r\n            }\r\n        };\r\n\r\n        playNext();\r\n    }\r\n\r\n    /** 播放围墙电流音效 */\r\n    playPalingElectricSound() {\r\n        if (this.palingElectric.state !== AudioSource.AudioState.PLAYING) {\r\n            // this.palingElectric.play();\r\n            this.palingElectric.playOneShot(this.palingElectric.clip, 1);\r\n        }\r\n    }\r\n\r\n    /** 播放攻击围墙音效 */\r\n    playAttackPalingSound() {\r\n        if (this.attackPaling.state !== AudioSource.AudioState.PLAYING) {\r\n            this.attackPaling.play();\r\n        }\r\n    }\r\n\r\n    /** 播放熊音效 */\r\n    playBearSound() {\r\n        if (this.bearSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.bearSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放大象音效 */\r\n    playElephantSound() {\r\n        if (this.elephantSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.elephantSound.play();\r\n        }\r\n    }\r\n\r\n    /** 播放狗音效 */\r\n    playDogSound() {\r\n        if (this.dogSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.dogSound.play();\r\n        }\r\n    }\r\n\r\n    // /** 播放资源投放音效 */\r\n    playResourceSound() {\r\n        if (this.resourceSound.state !== AudioSource.AudioState.PLAYING) {\r\n\r\n            this.resourceSound.playOneShot(this.resourceSound.clip, 1);\r\n        }\r\n    }\r\n    //     /**\r\n    //  * 播放资源投放音效\r\n    //  * @param num - 控制音效播放次数和音量大小的参数\r\n    //  */\r\n    //     playResourceSound(num: number) {\r\n\r\n\r\n\r\n    //         // 播放指定次数的音效，每次降低音量\r\n    //         for (let i = 0; i < num; i++) {\r\n    //             // 计算当前音量 (随次数增加而降低)\r\n    //            // const volume = Math.max(0.2, 1 - (i * 0.1)); // 最低音量0.2\r\n\r\n    //             // 使用 setTimeout 安排每次播放\r\n    //             const timer = setTimeout(() => {\r\n    //                 // 使用 playOneShot 方法，不需要检查音频源状态\r\n    //                 this.resourceSound.playOneShot(this.resourceSound.clip, 0.5);\r\n    //             }, i * 20); // 200毫秒间隔，可根据需要调整\r\n\r\n    //         }\r\n    //     }\r\n\r\n    \r\n    protected start(): void {\r\n        DataManager.Instance.soundManager = this;\r\n    }\r\n}"]}