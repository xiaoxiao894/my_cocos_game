{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_PullWire/assets/JavaScript/core/MapBeast/MapBeast.ts"],"names":["_decorator","Component","Node","Prefab","Vec3","Animation","tween","poolManager","eventMgr","EventType","EnemyBase","coinEffect","DataManager","CloudParticleEffect","ccclass","property","MapBeast","siblings","mapCoinNum","isStart","startRandom","addTime","onInitEvent","once","MapBeast_start","beastStartCallBack","on","MapBeast_cloudFadeOut","beastCloudFadeOut","MapBeast_cloudFadeIn","beastCloudFadeIn","beastContainer","active","cloudParticleOuter","cloudFadeEffct","cloudParticleCentrality","Instance","isMapBesastSatr","Arrow_beast","soundManager","playSocketSound","scheduleOnce","playElectricSound","playLockSound","playPalingSound","addCoin","anim","palingNode","getComponent","play","FINISHED","beastBack","animParticle","playUpgradeSound","beastBackPaticle","animParticle1","mapCoinNode","setCoinNum","playEffect","electricPalingParent","children","sibling","i","playPalingElectricSound","effectNode","getChildByName","animation","length","forEach","die","beastRandom","emit","MapBeast_enemyStart","mainCamera","node","to","worldPosition","call","start","beastPatterns","type","pos","random","Math","floor","beasts","beast","spawnElephant","spawnDog","spawnBear","initPools","bearPrefab","dogPrefab","elephantPrefab","initPool","InitcreatorEnemy","enemyDie","bear","getNode","setDie","parent","position","dog","elephant","clearAll","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, Vec3, Animation, tween } from 'cc';\r\nimport { poolManager } from './PoolManager';\r\nimport { eventMgr } from '../EventManager';\r\nimport { EventType } from '../EventType';\r\nimport { EnemyBase } from './EnemyBase';\r\nimport { CloudEffct } from '../CloudEffct';\r\nimport { coinEffect } from '../coinEffect';\r\nimport { DataManager } from '../../Global/DataManager';\r\nimport { PalingAnimation } from '../PalingAnimation';\r\nimport { CloudParticleEffect } from '../CloudParticleEffect';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapBeast')\r\nexport class MapBeast extends Component {\r\n    @property(Prefab)\r\n    bearPrefab: Prefab | null = null; // 熊预制体\r\n\r\n    @property(Node)\r\n    palingNode: Node = null;\r\n\r\n    @property(Prefab)\r\n    dogPrefab: Prefab | null = null; // 狗预制体\r\n\r\n    @property(Prefab)\r\n    elephantPrefab: Prefab | null = null; // 大象预制体\r\n\r\n    @property(Node)\r\n    beastContainer: Node | null = null; // 动物容器\r\n\r\n    @property(Node)\r\n    electricPalingParent: Node = null;\r\n\r\n    // @property(Node)\r\n    // palingPanrent: Node = null;\r\n    // @property(Node)\r\n    // protected cloudNode: Node = null;\r\n    protected siblings: Node[] = null;\r\n\r\n    @property(Node)\r\n    mapCoinNode: Node = null;\r\n\r\n    private mapCoinNum: number = 300;\r\n\r\n    @property(Node)\r\n    beastBack: Node = null;\r\n\r\n    @property(Node)\r\n    beastBackPaticle: Node = null;\r\n\r\n    @property(CloudParticleEffect)\r\n    cloudParticleOuter: CloudParticleEffect = null;\r\n\r\n    @property(CloudParticleEffect)\r\n    cloudParticleCentrality: CloudParticleEffect = null;\r\n\r\n\r\n    private isStart: boolean = false;\r\n\r\n    // cloudFadeEffct(isFade: boolean) {\r\n    //     this.siblings = this.cloudNode.children;\r\n    //     if (this.siblings.length === 0) {\r\n    //         console.warn(\"当前云节点没有子节点\");\r\n    //         return;\r\n    //     }\r\n    //     // 遍历并处理同级节点\r\n    //     this.siblings.forEach((sibling, index) => {\r\n    //         sibling.getComponent(CloudEffct).startEffect(isFade);\r\n    //     });\r\n    // }\r\n    //初始化事件\r\n    onInitEvent() {\r\n        //云的的事件监听\r\n        eventMgr.once(EventType.MapBeast_start, this.beastStartCallBack, this);\r\n        eventMgr.on(EventType.MapBeast_cloudFadeOut, this.beastCloudFadeOut, this);\r\n        eventMgr.on(EventType.MapBeast_cloudFadeIn, this.beastCloudFadeIn, this);\r\n\r\n    }\r\n    protected startRandom: boolean = false;\r\n    beastCloudFadeOut() {\r\n        if (this.isStart) return;\r\n        this.beastContainer.active = true;\r\n        this.cloudParticleOuter.cloudFadeEffct(false);\r\n        this.cloudParticleCentrality.cloudFadeEffct(false);\r\n        // this.cloudFadeEffct(false);\r\n\r\n    }\r\n    beastCloudFadeIn() {\r\n        if (this.isStart) return;\r\n        this.cloudParticleOuter.cloudFadeEffct(true);\r\n        this.cloudParticleCentrality.cloudFadeEffct(true);\r\n        // this.cloudFadeEffct(true);\r\n\r\n    }\r\n    //主逻辑开始生效事件\r\n    beastStartCallBack() {\r\n        DataManager.Instance.isMapBesastSatr = true;\r\n        DataManager.Instance.Arrow_beast.active = false;\r\n        this.cloudParticleOuter.cloudFadeEffct(false);\r\n        this.cloudParticleCentrality.cloudFadeEffct(false);\r\n        DataManager.Instance.soundManager.playSocketSound();\r\n        this.scheduleOnce(() => {\r\n            DataManager.Instance.soundManager.playElectricSound();\r\n            DataManager.Instance.soundManager.playLockSound();\r\n            DataManager.Instance.soundManager.playPalingSound();\r\n        }, 0.6)\r\n\r\n        this.scheduleOnce(() => {\r\n            DataManager.Instance.addCoin(this.mapCoinNum);\r\n        }, 0.4)\r\n        let anim = this.palingNode.getComponent(Animation)\r\n        anim.play();\r\n        anim.once(Animation.EventType.FINISHED, () => {\r\n\r\n        })\r\n        this.scheduleOnce(() => {\r\n\r\n            //升级粒子特效\r\n            this.beastBack.active = true;\r\n            const animParticle = this.beastBack.getComponent(Animation);\r\n            animParticle.play()\r\n            animParticle.once(Animation.EventType.FINISHED, () => {\r\n                this.beastBack.active = false;\r\n            }, this);\r\n\r\n\r\n\r\n            DataManager.Instance.soundManager.playUpgradeSound();\r\n            this.beastBackPaticle.active = true;\r\n            const animParticle1 = this.beastBackPaticle.getComponent(Animation);\r\n            this.scheduleOnce(() => {\r\n                animParticle1.play()\r\n            }, 0.06)\r\n\r\n            animParticle1.once(Animation.EventType.FINISHED, () => {\r\n                this.beastBackPaticle.active = false;\r\n\r\n            }, this);\r\n            this.scheduleOnce(() => {\r\n                this.mapCoinNode.getComponent(coinEffect).setCoinNum(this.mapCoinNum);\r\n                this.mapCoinNode.getComponent(coinEffect).playEffect();\r\n\r\n            }, 0.3)\r\n        }, 0.32)\r\n        // this.palingPanrent.getComponent(PalingAnimation).startBounce();\r\n        this.scheduleOnce(() => {\r\n            this.beastContainer.active = true;\r\n        }, 1.5)\r\n\r\n        // this.beastBack.getComponent(Animation).play();\r\n        // this.beastBackPaticle.getComponent(Animation).play();\r\n\r\n\r\n        this.scheduleOnce(() => {\r\n\r\n            const siblings = this.electricPalingParent.children;\r\n            for (let i = 0; i < siblings.length; i++) {\r\n                const sibling = siblings[i];\r\n                DataManager.Instance.soundManager.playPalingElectricSound();\r\n                this.scheduleOnce(() => {\r\n\r\n                    const effectNode = sibling.getChildByName(\"TX_dianliuWQ\");\r\n                    if (effectNode) {\r\n                        effectNode.active = true;\r\n                        const animation = effectNode.getComponent(Animation);\r\n                        animation.play(\"dianliusuofang\");\r\n                        animation.once(Animation.EventType.FINISHED, () => {\r\n                            // 动画完成后切换到新动画\r\n                            animation.play(\"TX_dianliuWQ\");\r\n                        }, this);\r\n                    }\r\n                }, 0.1 * (i + 1)); // 每个节点延迟递增0.5秒\r\n            }\r\n        }, 1);\r\n        this.isStart = true;\r\n        // this.scheduleOnce(() => {\r\n        //     this.cloudNode.removeAllChildren();\r\n        // }, 40)\r\n        this.scheduleOnce(() => {\r\n            if (this.beastContainer.children.length > 0) {\r\n                this.beastContainer.children.forEach(sibling => {\r\n                    sibling.getComponent(EnemyBase).die();\r\n                })\r\n                // this.beastContainer.removeAllChildren();\r\n                this.beastRandom();\r\n                this.startRandom = true;\r\n\r\n            }\r\n            eventMgr.emit(EventType.MapBeast_enemyStart)\r\n        }, 3.5)\r\n        this.scheduleOnce(() => {\r\n            //摄像机移动\r\n            tween(DataManager.Instance.mainCamera.node)\r\n                .to(0.8, { worldPosition: new Vec3(0.014142, 34.1, 37.250385) })\r\n                .call(() => {\r\n                    //this._upgraded = true;\r\n                })\r\n                .start();\r\n\r\n        }, 1)\r\n\r\n        // this.beastRandom();\r\n    }\r\n\r\n    beastRandom() {\r\n        // 定义随机生成的动物配置\r\n        const beastPatterns = [\r\n            [ // 组合1\r\n                { type: 'elephant', pos: new Vec3(5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-2.583, 0, 40) },\r\n                { type: 'bear', pos: new Vec3(-0.656, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(1.314, 0, 40) },\r\n                { type: 'elephant', pos: new Vec3(-8, 0, 40) },\r\n            ],\r\n            [ // 组合2\r\n                { type: 'elephant', pos: new Vec3(5, 0, 40) },\r\n                { type: 'bear', pos: new Vec3(-5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-2.583, 0, 40) },\r\n                { type: 'bear', pos: new Vec3(-0.656, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(1.314, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-8, 0, 40) },\r\n            ],\r\n            [ // 组合3\r\n                { type: 'bear', pos: new Vec3(5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-2.583, 0, 40) },\r\n                { type: 'bear', pos: new Vec3(-0.656, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(1.314, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-8, 0, 40) },\r\n            ],\r\n            [ // 组合4\r\n                { type: 'bear', pos: new Vec3(5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-2.583, 0, 40) },\r\n                { type: 'elephant', pos: new Vec3(-0.656, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(1.314, 0, 40) },\r\n                { type: 'elephant', pos: new Vec3(-8, 0, 40) },\r\n            ],\r\n            [ // 组合5\r\n                { type: 'bear', pos: new Vec3(5, 0, 40) },\r\n                { type: 'elephant', pos: new Vec3(-5, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-2.583, 0, 40) },\r\n                { type: 'elephant', pos: new Vec3(-0.656, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(1.314, 0, 40) },\r\n                { type: 'dog', pos: new Vec3(-8, 0, 40) },\r\n            ]\r\n        ];\r\n\r\n        // 生成1-5的随机数\r\n        const random = Math.floor(Math.random() * 5) + 1;\r\n        // 获取对应的动物配置\r\n        const beasts = beastPatterns[random - 1];\r\n\r\n        // 生成动物\r\n        beasts.forEach(beast => {\r\n            switch (beast.type) {\r\n                case 'elephant':\r\n                    this.spawnElephant(beast.pos, true);\r\n                    break;\r\n                case 'dog':\r\n                    this.spawnDog(beast.pos, true);\r\n                    break;\r\n                case 'bear':\r\n                    this.spawnBear(beast.pos, true);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    initPools() {\r\n\r\n        if (!this.bearPrefab || !this.dogPrefab || !this.elephantPrefab) return;\r\n        // 初始化熊敌人池\r\n        poolManager.initPool('BearPool', this.bearPrefab, 3,);\r\n        // 初始化狗敌人池\r\n        poolManager.initPool('DogPool', this.dogPrefab, 3,);\r\n        // 初始化大象敌人池\r\n        poolManager.initPool('ElephantPool', this.elephantPrefab, 3,);\r\n    }\r\n    start() {\r\n        this.initPools();\r\n        this.InitcreatorEnemy();\r\n        this.onInitEvent();\r\n        this.scheduleOnce(() => {\r\n            this.beastContainer.active = false;\r\n        }, 0.1)\r\n\r\n        // this.scheduleOnce(() => {\r\n        //    // eventMgr.emit(EventType.MapBeast_start);\r\n        //    eventMgr.emit(EventType.MapBeast_cloudFadeOut);\r\n        // }, 2)\r\n        // this.scheduleOnce(() => {\r\n        //    // eventMgr.emit(EventType.MapBeast_start);\r\n        //    eventMgr.emit(EventType.MapBeast_cloudFadeIn);\r\n        // }, 5)\r\n    }\r\n\r\n    InitcreatorEnemy() {\r\n        this.spawnElephant(new Vec3(5, 0, 29));\r\n        this.spawnDog(new Vec3(-5, 0, 28.665))\r\n        this.spawnDog(new Vec3(-2.583, 0, 28.665))\r\n        this.spawnBear(new Vec3(-0.656, 0, 28.533));\r\n        this.spawnDog(new Vec3(1.314, 0, 28.665))\r\n        this.spawnElephant(new Vec3(-8, 0, 29));\r\n\r\n    }\r\n    spawnBear(pos: Vec3, enemyDie?: boolean) {\r\n\r\n\r\n        // 从对象池获取熊敌人节点\r\n        const bear = poolManager.getNode('BearPool');\r\n        if (enemyDie) {\r\n            bear.getComponent(EnemyBase).setDie();\r\n        }\r\n        if (bear) {\r\n            bear.parent = this.beastContainer;\r\n            bear.position = new Vec3(pos);\r\n            bear.active = true;\r\n        }\r\n    }\r\n\r\n    spawnDog(pos: Vec3, enemyDie?: boolean) {\r\n\r\n        // 从对象池获取狗敌人节点\r\n        const dog = poolManager.getNode('DogPool');\r\n        if (enemyDie) {\r\n            dog.getComponent(EnemyBase).setDie();\r\n        }\r\n        if (dog) {\r\n            dog.parent = this.beastContainer;\r\n            dog.position = new Vec3(pos);\r\n            dog.active = true;\r\n\r\n        }\r\n    }\r\n\r\n    spawnElephant(pos: Vec3, enemyDie?: boolean) {\r\n\r\n        // 从对象池获取大象敌人节点\r\n        const elephant = poolManager.getNode('ElephantPool');\r\n        if (enemyDie) {\r\n            elephant.getComponent(EnemyBase).setDie();\r\n        }\r\n        if (elephant) {\r\n            elephant.parent = this.beastContainer;\r\n            elephant.position = new Vec3(pos);\r\n            elephant.active = true;\r\n\r\n        }\r\n    }\r\n\r\n    clearAll() {\r\n        // 清空所有对象池\r\n        poolManager.clearAll();\r\n\r\n    }\r\n    private addTime: number = 0;\r\n    update(deltaTime: number) {\r\n        if (this.startRandom) {\r\n            this.addTime += deltaTime;\r\n            if (this.addTime >= 9) {\r\n                this.addTime = 0;\r\n                this.beastRandom();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}