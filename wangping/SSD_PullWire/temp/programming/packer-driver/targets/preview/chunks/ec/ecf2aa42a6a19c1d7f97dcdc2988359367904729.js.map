{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_PullWire/assets/JavaScript/Plot/MiningSite.ts"],"names":["_decorator","Component","Node","SkeletalAnimation","Animation","tween","Vec3","eventMgr","EventType","DataManager","PalingAnimation","coinEffect","CloudParticleEffect","ccclass","property","MiningSite","isStart","_coin","_addNum","mapCoinNum","playPalingAnimation","onEnable","on","MiningSite_cloudFadeOut","cloudFadeOutCallBack","MiningSite_cloudFadeIn","cloudFadeInCallBack","MiningSite_start","startCallBack","Lumberyard_start","lumberyardStart","onDisable","off","start","init","palingNode","getComponent","animState","getState","defaultClip","name","time","sample","pause","initPaling","update","deltaTime","cloudParticleOuter","cloudFadeEffct","cloudParticleCentrality","Instance","Arrow_mining","active","soundManager","playSocketSound","scheduleOnce","playElectricSound","playLockSound","addCoin","palingEffctCallBack","allEffect","mapAnimation","play","ani","electricEffect","playOreSoundThreeTimes","levelUp","anim","once","FINISHED","playUpgradeSound","levelUpParticle","animParticle","mapCoinNode","setCoinNum","playEffect","schedule","miningWork","mainCamera","node","to","worldPosition","call","palingEffctTo","playPalingSound","work","coinEffct","isGameOver","palingLeft","startMoveDown"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab, SkeletalAnimation, Animation, tween, Vec3 } from 'cc';\r\nimport { eventMgr } from '../core/EventManager';\r\nimport { EventType } from '../core/EventType';\r\nimport { DataManager } from '../Global/DataManager';\r\nimport { GroundParent } from '../core/GroundParent';\r\nimport { PalingAnimation } from '../core/PalingAnimation';\r\nimport { EntityTypeEnum } from '../Common/Enum';\r\nimport { coinEffect } from '../core/coinEffect';\r\nimport { OilDrumEffect } from '../core/MapBeast/OilDrumEffect';\r\nimport { CloudParticleEffect } from '../core/CloudParticleEffect';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MiningSite')\r\n//第二个地块 矿场\r\nexport class MiningSite extends Component {\r\n\r\n    @property(SkeletalAnimation)\r\n    ani: SkeletalAnimation = null;\r\n\r\n    @property(Node)\r\n    protected palingNode: Node = null;\r\n\r\n    @property(Node)\r\n    protected palingRight: Node = null;\r\n    @property(Node)\r\n    protected palingLeft: Node = null;\r\n    @property(Node)\r\n    protected palingUp: Node = null;\r\n    @property(Node)\r\n    protected palingDown: Node = null;\r\n\r\n    @property(coinEffect)\r\n    coinEffct: coinEffect = null;\r\n\r\n    @property(Animation)\r\n    work: Animation = null;\r\n\r\n    @property(Node)\r\n    levelUp: Node = null;\r\n\r\n    @property(Node)\r\n    levelUpParticle: Node = null;\r\n\r\n    @property(Node)//矿机的通电效果\r\n    electricEffect: Node = null;\r\n\r\n    private isStart: boolean = false;\r\n\r\n    private _coin: coinEffect = null;\r\n    private _addNum: number = 10;\r\n\r\n    @property(Node)\r\n    mapCoinNode: Node = null;\r\n    private mapCoinNum: number = 300;\r\n\r\n    @property(Animation)\r\n    mapAnimation: Animation = null;\r\n\r\n    @property(CloudParticleEffect)\r\n    cloudParticleOuter: CloudParticleEffect = null;\r\n    @property(CloudParticleEffect)\r\n    cloudParticleCentrality: CloudParticleEffect = null;\r\n\r\n    protected onEnable(): void {\r\n        //云的的事件监听\r\n        eventMgr.on(EventType.MiningSite_cloudFadeOut, this.cloudFadeOutCallBack, this);\r\n        eventMgr.on(EventType.MiningSite_cloudFadeIn, this.cloudFadeInCallBack, this);\r\n        eventMgr.on(EventType.MiningSite_start, this.startCallBack, this);\r\n        eventMgr.on(EventType.Lumberyard_start, this.lumberyardStart, this);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        eventMgr.off(EventType.MiningSite_cloudFadeOut, this.cloudFadeOutCallBack, this);\r\n        eventMgr.off(EventType.MiningSite_cloudFadeIn, this.cloudFadeInCallBack, this);\r\n        eventMgr.off(EventType.MiningSite_start, this.startCallBack, this);\r\n        eventMgr.off(EventType.Lumberyard_start, this.lumberyardStart, this);\r\n    }\r\n    private playPalingAnimation: Animation = null;\r\n\r\n    start() {\r\n        this.init();\r\n\r\n        this.playPalingAnimation = this.palingNode.getComponent(Animation)\r\n        const animState = this.playPalingAnimation.getState(this.playPalingAnimation.defaultClip.name);\r\n        if (animState) {\r\n            animState.time = 0;    // 设置到第一帧\r\n            animState.sample();    // 采样当前时间帧\r\n            this.playPalingAnimation.pause(); // 暂停动画，停留在第一帧\r\n        }\r\n    }\r\n\r\n    private init() {\r\n        this.initPaling();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n\r\n    /**\r\n     * 关于云的操作模块\r\n     */\r\n    //淡出回调\r\n    cloudFadeOutCallBack() {\r\n        if (this.isStart) return\r\n        // this.cloudFadeEffct(false);\r\n        this.cloudParticleOuter.cloudFadeEffct(false)\r\n        this.cloudParticleCentrality.cloudFadeEffct(false)\r\n    }\r\n    //淡入回调\r\n    cloudFadeInCallBack() {\r\n        if (this.isStart) return\r\n        //this.cloudFadeEffct(true);\r\n        this.cloudParticleOuter.cloudFadeEffct(true)\r\n        this.cloudParticleCentrality.cloudFadeEffct(true)\r\n    }\r\n\r\n    /**\r\n     * 地块开始启动\r\n     */\r\n    startCallBack() {\r\n        DataManager.Instance.Arrow_mining.active = false;\r\n        this.cloudParticleOuter.cloudFadeEffct(false)\r\n        this.cloudParticleCentrality.cloudFadeEffct(false)\r\n        DataManager.Instance.soundManager.playSocketSound();\r\n        this.scheduleOnce(() => {\r\n            this.isStart = true;\r\n            DataManager.Instance.soundManager.playElectricSound();\r\n            DataManager.Instance.soundManager.playLockSound();\r\n        }, 0.6)\r\n        this.scheduleOnce(() => {\r\n            DataManager.Instance.addCoin(this.mapCoinNum);\r\n        }, 0.4)\r\n\r\n        //延迟几秒开始木栅栏动画\r\n        this.palingEffctCallBack();\r\n\r\n\r\n        // }, 2.6)\r\n    }\r\n    allEffect() {\r\n\r\n        this.mapAnimation.play();\r\n\r\n        //延时几秒开始建筑开始动画\r\n        //this.scheduleOnce(() => {\r\n        this.ani.play();\r\n        // }, 1);\r\n        //延时几秒开始通电动画\r\n        this.scheduleOnce(() => {\r\n            this.electricEffect.active = true;\r\n            this.electricEffect.getComponent(Animation).play();\r\n            DataManager.Instance.soundManager.playOreSoundThreeTimes();\r\n        }, 0.7);\r\n\r\n        //延时几秒开始升级特效\r\n        // this.scheduleOnce(() => {\r\n\r\n        //升级动画\r\n        this.levelUp.active = true;\r\n        const anim = this.levelUp.getComponent(Animation);\r\n        anim.play()\r\n        anim.once(Animation.EventType.FINISHED, () => {\r\n            this.levelUp.active = false;\r\n        }, this);\r\n\r\n\r\n        DataManager.Instance.soundManager.playUpgradeSound();\r\n\r\n        //升级粒子特效\r\n        this.levelUpParticle.active = true;\r\n        const animParticle = this.levelUpParticle.getComponent(Animation);\r\n        this.scheduleOnce(() => {\r\n            animParticle.play()\r\n        }, 0.06)\r\n        // animParticle.play()\r\n        animParticle.once(Animation.EventType.FINISHED, () => {\r\n\r\n            this.levelUpParticle.active = false;\r\n        }, this);\r\n        this.scheduleOnce(() => {\r\n            this.mapCoinNode.getComponent(coinEffect).setCoinNum(this.mapCoinNum);\r\n            this.mapCoinNode.getComponent(coinEffect).playEffect();\r\n\r\n        }, 0.3)\r\n        // }, 1.3);\r\n        // this.schedule(() => {\r\n        this.schedule(() => {\r\n            this.miningWork();\r\n        }, 2);\r\n        this.scheduleOnce(() => {\r\n            //摄像机移动\r\n            tween(DataManager.Instance.mainCamera.node)\r\n                .to(0.8, { worldPosition: new Vec3(0.014142, 34.1, 37.250385) })\r\n                .call(() => {\r\n                    //this._upgraded = true;\r\n                })\r\n                .start();\r\n\r\n        }, 1)\r\n\r\n    }\r\n\r\n    /**\r\n     * 关于木栅栏的操作\r\n     */\r\n    initPaling() {\r\n        // this.palingRight.active = false;\r\n        // this.palingDown.active = true;\r\n        // this.palingUp.active = false;\r\n        // this.palingLeft.active = false;\r\n    }\r\n    async palingEffctTo() {\r\n        // // 获取动画组件\r\n        // const leftAnimation = this.palingLeft.getComponent(PalingAnimation);\r\n        // const rightAnimation = this.palingRight.getComponent(PalingAnimation);\r\n        // this.palingDown.getComponent(PalingAnimation).startMoveDown();\r\n        // 同时启动两个动画，并等待它们都完成\r\n        // await Promise.all([\r\n        //     leftAnimation.startAnimation(),\r\n        //     rightAnimation.startAnimation()\r\n        // ]);\r\n    }\r\n    async palingEffctCallBack() {\r\n        // this.palingRight.active = true;\r\n        // this.palingDown.active = true;\r\n        // this.palingUp.active = true;\r\n        // this.palingLeft.active = true;\r\n        DataManager.Instance.soundManager.playPalingSound();\r\n        let anim = this.palingNode.getComponent(Animation)\r\n        anim.play()\r\n        anim.once(Animation.EventType.FINISHED, () => {\r\n\r\n        })\r\n        this.scheduleOnce(() => {\r\n            this.allEffect();\r\n        }, 0.48);\r\n        // await this.palingEffctTo();\r\n\r\n        // this.palingUp.getComponent(PalingAnimation).startBounce();\r\n    }\r\n\r\n    private miningWork() {\r\n        this.scheduleOnce(() => {\r\n            this.addCoin();\r\n        }, 1.9)\r\n        // this.addCoin();\r\n        if (this.work.node.active == false) {\r\n            this.work.node.active = true;\r\n        }\r\n        this.work.play();\r\n\r\n    }\r\n\r\n    //增加金币\r\n    private addCoin() {\r\n        if (this.coinEffct.node.active == false) {\r\n            this.coinEffct.node.active = true;\r\n        }\r\n        this.coinEffct.setCoinNum(this._addNum);\r\n        this.coinEffct.playEffect();\r\n        // if (!this._coin) {\r\n        //     let prefab: Prefab = DataManager.Instance.prefabMap.get(EntityTypeEnum.coinNode);\r\n        //     let coinNode = instantiate(prefab);\r\n        //     coinNode.parent = this.coinParent;\r\n        //     let effect: coinEffect = coinNode.getComponent(coinEffect);\r\n        //     this._coin = effect;\r\n        //     if (this._coin) {\r\n        //         this._coin.setCoinNum(this._addNum);\r\n        //     }\r\n        // }\r\n\r\n        // this._coin?.playEffect();\r\n    }\r\n\r\n    /** 伐木场共用栅栏处理  */\r\n    private lumberyardStart() {\r\n        if (DataManager.Instance.isGameOver) {\r\n            //延迟几秒开始木栅栏动画\r\n            this.scheduleOnce(() => {\r\n                this.palingLeft.getComponent(PalingAnimation).startMoveDown();\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}