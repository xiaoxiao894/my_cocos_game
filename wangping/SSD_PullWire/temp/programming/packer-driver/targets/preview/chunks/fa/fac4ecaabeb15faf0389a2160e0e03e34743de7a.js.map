{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_PullWire/assets/JavaScript/Plot/Lumberyard.ts"],"names":["_decorator","Component","instantiate","Node","SkeletalAnimation","Animation","find","eventMgr","EventType","DataManager","coinEffect","EntityTypeEnum","EventName","EventManager","CloudParticleEffect","ccclass","property","Lumberyard","isStart","_coin","_addNum","mapCoinNum","playPalingAnimation","onEnable","on","Lumberyard_cloudFadeOut","cloudFadeOutCallBack","Lumberyard_start","startCallBack","Lumberyard_cloudFadeIn","cloudFadeInCallBack","inst","GameOver","ropeShowCallBack","onDisable","off","start","init","palingNode","getComponent","animState","getState","defaultClip","name","time","sample","pause","node","getChildByName","active","initPaling","update","deltaTime","cloudParticleOuter","cloudFadeEffct","cloudParticleCentrality","emit","MapLand_allCloudFade","Instance","soundManager","playSocketSound","scheduleOnce","playElectricSound","playLockSound","palingEffctCallBack","allEffect","mapAnimation","play","isGameOver","ani","treeNode","levelUp","anim","once","FINISHED","playUpgradeSound","levelUpParticle","animParticle","mapCoinNode","setCoinNum","playEffect","addCoin","playVictorySound","schedule","lumberWork","palingEffctTo","playPalingSound","prefab","prefabMap","get","coinNode","scale","clone","multiplyScalar","parent","coinParent","effect","work"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab, SkeletalAnimation, Animation, find } from 'cc';\r\nimport { eventMgr } from '../core/EventManager';\r\nimport { EventType } from '../core/EventType';\r\nimport { DataManager } from '../Global/DataManager';\r\nimport { GroundParent } from '../core/GroundParent';\r\nimport { PalingAnimation } from '../core/PalingAnimation';\r\nimport { coinEffect } from '../core/coinEffect';\r\nimport { EntityTypeEnum, EventName } from '../Common/Enum';\r\nimport { OilDrumEffect } from '../core/MapBeast/OilDrumEffect';\r\nimport { EventManager } from '../Global/EventManager';\r\nimport { CloudParticleEffect } from '../core/CloudParticleEffect';\r\nimport { LandCloudFade } from '../core/LandCloudFade';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Lumberyard')\r\n//第五个地块 伐木场\r\nexport class Lumberyard extends Component {\r\n\r\n    @property(SkeletalAnimation)\r\n    ani: SkeletalAnimation = null;\r\n\r\n    @property(Node)\r\n    protected palingNode: Node = null;\r\n\r\n    @property(Node)\r\n    protected palingLeft: Node = null;\r\n    @property(Node)\r\n    protected palingUp: Node = null;\r\n\r\n    @property(Node)\r\n    coinParent: Node = null;\r\n\r\n    @property(Animation)\r\n    work: Animation = null;\r\n\r\n    @property(Node)\r\n    levelUp: Node = null;\r\n\r\n    @property(Node)\r\n    levelUpParticle: Node = null;\r\n\r\n    @property(Node)\r\n    treeNode: Node = null;\r\n\r\n    @property(Animation)\r\n    mapAnimation: Animation = null;\r\n\r\n    @property(CloudParticleEffect)\r\n    cloudParticleOuter: CloudParticleEffect = null;\r\n\r\n    @property(CloudParticleEffect)\r\n    cloudParticleCentrality: CloudParticleEffect = null;\r\n\r\n\r\n    // @property(Animation)\r\n    // lumberyardTree: Animation = null;\r\n\r\n    private isStart: boolean = false;\r\n\r\n    private _coin: coinEffect = null;\r\n    private _addNum: number = 10;\r\n\r\n    @property(Node)\r\n    mapCoinNode: Node = null;\r\n    private mapCoinNum: number = 300;\r\n\r\n    protected onEnable(): void {\r\n        //云的的事件监听\r\n        eventMgr.on(EventType.Lumberyard_cloudFadeOut, this.cloudFadeOutCallBack, this);\r\n        eventMgr.on(EventType.Lumberyard_start, this.startCallBack, this);\r\n        eventMgr.on(EventType.Lumberyard_cloudFadeIn, this.cloudFadeInCallBack, this);\r\n        EventManager.inst.on(EventName.GameOver, this.ropeShowCallBack, this);\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        eventMgr.off(EventType.Lumberyard_cloudFadeOut, this.cloudFadeOutCallBack, this);\r\n        eventMgr.off(EventType.Lumberyard_start, this.startCallBack, this);\r\n        eventMgr.off(EventType.Lumberyard_cloudFadeIn, this.cloudFadeInCallBack, this);\r\n    }\r\n    private playPalingAnimation: Animation = null;\r\n    start() {\r\n        this.init();\r\n        this.playPalingAnimation = this.palingNode.getComponent(Animation)\r\n        const animState = this.playPalingAnimation.getState(this.playPalingAnimation.defaultClip.name);\r\n        if (animState) {\r\n            animState.time = 0;    // 设置到第一帧\r\n            animState.sample();    // 采样当前时间帧\r\n            this.playPalingAnimation.pause(); // 暂停动画，停留在第一帧\r\n        }\r\n    }\r\n\r\n    private init() {\r\n        this.node.getChildByName(\"ChaZuo\").active = false;\r\n        this.initPaling();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n    }\r\n    //显示插座\r\n    ropeShowCallBack() {\r\n        this.node.getChildByName(\"ChaZuo\").active = true;\r\n    }\r\n\r\n    /**\r\n     * 关于云的操作模块\r\n     */\r\n    //淡出回调\r\n    cloudFadeOutCallBack() {\r\n        //if (DataManager.Instance.isGameOver) {\r\n        if (this.isStart) return;\r\n        // this.cloudFadeEffct(false);\r\n        //}\r\n        this.cloudParticleOuter.cloudFadeEffct(false);\r\n        this.cloudParticleCentrality.cloudFadeEffct(false);\r\n\r\n    }\r\n    //淡入回调\r\n    cloudFadeInCallBack() {\r\n        if (this.isStart) return;\r\n        // this.cloudFadeEffct(true);\r\n        this.cloudParticleOuter.cloudFadeEffct(true);\r\n        this.cloudParticleCentrality.cloudFadeEffct(true);\r\n    }\r\n    /**\r\n     * 地块开始启动\r\n     */\r\n    startCallBack() {\r\n        eventMgr.emit(EventType.MapLand_allCloudFade);\r\n        DataManager.Instance.soundManager.playSocketSound();\r\n        this.scheduleOnce(() => {\r\n            DataManager.Instance.soundManager.playElectricSound();\r\n            DataManager.Instance.soundManager.playLockSound();\r\n        }, 0.6)\r\n\r\n        //延迟几秒开始木栅栏动画\r\n        this.palingEffctCallBack();\r\n\r\n\r\n    }\r\n    allEffect() {\r\n        this.mapAnimation.play();\r\n\r\n        this.isStart = true;\r\n        if (DataManager.Instance.isGameOver) {\r\n            //延时几秒开始建筑开始转动\r\n            this.scheduleOnce(() => {\r\n                this.ani.play();\r\n                this.treeNode.getComponent(Animation).play();\r\n            }, 1);\r\n\r\n            //延时几秒开始升级特效\r\n            // this.scheduleOnce(() => {\r\n            //升级特效\r\n            this.levelUp.active = true;\r\n            const anim = this.levelUp.getComponent(Animation);\r\n            anim.play()\r\n            anim.once(Animation.EventType.FINISHED, () => {\r\n                this.levelUp.active = false;\r\n            }, this);\r\n\r\n\r\n            DataManager.Instance.soundManager.playUpgradeSound();\r\n            //升级粒子特效\r\n            this.levelUpParticle.active = true;\r\n            const animParticle = this.levelUpParticle.getComponent(Animation);\r\n            this.scheduleOnce(() => {\r\n                animParticle.play()\r\n            }, 0.06)\r\n            // animParticle.play()\r\n            animParticle.once(Animation.EventType.FINISHED, () => {\r\n                this.levelUpParticle.active = false;\r\n                this.scheduleOnce(() => {\r\n                    this.mapCoinNode.getComponent(coinEffect).setCoinNum(this.mapCoinNum);\r\n                    this.mapCoinNode.getComponent(coinEffect).playEffect();\r\n\r\n                    // this.lumberyardTree.play()\r\n                    DataManager.Instance.addCoin(this.mapCoinNum);\r\n                }, 0.3)\r\n            }, this);\r\n            // }, 0.5);\r\n            this.scheduleOnce(() => {\r\n                let node = find(\"Canvas/GameEnd\");\r\n                node.active = true;\r\n                DataManager.Instance.soundManager.playVictorySound();\r\n            }, 2);\r\n            this.schedule(() => {\r\n                this.lumberWork();\r\n            }, 2.5);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关于木栅栏的操作\r\n     */\r\n    initPaling() {\r\n        // this.palingUp.active = false;\r\n        // this.palingLeft.active = false;\r\n    }\r\n    async palingEffctTo() {\r\n\r\n        DataManager.Instance.soundManager.playPalingSound();\r\n        // 获取动画组件\r\n        // const upAnimation = this.palingUp.getComponent(PalingAnimation);\r\n        // const leftAnimation = this.palingLeft.getComponent(PalingAnimation);\r\n        //this.palingRight.getComponent(PalingAnimation).startMoveDown();\r\n        // 同时启动两个动画，并等待它们都完成\r\n        // await Promise.all([\r\n        //     upAnimation.startAnimation(),\r\n        //     leftAnimation.startAnimation()\r\n        // ]);\r\n    }\r\n    async palingEffctCallBack() {\r\n        // this.palingUp.active = true;\r\n        // this.palingLeft.active = true;\r\n        DataManager.Instance.soundManager.playPalingSound();\r\n        let anim = this.palingNode.getComponent(Animation)\r\n        anim.play();\r\n        anim.once(Animation.EventType.FINISHED, () => {\r\n\r\n        })\r\n        this.scheduleOnce(() => {\r\n            this.allEffect();\r\n        }, 0.32);\r\n\r\n        // await this.palingEffctTo();\r\n\r\n    }\r\n\r\n    //增加金币\r\n    private addCoin() {\r\n        if (!this._coin) {\r\n            let prefab: Prefab = DataManager.Instance.prefabMap.get(EntityTypeEnum.coinNode);\r\n            let coinNode = instantiate(prefab);\r\n            coinNode.scale = coinNode.scale.clone().multiplyScalar(1.1);\r\n            coinNode.parent = this.coinParent;\r\n            let effect: coinEffect = coinNode.getComponent(coinEffect);\r\n            this._coin = effect;\r\n            if (this._coin) {\r\n                this._coin.setCoinNum(this._addNum);\r\n            }\r\n        }\r\n\r\n        this._coin?.playEffect();\r\n    }\r\n\r\n    private lumberWork() {\r\n        this.addCoin();\r\n        this.scheduleOnce(() => {\r\n            this.work.node.active = true;\r\n            this.work.play();\r\n\r\n        }, 0.5);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n"]}