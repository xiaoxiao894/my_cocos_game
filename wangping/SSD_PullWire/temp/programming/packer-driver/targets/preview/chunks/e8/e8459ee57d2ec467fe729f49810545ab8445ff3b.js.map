{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_PullWire/assets/JavaScript/UI/GameEndManager.ts"],"names":["_decorator","Component","Node","tween","UIOpacity","Vec3","super_html_playable","ccclass","property","GameEndManager","start","node","active","init","playFingerAndButtonAnim","hand","opacityCom","bg","getComponent","addComponent","opacity","to","icon","setScale","download","scale","delay","call","repeatForever","platformBtnEvent","console","log"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, tween, UIOpacity, Vec3 } from 'cc';\r\nimport { DataManager } from '../Global/DataManager';\r\nimport super_html_playable from '../../super_html_playable';\r\n//import Platform from '../Common/Platform';\r\n// const google_play = \"https://play.google.com/store/apps/details?id=com.funplus.ts.global\";\r\n// const appstore = \"https://play.google.com/store/apps/details?id=com.funplus.ts.global\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameEndManager')\r\nexport class GameEndManager extends Component {\r\n\r\n\r\n// ;\r\n// super_html_playable.set_app_store_url(appstore);\r\n    @property(Node)\r\n    bg: Node = null;\r\n\r\n    @property(Node)\r\n    icon: Node = null;\r\n\r\n    @property(Node)\r\n    download: Node = null;\r\n\r\n    // @property(Node)\r\n    // win: Node = null;\r\n\r\n    @property(Node)\r\n    hand: Node = null;\r\n\r\n    start() {\r\n       // DataManager.Instance.gameEndManager = this;\r\n\r\n        this.node.active = false;\r\n        this.init();\r\n        this.playFingerAndButtonAnim();\r\n    }\r\n\r\n    init() {\r\n        this.hand.active = false;\r\n        this.node.active = true;\r\n        // 背景淡入\r\n        const opacityCom = this.bg.getComponent(UIOpacity) || this.bg.addComponent(UIOpacity);\r\n        opacityCom.opacity = 0;\r\n        tween(opacityCom)\r\n            .to(0.1, { opacity: 150 })\r\n            .start();\r\n\r\n        // 初始缩放\r\n        this.icon.setScale(0, 0, 0);\r\n        this.download.setScale(0, 1, 1);\r\n\r\n        tween(this.icon)\r\n            .to(0.25, { scale: new Vec3(2.2, 2.2, 2.2) })\r\n            .to(0.3, { scale: new Vec3(2, 2, 2) })\r\n            .start();\r\n\r\n        tween(this.download)\r\n            .delay(0.25)\r\n            .to(0.25, { scale: new Vec3(1.1, 1.1, 1.1) })\r\n            .to(0.3, { scale: new Vec3(1, 1, 1) })\r\n            .call(\r\n                () => {\r\n                    this.hand.active = true;\r\n                }\r\n            )\r\n            .start();\r\n\r\n    }\r\n\r\n    // 手指+按钮循环提示动画\r\n    playFingerAndButtonAnim() {\r\n       // this.hand.active = true;\r\n        // 手指动画（0.9 -> 1 循环）\r\n        tween(this.hand)\r\n            .repeatForever(\r\n                tween()\r\n                    .to(0.3, { scale: new Vec3(0.4, 0.4,0.4) })\r\n                    .to(0.3, { scale: new Vec3(0.5, 0.5, 0.5) })\r\n            )\r\n            .start();\r\n\r\n        // 按钮点击提示动画（1.0 -> 1.1 -> 1.0 循环）\r\n        // tween(this.download)\r\n        //     .repeatForever(\r\n        //         tween()\r\n        //             .to(0.3, { scale: new Vec3(1.1, 1.1, 1.1) })\r\n        //             .to(0.3, { scale: new Vec3(1, 1, 1) })\r\n        //     )\r\n        //     .start();\r\n    }\r\n    platformBtnEvent(){\r\n        console.log(\"点击下载\");\r\n       // Platform.instance.jumpStore();\r\n      // super_html_playable.set_google_play_url(google_play);\r\n       super_html_playable.download();\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}