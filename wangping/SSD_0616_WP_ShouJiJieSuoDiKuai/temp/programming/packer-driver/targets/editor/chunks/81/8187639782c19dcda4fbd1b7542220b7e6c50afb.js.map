{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_UnlockPlot/assets/Script/SoundManager.ts"],"names":["_decorator","AudioSource","Component","Global","ccclass","property","SoundManager","type","tooltip","playShatterSound","shatterSound","state","AudioState","PLAYING","playOneShot","clip","playBgMusic","BgSound","play","playCutTreeSound","cutTreeSound","playWarnSound","warnSound","playCutCronSound","cutCronSound","playPlayerRunSound","playrRunSound","playEnemySound","enemySound","playAttackEnemySound","attackEnemySound","playAnimationSound","animationSound","playHandOverSound","handOverSound","playPickUpSound","pickUpSound","playPickUpSound1","playUpSound","upSound","start","soundManager"],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAGUsB,QAAAA,KAAK,GAAS;AACpB;AAAA;AAAA,gCAAOC,YAAP,GAAsB,IAAtB;AACH;;AA1SuC,O;;;;;iBAIjB,I;;;;;;;iBAGK,I;;;;;;;iBAGA,I;;;;;;;iBAGC,I;;;;;;;iBAGH,I;;;;;;;iBAGM,I;;;;;;;iBAGF,I;;;;;;;iBAGD,I;;;;;;;iBAGF,I;;;;;;;iBAGJ,I;;;;;;;iBAGE,I;;;;;;;iBAGG,I","sourcesContent":["import { _decorator, assert, AudioSource, Component, Node } from 'cc';\r\nimport { Global } from './core/Global';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SoundManager')\r\nexport class SoundManager extends Component {\r\n\r\n    // 背景音乐\r\n    @property({ type: AudioSource, tooltip: '背景音乐' })\r\n    BgSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '砍树' })\r\n    cutTreeSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '砍玉米' })\r\n    cutCronSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '人物奔跑' })\r\n    playrRunSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '敌人出现' })\r\n    enemySound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '攻击敌人声音' })\r\n    attackEnemySound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '建筑掉落声音' })\r\n    animationSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '交付' })\r\n    handOverSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '拾取' })\r\n    pickUpSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: '升级' })\r\n    upSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: ' 警告声音' })\r\n    warnSound: AudioSource = null;\r\n\r\n    @property({ type: AudioSource, tooltip: ' 破碎音效' })\r\n    shatterSound: AudioSource = null;\r\n\r\n    playShatterSound(){\r\n        if (this.shatterSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.shatterSound.playOneShot(this.shatterSound.clip, 1);\r\n        }\r\n    }\r\n    /** 播放背景音乐 */\r\n    playBgMusic() {\r\n        if (this.BgSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.BgSound.play();\r\n        }\r\n    }\r\n    playCutTreeSound(){\r\n        if (this.cutTreeSound.state !== AudioSource.AudioState.PLAYING) {\r\n            //this.cutTreeSound.play();\r\n            this.cutTreeSound.playOneShot(this.cutTreeSound.clip, 1);\r\n        }\r\n    }\r\n    playWarnSound(){\r\n        if (this.warnSound.state !== AudioSource.AudioState.PLAYING) {\r\n            //this.cutTreeSound.play();\r\n            this.warnSound.playOneShot(this.warnSound.clip, 1);\r\n        }\r\n    }\r\n\r\n    playCutCronSound(){\r\n        if (this.cutCronSound.state !== AudioSource.AudioState.PLAYING) {\r\n            //this.cutCronSound.play();\r\n            this.cutCronSound.playOneShot(this.cutCronSound.clip, 1);\r\n        }\r\n    }\r\n    playPlayerRunSound(){\r\n        if (this.playrRunSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.playrRunSound.play();\r\n           // this.playrRunSound.playOneShot(this.playrRunSound.clip, 1);\r\n        }\r\n    }\r\n    playEnemySound(){\r\n        if (this.enemySound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.enemySound.play();\r\n        }\r\n    }\r\n    playAttackEnemySound(){\r\n        if (this.attackEnemySound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.attackEnemySound.play();\r\n        }\r\n    }\r\n    playAnimationSound(){\r\n        if (this.animationSound.state !== AudioSource.AudioState.PLAYING) {\r\n            //this.animationSound.play();\r\n            this.animationSound.playOneShot(this.animationSound.clip, 1);\r\n        }\r\n    }\r\n    playHandOverSound(){\r\n        if (this.handOverSound.state !== AudioSource.AudioState.PLAYING) {\r\n            //this.handOverSound.play();\r\n            this.handOverSound.playOneShot(this.handOverSound.clip, 1);\r\n        }\r\n    }\r\n    playPickUpSound(){\r\n        if (this.pickUpSound.state !== AudioSource.AudioState.PLAYING) {\r\n            //this.pickUpSound.play();\r\n            this.pickUpSound.playOneShot(this.pickUpSound.clip, 1);\r\n        }\r\n    }\r\n    playPickUpSound1(){\r\n        if (this.pickUpSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.pickUpSound.play();\r\n            //this.pickUpSound.playOneShot(this.pickUpSound.clip, 1);\r\n        }\r\n    }\r\n    playUpSound(){\r\n        if (this.upSound.state !== AudioSource.AudioState.PLAYING) {\r\n            this.upSound.play();\r\n        }\r\n    }\r\n    // /** 播放选择插销音效 */\r\n    // playPlugSound() {\r\n    //     if (this.plugSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.plugSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放插入插销音效 */\r\n    // playSocketSound() {\r\n    //     if (this.socketSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.socketSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放背景音效 */\r\n    // playVictorySound() {\r\n    //     if (this.victorySound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.victorySound.play();\r\n    //     }\r\n    // }\r\n    // /** 播放通电音效 */\r\n    // playElectricSound() {\r\n    //     if (this.electricSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.electricSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放围墙出生音效 */\r\n    // playPalingSound() {\r\n    //     if (this.palingSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.palingSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放解锁音效 */\r\n    // playLockSound() {\r\n    //     if (this.lockSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.lockSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放欢呼音效 */\r\n    // playCheerSound() {\r\n    //     if (this.cheerSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.cheerSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放洒水音效 */\r\n    // playWateringSound() {\r\n    //     if (this.wateringSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.wateringSound.play();\r\n    //     }\r\n    // }\r\n    // /** 播放洒水音效3次 */\r\n    // playWateringSoundThreeTimes() {\r\n    //     let playCount = 0;\r\n    //     const totalPlays = 3;\r\n    //     const interval = 0.5; // 每次播放之间的间隔时间（秒）\r\n\r\n    //     const playNext = () => {\r\n    //         if (playCount < totalPlays) {\r\n    //             this.wateringSound.playOneShot(this.wateringSound.clip, 1);\r\n    //             playCount++;\r\n\r\n    //             // 使用 scheduleOnce 来安排下一次播放\r\n    //             this.scheduleOnce(() => {\r\n    //                 playNext();\r\n    //             }, interval);\r\n    //         }\r\n    //     };\r\n\r\n    //     playNext();\r\n    // }\r\n\r\n    // /** 播放生长音效 */\r\n    // playGrowSound() {\r\n    //     if (this.growSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.growSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放升级音效 */\r\n    // playUpgradeSound() {\r\n    //     if (this.upSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.upSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放矿石音效 */\r\n    // playOreSound() {\r\n    //     if (this.oreSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.oreSound.play();\r\n    //     }\r\n    // }\r\n    // /** 播放3次矿石音效 */\r\n    // playOreSoundThreeTimes() {\r\n    //     let playCount = 0;\r\n    //     const totalPlays = 3;\r\n    //     const interval = 0.5; // 每次播放之间的间隔时间（秒）\r\n\r\n    //     const playNext = () => {\r\n    //         if (playCount < totalPlays) {\r\n    //             this.oreSound.playOneShot(this.oreSound.clip, 1);\r\n    //             playCount++;\r\n\r\n    //             // 使用 scheduleOnce 来安排下一次播放\r\n    //             this.scheduleOnce(() => {\r\n    //                 playNext();\r\n    //             }, interval);\r\n    //         }\r\n    //     };\r\n\r\n    //     playNext();\r\n    // }\r\n\r\n    // /** 播放围墙电流音效 */\r\n    // playPalingElectricSound() {\r\n    //     if (this.palingElectric.state !== AudioSource.AudioState.PLAYING) {\r\n    //         // this.palingElectric.play();\r\n    //         this.palingElectric.playOneShot(this.palingElectric.clip, 1);\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放攻击围墙音效 */\r\n    // playAttackPalingSound() {\r\n    //     if (this.attackPaling.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.attackPaling.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放熊音效 */\r\n    // playBearSound() {\r\n    //     if (this.bearSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.bearSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放大象音效 */\r\n    // playElephantSound() {\r\n    //     if (this.elephantSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.elephantSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // /** 播放狗音效 */\r\n    // playDogSound() {\r\n    //     if (this.dogSound.state !== AudioSource.AudioState.PLAYING) {\r\n    //         this.dogSound.play();\r\n    //     }\r\n    // }\r\n\r\n    // // /** 播放资源投放音效 */\r\n    // playResourceSound() {\r\n    //     if (this.resourceSound.state !== AudioSource.AudioState.PLAYING) {\r\n\r\n    //         this.resourceSound.playOneShot(this.resourceSound.clip, 1);\r\n    //     }\r\n    // }\r\n    // //     /**\r\n    // //  * 播放资源投放音效\r\n    // //  * @param num - 控制音效播放次数和音量大小的参数\r\n    // //  */\r\n    // //     playResourceSound(num: number) {\r\n\r\n\r\n\r\n    // //         // 播放指定次数的音效，每次降低音量\r\n    // //         for (let i = 0; i < num; i++) {\r\n    // //             // 计算当前音量 (随次数增加而降低)\r\n    // //            // const volume = Math.max(0.2, 1 - (i * 0.1)); // 最低音量0.2\r\n\r\n    // //             // 使用 setTimeout 安排每次播放\r\n    // //             const timer = setTimeout(() => {\r\n    // //                 // 使用 playOneShot 方法，不需要检查音频源状态\r\n    // //                 this.resourceSound.playOneShot(this.resourceSound.clip, 0.5);\r\n    // //             }, i * 20); // 200毫秒间隔，可根据需要调整\r\n\r\n    // //         }\r\n    // //     }\r\n\r\n    \r\n    protected start(): void {\r\n        Global.soundManager = this;\r\n    }\r\n}"]}