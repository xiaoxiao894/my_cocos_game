{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_UnlockPlot/assets/Script/core/SateMachine.ts"],"names":["StateMachine","currentState","states","addState","name","state","setState","callback","onExit","onEnter","getState","getStateName","update","dt","onUpdate"],"mappings":";;;8BAGqBA,Y;;;;;;;;;;;;;;;;;;;yBAAAA,Y,GAAN,MAAMA,YAAN,CAAmB;AAAA;AAAA,eACtBC,YADsB,GACO,IADP;AAAA,eAEtBC,MAFsB,GAEa,EAFb;AAAA;;AAI9BC,QAAAA,QAAQ,CAACC,IAAD,EAAeC,KAAf,EAAmC;AACvC,eAAKH,MAAL,CAAYE,IAAZ,IAAoBC,KAApB;AACH;;AAEDC,QAAAA,QAAQ,CAACF,IAAD,EAAcG,QAAd,EAA4D;AAChE,cAAI,KAAKN,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkBO,MAAlB,CAAyBD,QAAzB;AACH;;AACD,eAAKN,YAAL,GAAoB,KAAKC,MAAL,CAAYE,IAAZ,CAApB;;AACA,cAAI,KAAKH,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkBQ,OAAlB,CAA0BF,QAA1B;AACH;AACJ;;AACDG,QAAAA,QAAQ,GAAG;AACP,iBAAO,KAAKT,YAAZ;AACH;;AAEDU,QAAAA,YAAY,GAAkB;AAC9B,eAAK,MAAMP,IAAX,IAAmB,KAAKF,MAAxB,EAAgC;AAC5B,gBAAI,KAAKA,MAAL,CAAYE,IAAZ,MAAsB,KAAKH,YAA/B,EAA6C;AACzC,qBAAOG,IAAP;AACH;AACJ;;AACD,iBAAO,IAAP;AACH;;AAEGQ,QAAAA,MAAM,CAACC,EAAD,EAAmB;AACrB,cAAI,KAAKZ,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkBa,QAAlB,CAA2BD,EAA3B;AACH;AACJ;;AAlC6B,O","sourcesContent":["import Entity from \"../entitys/Entity\";\r\nimport State from \"../states/State\";\r\n\r\nexport default class StateMachine {\r\n    private currentState: State | null = null;\r\n    private states: { [key: string]: State } = {};\r\n\r\n    addState(name: string, state: State): void {\r\n        this.states[name] = state;\r\n    }\r\n\r\n    setState(name: string,callback?: (...agrs:unknown[]) => void): void {\r\n        if (this.currentState) {\r\n            this.currentState.onExit(callback);\r\n        }\r\n        this.currentState = this.states[name];\r\n        if (this.currentState) {\r\n            this.currentState.onEnter(callback);\r\n        }\r\n    }\r\n    getState() {\r\n        return this.currentState\r\n    }\r\n\r\n    getStateName(): string | null {\r\n    for (const name in this.states) {\r\n        if (this.states[name] === this.currentState) {\r\n            return name;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n    update(dt: number): void {\r\n        if (this.currentState) {\r\n            this.currentState.onUpdate(dt);\r\n        }\r\n    }\r\n}"]}