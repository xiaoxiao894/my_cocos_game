{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_UnlockPlot/assets/Script/UIWarnManager.ts"],"names":["_decorator","Component","tween","UIOpacity","Global","ccclass","property","UIWarnManager","_isTrue","tweenWarn","callFunc","start","warnUI","node","active","playWarnFadeAnimation","opacity","getComponent","addComponent","stopWarnFadeAnimation","to","easing","call"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAwBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;;AAC3CC,MAAAA,M,iBAAAA,M;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;+BAGjBO,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCN,SADnC,CAC6C;AAAA;AAAA;AAAA,eACjCO,OADiC,GACvB,IADuB;AAAA,eAGjCC,SAHiC,GAGI,IAHJ;AAAA,eAIjCC,QAJiC,GAIZ,IAJY;AAAA;;AAKzCC,QAAAA,KAAK,GAAG;AACJ;AAAA;AAAA,gCAAOC,MAAP,GAAgB,IAAhB;AACA,eAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;;AAEDC,QAAAA,qBAAqB,GAAG;AAAA;;AACpB;AACA,eAAKF,IAAL,CAAUC,MAAV,GAAmB,IAAnB,CAFoB,CAIpB;;AACA,cAAME,OAAO,GAAG,oBAAKH,IAAL,gCAAWI,YAAX,CAAwBd,SAAxB,sBAAsC,KAAKU,IAA3C,qBAAsC,YAAWK,YAAX,CAAwBf,SAAxB,CAAtC,CAAhB,CALoB,CAOpB;;AACA,eAAKgB,qBAAL,GARoB,CAUpB;;AACAH,UAAAA,OAAO,CAACA,OAAR,GAAkB,CAAlB,CAXoB,CAapB;AACA;;AACA,eAAKN,QAAL,GAAgB,MAAM;AAClBR,YAAAA,KAAK,CAACc,OAAD,CAAL,CACKI,EADL,CACQ,GADR,EACa;AAAEJ,cAAAA,OAAO,EAAE;AAAX,aADb,EAC+B;AAAEK,cAAAA,MAAM,EAAE;AAAV,aAD/B,EACuD;AADvD,aAEKD,EAFL,CAEQ,GAFR,EAEa;AAAEJ,cAAAA,OAAO,EAAE;AAAX,aAFb,EAE6B;AAAEK,cAAAA,MAAM,EAAE;AAAV,aAF7B,EAEsD;AAFtD,aAGKC,IAHL,CAGU,MAAM;AACR,kBAAI,KAAKZ,QAAT,EACI,KAAKA,QAAL;AACP,aANL,EAOKC,KAPL;AAQH,WATD;;AAWA,eAAKD,QAAL;AAEH;;AACDS,QAAAA,qBAAqB,GAAG;AACpB,cAAI,KAAKT,QAAT,EAAmB;AACf,iBAAKA,QAAL,GAAgB,IAAhB;AACH;AACJ;;AA3CwC,O","sourcesContent":["import { _decorator, Component, Node, Tween, tween, UIOpacity } from 'cc';\r\nimport { Global } from './core/Global';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('UIWarnManager')\r\nexport class UIWarnManager extends Component {\r\n    private _isTrue = true;\r\n\r\n    private tweenWarn: Tween<UIOpacity> | null = null;\r\n    private callFunc: Function = null;\r\n    start() {\r\n        Global.warnUI = this;\r\n        this.node.active = false;\r\n    }\r\n\r\n    playWarnFadeAnimation() {\r\n        // 确保节点处于活动状态\r\n        this.node.active = true;\r\n\r\n        // 获取或添加UIOpacity组件\r\n        const opacity = this.node?.getComponent(UIOpacity) || this.node?.addComponent(UIOpacity);\r\n\r\n        // 停止之前的动画（如果有）\r\n        this.stopWarnFadeAnimation();\r\n\r\n        // 设置初始透明度为0（隐藏状态）\r\n        opacity.opacity = 0;\r\n\r\n        // 创建动画序列：只包含渐显和渐隐，移除重置透明度的回调\r\n        // 创建动画序列并设置为无限循环\r\n        this.callFunc = () => {\r\n            tween(opacity)\r\n                .to(0.5, { opacity: 255 }, { easing: 'quadOut' })  // 渐显\r\n                .to(0.5, { opacity: 0 }, { easing: 'quadIn' })    // 渐隐\r\n                .call(() => {\r\n                    if (this.callFunc)\r\n                        this.callFunc();\r\n                })\r\n                .start();\r\n        }\r\n\r\n        this.callFunc();\r\n\r\n    }\r\n    stopWarnFadeAnimation() {\r\n        if (this.callFunc) {\r\n            this.callFunc = null;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}