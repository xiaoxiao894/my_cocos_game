{"version":3,"sources":["file:///D:/Cocos/PlayAble/SSD_0616_WP_ShouJiJieSuoDiKuai/assets/Script/GroundEffct.ts"],"names":["_decorator","Component","Node","Animation","Camera","Vec3","tween","Global","ccclass","property","GroundEffct","type","tooltip","Number","onLoad","tree3","active","passAnimation1","ground2","groundAnimation","play","soundManager","playAnimationSound","once","EventType","FINISHED","tree2","groundObject2","groundObjectAnmation","targetPosition","targetPosition1","targetPosition2","console","log","mainCamera","node","to","position","call","delay","start","passAnimation11","isMoveCamreToCorn","passAnimation2","targetPosition3","ground3","enemyLandHouse","groundObject3","treeAnimation","scheduleOnce","arrowGuid","passAnimation21","passAnimation3","cameraPosition1","tree","getChildByName","children","forEach","child","n","currentScale","scale","clone","targetScale","multiplyScalar","orthoHeight","cameraHigeht","ground4","tree4","groundObject4","ground4UI","showAllTreeClick","i","upgradeTreeHouseAnimation","callback","isPlayHouseAnimation","playUpSound","house1","treeLandHouse","house2","particle","treeLandHouseAnim","getComponent","particleAnim","animState","getState","isPlaying","p1","Promise","resolve","p2","all","then","upgradeEnemyHouseAnimation","hideCornArrow","ArrowgroundObject2_1","ArrowgroundObject2_2","ArrowgroundObject2_3","ArrowgroundObject2_4","upgradeAnimation","anim","upgradeNode","playerBodyWood","upgradeUIAnimtion"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Animation, Camera, Vec3, tween, Tween, Quat } from 'cc';\r\nimport { Global } from './core/Global';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GroundEffct')\r\nexport class GroundEffct extends Component {\r\n\r\n    @property(Camera)\r\n    mainCamera: Camera = null;\r\n\r\n    @property(Animation)\r\n    groundAnimation: Animation = null;\r\n    // 每一个大地\r\n    @property(Node)\r\n    ground1: Node = null;\r\n\r\n    @property(Node)\r\n    ground2: Node = null;\r\n\r\n    @property(Node)\r\n    ground3: Node = null;\r\n\r\n    @property(Node)\r\n    ground4: Node = null;\r\n\r\n    @property(Node)\r\n    ground4UI: Node = null;\r\n\r\n    @property(Animation)\r\n    treeAnimation: Animation = null;\r\n    // 每一个大地快上的树\r\n    @property(Node)\r\n    tree1: Node = null;\r\n\r\n    @property(Node)\r\n    tree2: Node = null;\r\n\r\n    @property(Node)\r\n    tree3: Node = null;\r\n\r\n    @property(Node)\r\n    tree4: Node = null;\r\n\r\n    @property(Animation)\r\n    groundObjectAnmation: Animation = null;\r\n\r\n    // 每一个大地快上的物体\r\n    @property(Node)\r\n    groundObject1: Node = null;\r\n\r\n    @property(Node)\r\n    groundObject2: Node = null;\r\n\r\n    @property(Node)\r\n    groundObject3: Node = null;\r\n\r\n    @property(Node)\r\n    groundObject4: Node = null;\r\n\r\n    //玉米地块 每一个小地块\r\n    @property(Node)\r\n    groundObject2_1: Node = null;\r\n    @property(Node)\r\n    groundObject2_2: Node = null;\r\n    @property(Node)\r\n    groundObject2_3: Node = null;\r\n    @property(Node)\r\n    groundObject2_4: Node = null;\r\n\r\n\r\n    @property(Node)\r\n    ArrowgroundObject2_1: Node = null;\r\n    @property(Node)\r\n    ArrowgroundObject2_2: Node = null;\r\n    @property(Node)\r\n    ArrowgroundObject2_3: Node = null;\r\n    @property(Node)\r\n    ArrowgroundObject2_4: Node = null;\r\n\r\n    @property(Node)\r\n    arrowGuid: Node = null;\r\n\r\n    @property(Node)\r\n    upgradeNode: Node = null;\r\n\r\n    /////////////////////////////////以上关于相机地块的变量\r\n\r\n    @property(Node)\r\n    treeLandHouse: Node = null;\r\n    @property(Node)\r\n    enemyLandHouse: Node = null;\r\n\r\n    protected onLoad(): void {\r\n        this.tree3.active = false\r\n        // this.scheduleOnce(() => {\r\n        //     this.treeAnimation.play(\"shuCS - 02\");\r\n        //     const state = this.treeAnimation.getState(\"shuCS - 02\");\r\n        //     if (state) {\r\n        //         state.time = 0;       // 设置动画时间到0秒\r\n        //         state.sample();       // 采样当前时间帧，更新动画到第一帧\r\n        //         this.treeAnimation.pause(); // 暂停动画，保持在第一帧\r\n        //     }\r\n        // }, 0.1)\r\n\r\n    }\r\n\r\n    //最后显示的相机位置\r\n    @property({ type: Vec3, tooltip: '相机位置' })\r\n    cameraPosition1: Vec3 = new Vec3(20, 100, 75);\r\n\r\n    @property({ type: Vec3, tooltip: '相机旋转' })\r\n    cameraRotation: Vec3 = new Vec3(-55, 0, 0);\r\n\r\n    @property({ type: Number, tooltip: '相机高度' })\r\n    cameraHigeht: number = 25;\r\n\r\n\r\n    ///////////////////关于地块相机移动//////////////////////\r\n    passAnimation1() {\r\n        this.ground2.active = true;\r\n        this.groundAnimation.play(\"dikuaiCS\")\r\n        Global.soundManager.playAnimationSound();\r\n\r\n        this.groundAnimation.once(Animation.EventType.FINISHED, () => {\r\n            this.tree2.active = true;\r\n            this.groundObject2.active = true;\r\n          //  this.treeAnimation.play(\"shuCS\")\r\n            this.groundObjectAnmation.play(\"shuCS\")\r\n        })\r\n        const targetPosition = new Vec3(8, 22, 32.7);\r\n        const targetPosition1 = new Vec3(14.8, 19, 32.3);\r\n        const targetPosition2 = new Vec3(0, 21.8, 32.3);\r\n        console.log(\"(this.mainCamera.node =====\" + this.mainCamera.node)\r\n        tween(this.mainCamera.node)\r\n            .to(0.8, { position: targetPosition })\r\n            .call(() => {\r\n                tween(this.mainCamera.node)\r\n                    .to(0.8, { position: targetPosition1 })\r\n                    .call(() => {\r\n                        tween(this.mainCamera.node)\r\n                            .delay(0.5)\r\n                            .to(0.8, { position: targetPosition2 })\r\n                            .call(() => { })\r\n                            .start();\r\n                    })\r\n                    .start();\r\n            })\r\n            .start();\r\n    }\r\n    passAnimation11() {\r\n        const targetPosition = new Vec3(8, 22, 32.7);\r\n        const targetPosition1 = new Vec3(13.8, 19, 43.1);\r\n        tween(this.mainCamera.node)\r\n            .to(0.8, { position: targetPosition })\r\n            .call(() => {\r\n                tween(this.mainCamera.node)\r\n                    .to(0.8, { position: targetPosition1 })\r\n                    .call(() => {\r\n                        Global.isMoveCamreToCorn = false\r\n                    })\r\n                    .start();\r\n            })\r\n            .start();\r\n    }\r\n    passAnimation2() {\r\n        Global.soundManager.playAnimationSound();\r\n\r\n        const targetPosition = new Vec3(13.927, 33.377, 16.287);\r\n        const targetPosition1 = new Vec3(31.3, 47.4, 58.5);\r\n        const targetPosition2 = new Vec3(40.64, 47.385, 58.454);\r\n        const targetPosition3 = new Vec3(15, 15, 37.1);\r\n        this.ground3.active = true;\r\n        this.groundAnimation.play(\"dikuaiCS - 01\")\r\n        this.groundAnimation.once(Animation.EventType.FINISHED, () => {\r\n            this.tree3.active = true;\r\n            this.enemyLandHouse.active = true;\r\n            this.groundObject3.active = true;\r\n            this.tree3.active = true;\r\n            this.treeAnimation.play(\"shuCS - 02\")\r\n            this.groundObjectAnmation.play(\"shuCS - 02\")\r\n        })\r\n        tween(this.mainCamera.node)\r\n            // .to(0.8, { position: targetPosition })\r\n            // .call(() => {\r\n            //     // 第一个动画完成回调\r\n            // })\r\n            .to(1.2, { position: targetPosition1 })\r\n            .call(() => {\r\n                // 第二个动画完成回调\r\n            })\r\n            .delay(0.5)\r\n            // .to(0.8, { position: targetPosition2 })\r\n            // .call(() => {\r\n\r\n\r\n            // })\r\n            .to(1, { position: targetPosition3 })\r\n            .call(() => {\r\n                // 第二个动画完成回调\r\n                this.scheduleOnce(() => {\r\n                    this.arrowGuid.active = true\r\n                }, 0.5)\r\n\r\n            })\r\n            .start();\r\n    }\r\n    passAnimation21() {\r\n        const targetPosition2 = new Vec3(28, 28.4, 42.8);\r\n        tween(this.mainCamera.node)\r\n            .to(1, { position: targetPosition2 })\r\n            .call(() => {\r\n                // 第二个动画完成回调\r\n                this.arrowGuid.active = false\r\n            })\r\n            .start();\r\n    }\r\n\r\n    passAnimation3() {\r\n        Global.soundManager.playAnimationSound();\r\n        //const targetPosition = new Vec3(19.511, 82.498, 106.064);\r\n        const targetPosition = this.cameraPosition1// new Vec3(20, 100, 75);\r\n        //const targetRotation = new Vec3(-55, 0, 0);\r\n        //this.mainCamera.node.setRotationFromEuler(this.cameraRotation);//-55, 0, 0);\r\n        // this.mainCamera.orthoHeight = this.cameraHigeht\r\n        let tree = this.tree3.getChildByName(\"DK-102\")\r\n        tree.children.forEach((child) => {\r\n            if (child.getChildByName(\"UI_famuzhiyin\")) {\r\n                let n = child.getChildByName(\"UI_famuzhiyin\")\r\n                // 获取当前节点的缩放值\r\n                const currentScale = n.scale.clone();\r\n                // 计算放大 1.2 倍后的缩放值\r\n                const targetScale = currentScale.multiplyScalar(1.53);\r\n                tween(n)\r\n                    .to(1.7, { scale: targetScale })\r\n                    .start();\r\n            }\r\n        })\r\n\r\n        tween(this.mainCamera)\r\n            .to(0.5, { orthoHeight: this.cameraHigeht })\r\n            .start();\r\n        tween(this.mainCamera.node)\r\n            // .parallel(\r\n            //     tween().to(0.5, { position: targetPosition }),\r\n            //     tween().to(0.5, { eulerAngles: targetRotation })\r\n            // )\r\n            .to(0.5, { position: targetPosition })\r\n\r\n            .call(() => {\r\n                // 第一个动画完成回调\r\n                this.ground4.active = true;\r\n\r\n\r\n                this.tree4.active = true;\r\n\r\n                this.groundAnimation.play(\"dikuaiCS - 02\")\r\n                this.treeAnimation.play(\"shuCS - 03\")\r\n                this.groundObjectAnmation.play(\"shuCS - 03\")\r\n                this.scheduleOnce(() => {\r\n                    this.groundObject4.active = true;\r\n                    this.ground4UI.active = true;\r\n                }, 1)\r\n            })\r\n            .start();\r\n    }\r\n    showAllTreeClick() {\r\n        for (let i = 0; i < 3; i++) {\r\n            let tree = this.tree3.getChildByName(\"DK-10\" + (i + 1));\r\n            tree.children.forEach((child) => {\r\n                if (child.getChildByName(\"UI_famuzhiyin\")) {\r\n                   // child.getChildByName(\"UI_famuzhiyin\").active = true;\r\n                }\r\n\r\n            })\r\n        }\r\n        //let parentNode = this.tree3.getChildByName\r\n    }\r\n    //////////////////////////////////////////////相机镜头以外的操作\r\n    upgradeTreeHouseAnimation(callback: () => void) {\r\n        if (Global.isPlayHouseAnimation) {\r\n            return;\r\n        }\r\n        Global.isPlayHouseAnimation = false;\r\n        Global.soundManager.playUpSound();\r\n        let house1 = this.treeLandHouse.getChildByName(\"shengjiqian\")\r\n        let house2 = this.treeLandHouse.getChildByName(\"shengjihou\")\r\n        let particle = this.treeLandHouse.getChildByName(\"TX_shengjiLZ\")\r\n        house1.active = false;\r\n        house2.active = true;\r\n        particle.active = true;\r\n        const treeLandHouseAnim = this.treeLandHouse.getComponent(Animation);\r\n        const particleAnim = particle.getComponent(Animation);\r\n\r\n       // const treeLandHouseAnim = this.treeLandHouse.getComponent(Animation);\r\n  \r\n        // 检查特定动画状态（假设动画剪辑名为\"upgrade_anim\"）\r\n        const animState = treeLandHouseAnim.getState(\"shengji_fangzi\");\r\n        if (animState && animState.isPlaying) {\r\n            return;\r\n        }\r\n        // 创建两个 Promise，分别在动画完成时 resolve\r\n        const p1 = new Promise<void>((resolve) => {\r\n            treeLandHouseAnim.play();\r\n            treeLandHouseAnim.once(Animation.EventType.FINISHED, () => {\r\n                resolve();\r\n            });\r\n        });\r\n\r\n        const p2 = new Promise<void>((resolve) => {\r\n            particleAnim.play();\r\n            particleAnim.once(Animation.EventType.FINISHED, () => {\r\n                resolve();\r\n            });\r\n        });\r\n\r\n        // 两个动画都完成后调用回调\r\n        Promise.all([p1, p2]).then(() => {\r\n            callback();\r\n        });\r\n\r\n    }\r\n    upgradeEnemyHouseAnimation(callback: () => void) {\r\n        Global.soundManager.playUpSound();\r\n        let house1 = this.enemyLandHouse.getChildByName(\"shengjiqian\")\r\n        let house2 = this.enemyLandHouse.getChildByName(\"shengjihou\")\r\n        let particle = this.enemyLandHouse.getChildByName(\"TX_shengjiLZ\")\r\n        house1.active = false;\r\n        house2.active = true;\r\n        particle.active = true;\r\n        const treeLandHouseAnim = this.enemyLandHouse.getComponent(Animation);\r\n        const particleAnim = particle.getComponent(Animation);\r\n\r\n        // 创建两个 Promise，分别在动画完成时 resolve\r\n        const p1 = new Promise<void>((resolve) => {\r\n            treeLandHouseAnim.play();\r\n            treeLandHouseAnim.once(Animation.EventType.FINISHED, () => {\r\n                resolve();\r\n            });\r\n        });\r\n\r\n        const p2 = new Promise<void>((resolve) => {\r\n            particleAnim.play();\r\n            particleAnim.once(Animation.EventType.FINISHED, () => {\r\n                resolve();\r\n            });\r\n        });\r\n\r\n        // 两个动画都完成后调用回调\r\n        Promise.all([p1, p2]).then(() => {\r\n            callback();\r\n        });\r\n    }\r\n    hideCornArrow() {\r\n        this.ArrowgroundObject2_1.active = false;\r\n        this.ArrowgroundObject2_2.active = false;\r\n        this.ArrowgroundObject2_3.active = false;\r\n        this.ArrowgroundObject2_4.active = false;\r\n    }\r\n\r\n    upgradeAnimation() {\r\n        const anim = this.upgradeNode.getComponent(Animation);\r\n        if (Global.playerBodyWood > 0 && Global.upgradeUIAnimtion == 1) {\r\n            Global.upgradeUIAnimtion = 2;\r\n            const animState = anim.getState('SJZY');\r\n            if (!animState || animState.isPlaying) {\r\n                return;\r\n            }\r\n            anim.play('SJZY');\r\n        }\r\n        // else if (Global.playerBodyWood >= Global.treeHandOverNumLimit && Global.upgradeUIAnimtion == 2) {\r\n        //     Global.upgradeUIAnimtion = 0;\r\n        //     const animState = anim.getState('WoodTDAni');\r\n        //     if (!animState || animState.isPlaying) {\r\n        //         return;\r\n        //     }\r\n        //     anim.play('WoodTDAni');\r\n        // }\r\n    }\r\n    // start() {\r\n\r\n    // }\r\n\r\n    // update(deltaTime: number) {\r\n\r\n    // }\r\n}\r\n\r\n\r\n"]}