System.register("chunks:///_virtual/AttackState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./State.ts","./Character.ts","./Global.ts","./EventManager.ts","./EventType.ts"],(function(t){var e,n,i,a,o,c,l,u,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.tween},function(t){a=t.CharacterType},function(t){o=t.default},function(t){c=t.BehaviourType},function(t){l=t.Global},function(t){u=t.eventMgr},function(t){r=t.EventType}],execute:function(){n._RF.push({},"2435baHeE1EIpsZwD+bfIes","AttackState",void 0);t("default",function(t){function n(e){var n;return(n=t.call(this)||this).target=null,n.callBcak=null,n.pos=null,n.num=0,n.entity=e,n.pos=n.entity.node.worldPosition.clone(),n}e(n,t);var o=n.prototype;return o.onEnter=function(t){var e=this;if(this.entity.getType()!=a.CHARACTER||this.entity.characterSkeletalAnimation){if(this.entity.target.getType()==a.ENEMY){var n=this.entity.target,o=this.entity;o.isAttack=!0,o.axe.active=!0,o.sickle.active=!1;!function t(){e.entity.characterSkeletalAnimation.play("kanshu"),l.soundManager.playAttackEnemySound(),n.takeDamage(e.entity.attack,(function(e){e?(l.enemyDieNum++,l.enemyDieNum>=4&&u.emit(r.ENTITY_ALL_DIE),o.setBehaviour(c.Idel),o.idle()):i(n).delay(1).call((function(){t()})).start()})),e.scheduleOnce((function(){n.hit()}),.3)}()}}else console.error("骨骼动画组件未初始化")},o.onUpdate=function(t){},o.onExit=function(t){console.log("退出攻击状态"),this.callBcak=null},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/BubbleFead.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,n,i,o,r,c,s,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Node,s=t.UIOpacity,p=t.tween,l=t.Vec3,u=t.Component}],execute:function(){var d,h,f,F,m;o._RF.push({},"7441enf6TFDF4qKO6ibFUrX","BubbleFead",void 0);var g=r.ccclass,y=r.property;t("BubbleFead",(d=g("BubbleFead"),h=y({type:c,tooltip:"升级节点1"}),d((m=e((F=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"imageFead",m,i(e)),e.isFead=!1,e}a(e,t);var o=e.prototype;return o.onLoad=function(){this.imageFead.forEach((function(t){t.addComponent(s)}))},o.start=function(){this.Show()},o.hideFead=function(){this.isFead=!0,this.imageFead.forEach((function(t){var e=t.getComponent(s);e&&p(e).to(.5,{opacity:0}).start()}))},o.getFeadState=function(){return this.isFead},o.Show=function(){this.imageFead.forEach((function(t){var e=t.scale.clone(),a=e.clone().multiplyScalar(1.2),n=t.getComponent(s);n&&(p(n).to(.5,{opacity:255}).start(),p(t).to(.2,{scale:a}).to(.2,{scale:e}).start())}))},o.Show1=function(t){void 0===t&&(t=-1),console.log("num num == ",t),1==t&&(this.imageFead[0].parent.parent.position=new l(this.imageFead[0].parent.parent.position.x,5.763,this.imageFead[0].parent.parent.position.z)),2==t&&(this.imageFead[0].parent.parent.position=new l(this.imageFead[0].parent.parent.position.x,4.763,this.imageFead[0].parent.parent.position.z)),this.imageFead.forEach((function(t){var e=new l(.01,.01,.01),a=e.clone().multiplyScalar(1.2),n=t.getComponent(s);n&&(p(n).to(.5,{opacity:255}).start(),p(t).to(.2,{scale:a}).to(.2,{scale:e}).start())}))},o.update=function(t){},e}(u)).prototype,"imageFead",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=F))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraMain.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,a,s,l,c,u,h,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.v3,l=e.Camera,c=e.CCInteger,u=e.Quat,h=e.Vec3,p=e.tween,d=e.Component}],execute:function(){var f,m,v,w,y,g,P,b,C;r._RF.push({},"7e8602o1ttFs61QDBE8hThK","CameraMain",void 0);var _=a.ccclass,A=a.property;s(),e("CameraMain",(f=_("CameraMain"),m=A(l),v=A(c),w=A(c),f((P=t((g=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"camera",P,o(t)),n(t,"speed",b,o(t)),n(t,"delayTime",C,o(t)),t.initialPos=s(),t.initialRotation=new u,t._tweenAni=void 0,t}i(t,e);var r=t.prototype;return r.start=function(){this.initialPos=this.node.worldPosition.clone(),this.node.getRotation(this.initialRotation)},r.moveToCenter=function(){this.scheduleOnce(this.realMove,this.delayTime)},r.realMove=function(){var e=h.distance(this.node.worldPosition,this.initialPos),t=this.speed*e;this._tweenAni=p(this.node).to(t,{worldPosition:this.initialPos}).start()},r.stopTweenAni=function(){this._tweenAni&&this._tweenAni.stop(),this.unschedule(this.realMove)},r.moveCenterAndScale=function(){var e=this,t=this.camera.orthoHeight;this._tweenAni=p(this.node).to(.5,{worldPosition:this.initialPos},{easing:"sineOut",onUpdate:function(i,n){e.camera.orthoHeight=t+5*n}}).start()},t}(d)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),C=t(g.prototype,"delayTime",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=g))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/Character.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./TreeController.ts","./ResourceManager.ts","./Global.ts","./MathUtils.ts","./EventManager.ts","./EventType.ts"],(function(e){var n,t,r,o,a,i,c,l,u,s,d,p,f,h,y,m,v,g,P,b,k;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,l=e._decorator,u=e.Node,s=e.Material,d=e.SkinnedMeshRenderer,p=e.Vec3,f=e.tween,h=e.instantiate},function(e){y=e.default},function(e){m=e.treeController},function(e){v=e.ResourceManager},function(e){g=e.Global},function(e){P=e.MathUtil},function(e){b=e.eventMgr},function(e){k=e.EventType}],execute:function(){var w,N,M,T,C,B,I,O,x,E,z,H,F,R,W;c._RF.push({},"a36dfgYc2pDkrDtaPmyHo/p","Character",void 0);var A=l.ccclass,S=l.property,U=e("BehaviourType",function(e){return e.Tree="Tree",e.CutTree="CutTree",e.HandOver="HandOver",e.Transmit="Transmit",e.ConrPost="ConrPost",e.CutCorn="CutCorn",e.FindEnemy="FindEnemy",e.FindLandPos="FindLandPos",e.Idel="Idel",e.EnemyHnadOverPos="enemyHnadOverPos",e}({}));e("Character",(w=A("Character"),N=S(u),M=S(u),T=S(s),C=S(s),B=S(s),I=S(d),w((E=n((x=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).isTarget=!1,n.frontage=!0,n.cornIndex=1,n.isFindTarget=!1,n.BehaviourType=U.Idel,n.moveSpeed=8,n.woodNum=0,n.cornNum=0,r(n,"axe",E,o(n)),r(n,"sickle",z,o(n)),r(n,"chapeauMaterial",H,o(n)),r(n,"bodyMaterial",F,o(n)),r(n,"redyMaterial",R,o(n)),r(n,"skinnedMeshRenderer",W,o(n)),n.handOverNode=null,n.cornHandOverNode=null,n.curHanOverType=0,n.groundEffect=null,n.isAttack=!1,n.woodParentBackpack=void 0,n.woodParentBackpack1=void 0,n.initPos=new p(.017,.4,-.225),n.woodNUm=0,n.onlyCollectNum=10,n}t(n,e);var c=n.prototype;return c.setFindTarget=function(e){this.isFindTarget=e},c.getFindTarget=function(){return this.isFindTarget},c.start=function(){this.idle();this.node.getChildByName("backpack"),this.node.getChildByName("backpack1")},c.setBehaviour=function(e){this.BehaviourType=e},c.getBehaviour=function(){return this.BehaviourType},c.nextTree=function(){m.netxTree()},c.getHandOverPosNode=function(){return this.handOverNode},c.getCornHandOverNode=function(){return this.cornHandOverNode},c.shakeRed=function(){var e=this,n=this.node.getChildByName("playerNode").getChildByName("player").getChildByName("Shimin").getComponent(d);f(n.node).sequence(f().call((function(){n.setMaterialInstance(e.redyMaterial,0),n.setMaterialInstance(e.redyMaterial,1)})),f().delay(.2),f().call((function(){n.setMaterialInstance(e.chapeauMaterial,0),n.setMaterialInstance(e.bodyMaterial,1)})),f().delay(.2)).repeat(1).start()},c.collectWood=function(){var e=a(i().mark((function e(n){var t,r,o,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.instance.loadPrefab(g.woodPrefabPath);case 2:for(t=e.sent,r=n.node.getChildByName("backpack"),o=0;o<this.onlyCollectNum;o++)this.scheduleOnce((function(){g.soundManager.playPickUpSound();var e=h(t),o=e.scale.clone(),i=o.clone().multiplyScalar(.75),c=a.initPos.clone();c.y+=.22*n.woodNum,n.woodNum++,g.playerBodyWood++,g.playerBodyWoodAll++,g.playerBodyWoodAll>=g.treeHandOverNumLimit&&b.emit(k.ENTITY_SHOW_TREEHANDE),0!=g.upgradeUIAnimtion&&-1!=g.upgradeUIAnimtion||(g.upgradeUIAnimtion=1),e.setPosition(c),e.setRotationFromEuler(90,90,0),e.parent=r,f(e).to(.1,{scale:i}).to(.1,{scale:o}).start()}),.05*o);case 5:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.collectWoodNew=function(){var e=a(i().mark((function e(n,t,r){var o,a,c,l,u=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.instance.loadPrefab(g.woodPrefabPath);case 2:o=e.sent,a=n.node.getChildByName("backpack"),c=i().mark((function e(){var t,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=h(o),(c=a.worldPosition.clone()).y+=.32*n.woodNum,n.woodNum++,g.playerBodyWood++,g.playerBodyWoodAll++,g.playerBodyWoodAll>=g.treeHandOverNumLimit&&b.emit(k.ENTITY_SHOW_TREEHANDE),t.setRotationFromEuler(90,90,0),t.parent=a,u.randomizeItemsInBackpack1(r,t),u.scheduleOnce((function(){u.restoreItemsInBackpack1(c,t,n),g.soundManager.playPickUpSound()}),.1*l);case 11:case"end":return e.stop()}}),e)})),l=0;case 6:if(!(l<t)){e.next=11;break}return e.delegateYield(c(),"t0",8);case 8:l++,e.next=6;break;case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),c.randomizeItemsInBackpack1=function(e,n){if(e&&e.node){var t,r=e.node.getWorldPosition();do{t=new p(Math.floor(3*Math.random())-1,0,Math.floor(3*Math.random())-1)}while(0===t.x&&0===t.z);var o=new p(r.x+t.x,r.y+t.y,r.z+t.z),a=n,i=a.getWorldPosition().clone(),c=function(){return Math.floor(5*Math.random())-2},l=new p((a.worldPosition.x+o.x)/2+c(),(a.worldPosition.y+o.y)/2+6,(a.worldPosition.z+o.z)/2+c());f(a).to(.1,{},{easing:"cubicInOut",onUpdate:function(e,n){var t=P.bezierCurve(i,l,o,n);e.worldPosition=t}}).call((function(){})).start()}},c.restoreItemsInBackpack1=function(e,n,t){var r=e;if(r){var o=n.getWorldPosition().clone(),a=new p((o.x+r.x)/2,(o.y+r.y)/2+5,(o.z+r.z)/2);f(n).to(.3,{},{easing:"cubicInOut",onUpdate:function(e,n){var i=t.node.getChildByName("backpack"),c=new p(i.worldPosition.x,r.y,i.worldPosition.z),l=P.bezierCurve(o,a,c,n);e.worldPosition=l}}).start()}},c.collectCorn=function(){var e=a(i().mark((function e(n){var t,r,o,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.instance.loadPrefab(g.cornPrefabPath);case 2:for(t=e.sent,r=n.node.getChildByName("backpack1"),o=0;o<4;o++)this.scheduleOnce((function(){g.soundManager.playPickUpSound();var e=h(t),o=e.scale.clone(),i=o.clone().multiplyScalar(.75),c=a.initPos.clone();c.y+=.23*n.cornNum,n.cornNum++,g.playerBodyCornAll++,e.setPosition(c),e.setRotationFromEuler(0,90,0),e.parent=r,f(e).to(.1,{scale:i}).to(.1,{scale:o}).start()}),.05*o);case 5:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.strtMoveTree=function(){var e=this;this.target.setFindState(!1),this.move((function(n){e.cutTree()}))},c.strtMoveHandOver=function(){var e=this;this.move((function(n){n.target=null,e.handOver()}))},c.moveCornPos=function(){var e=this;this.move((function(n){e.setFindTarget(!1),e.BehaviourType=U.CutCorn,e.idle()}))},c.findEnemyPos=function(e,n){var t=this;this.move((function(e){g.characterPosNum++,t.setFindTarget(!1),t.BehaviourType=U.Idel,t.idle(),g.characterPosNum>=4&&(g.isUpgrade=!0)}))},c.findEnemyHandOver=function(){var e=this;this.move((function(n){e.cornHandOver()}))},n}(y)).prototype,"axe",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(x.prototype,"sickle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(x.prototype,"chapeauMaterial",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(x.prototype,"bodyMaterial",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(x.prototype,"redyMaterial",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(x.prototype,"skinnedMeshRenderer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=x))||O));c._RF.pop()}}}));

System.register("chunks:///_virtual/CornHandOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts","./Entity.ts","./Character.ts","./MathUtils.ts","./Global.ts","./EventManager.ts","./EventType.ts"],(function(e){var n,t,o,r,i,a,c,l,s,u,d,v;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.Vec3,i=e.tween},function(e){a=e.default},function(e){c=e.CharacterType},function(e){l=e.BehaviourType},function(e){s=e.MathUtil},function(e){u=e.Global},function(e){d=e.eventMgr},function(e){v=e.EventType}],execute:function(){var h;t._RF.push({},"2fd6fvA0hpAII2AgVK4spqB","CornHandOver",void 0);var f=o.ccclass;o.property,e("CornHandOver",f("CornHandOver")(h=function(e){function t(n){var t;return(t=e.call(this)||this).target=null,t.callBcak=null,t.cornProcessCompleted=!1,t.entity=n,t}n(t,e);var o=t.prototype;return o.onEnter=function(e){if(this.entity.getType()==c.CHARACTER){if(!this.entity.characterSkeletalAnimation)return void console.error("骨骼动画组件未初始化");this.entity.characterSkeletalAnimation.play("kugongnanidel")}this.handOver()},o.onUpdate=function(e){console.log("CornHandOver")},o.onExit=function(e){},o.handOver=function(){var e=this,n=this.entity.getCornHandOverNode();if(n){var t=n.worldPosition.clone(),o=this.entity.node.getChildByName("backpack1");if(o){if(o.children.length<=0)return this.entity.setBehaviour(l.Idel),this.entity.setFindTarget(!1),this.entity.cornNum=0,void console.warn("背包中没有可交付的木头");var a=o.children[o.children.length-1],c=a.getWorldPosition().clone(),h=new r((a.worldPosition.x+t.x)/2,(a.worldPosition.y+t.y)/2+10,(a.worldPosition.z+t.z)/2);i(a).to(.1,{scale:new r(1,1,1)},{easing:"cubicInOut",onUpdate:function(e,n){var o=s.bezierCurve(c,h,t,n);e.worldPosition=o}}).call((function(){if(u.soundManager.playHandOverSound(),!e.cornProcessCompleted&&u.cornHandOverNum>=u.cornHandOverNumLimit)return e.cornProcessCompleted=!0,d.emit(v.ENTITY_CORN_COMPLATE,e,e.entity),void o.removeAllChildren();u.cornHandOverNum++,d.emit(v.ENTITY_CORNHAND_OVER_ADD),a.removeFromParent(),a.destroy(),e.handOver(),console.log("木头交付完成，当前已交付数量:",u.treeHandOverNum)})).start()}else console.error("找不到背包节点")}else console.error("找不到交付位置节点")},t}(a))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/CutCornState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts","./Entity.ts","./Character.ts","./Global.ts","./BubbleFead.ts"],(function(e){var n,t,o,r,c,i,a,d,l,u,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.Animation,c=e.tween,i=e.Vec3},function(e){a=e.default},function(e){d=e.CharacterType},function(e){l=e.BehaviourType},function(e){u=e.Global},function(e){s=e.BubbleFead}],execute:function(){var f;t._RF.push({},"ea0723e23RCnJQVKr51xdMy","CutCornState",void 0);var g=o.ccclass;o.property,e("CutCornState",g("CutCornState")(f=function(e){function t(n){var t;return(t=e.call(this)||this).index=0,t.scheduleHandle=null,t.cornNode=null,t.isFirst=!1,t.tweenInstance=null,t.entity=n,t}n(t,e);var o=t.prototype;return o.getNode=function(e){var n=null;return"0"==e.getId()?(n=e.groundEffect.groundObject2_1,u.cornUnlock[0]=1):"1"==e.getId()?(u.cornUnlock[1]=1,n=e.groundEffect.groundObject2_2):"2"==e.getId()?(n=e.groundEffect.groundObject2_3,u.cornUnlock[2]=1):"3"==e.getId()&&(n=e.groundEffect.groundObject2_4,u.cornUnlock[3]=1),n},o.onEnter=function(e){var n=this,t=this.entity;if(u.isStartMoveEnemyLand)this.clearAllActions(t);else if(this.entity.getType()!=d.CHARACTER||this.entity.characterSkeletalAnimation){t.cornIndex<=1?(t.node.setRotationFromEuler(0,0,0),t.cornIndex=1):(t.node.setRotationFromEuler(0,180,0),t.cornIndex=4),t.axe.active=!1,t.sickle.active=!0;var o=function(){"0"==t.getId()?(t.groundEffect.ArrowgroundObject2_1.active=!0,t.groundEffect.ArrowgroundObject2_1.getComponent(s)&&t.groundEffect.ArrowgroundObject2_1.getComponent(s).Show()):"1"==t.getId()?(t.groundEffect.ArrowgroundObject2_2.active=!0,t.groundEffect.ArrowgroundObject2_2.getComponent(s)&&t.groundEffect.ArrowgroundObject2_2.getComponent(s).Show()):"2"==t.getId()?(t.groundEffect.ArrowgroundObject2_3.active=!0,t.groundEffect.ArrowgroundObject2_3.getComponent(s)&&t.groundEffect.ArrowgroundObject2_3.getComponent(s).Show()):"3"==t.getId()&&(t.groundEffect.ArrowgroundObject2_4.active=!0,t.groundEffect.ArrowgroundObject2_4.getComponent(s)&&t.groundEffect.ArrowgroundObject2_4.getComponent(s).Show())};!function e(){if(u.isStartMoveEnemyLand)n.clearAllActions(t);else{if(t.frontage){if(t.cornIndex>4)return t.cornIndex=4,u.isLandNum++,t.setFindTarget(!1),t.BehaviourType=l.Idel,t.frontage=!1,t.idle(),void(n.scheduleHandle=n.scheduleOnce((function(){n.cornNode.children.forEach((function(e){e.active=!0})),o()}),3))}else if(t.cornIndex<=0)return t.setFindTarget(!1),t.BehaviourType=l.Idel,t.cornIndex=1,t.frontage=!0,t.idle(),n.scheduleHandle=n.scheduleOnce((function(){n.cornNode.children.forEach((function(e){e.active=!0,o()}))}),3),void(u.cornUnlock.every((function(e){return 0!==e}))&&(u.isFirstEnemyLand||(u.isFirstEnemyLand=!0,t.groundEffect.passAnimation2())));n.cornNode=n.getNode(t),t.characterSkeletalAnimation.play("gexiaomai"),t.characterSkeletalAnimation.getState("gexiaomai").speed=2.2,u.soundManager.playCutCronSound(),t.characterSkeletalAnimation.once(r.EventType.FINISHED,(function(){u.isStartMoveEnemyLand?n.clearAllActions(t):(t.characterSkeletalAnimation.play("kugongnanpao"),n.cornNode.getChildByName("ground"+t.cornIndex).active=!1,n.tweenInstance=c(t.node).by(.3,{position:new i(0,0,t.frontage?1.6:-1.6)}).call((function(){if(u.isStartMoveEnemyLand)n.clearAllActions(t);else if(t.collectCorn(n.entity),1!=u.isStartMoveEnemyLand){if(t.frontage?t.cornIndex++:t.cornIndex--,u.isLandNum>=3)u.cornUnlock.every((function(e){return 0!==e}))&&(u.isFirstEnemyLand||(u.isFirstEnemyLand=!0,t.groundEffect.passAnimation2()));e()}else n.clearAllActions(t)})).start())}))}}()}else console.error("骨骼动画组件未初始化")},o.clearAllActions=function(e){this.tweenInstance&&(this.tweenInstance.stop(),this.tweenInstance=null),this.scheduleHandle&&(this.unschedule(this.scheduleHandle),this.scheduleHandle=null),e.characterSkeletalAnimation&&e.characterSkeletalAnimation.stop()},o.onUpdate=function(e){if(u.isStartMoveEnemyLand){var n=this.entity;this.clearAllActions(n)}},o.onExit=function(e){this.clearAllActions(this.entity),e&&e()},t}(a))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/CutTreeState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts","./Entity.ts","./Character.ts","./Global.ts"],(function(t){var e,n,i,a,r,c,o,u,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,a=t.tween,r=t.Animation},function(t){c=t.default},function(t){o=t.CharacterType},function(t){u=t.BehaviourType},function(t){l=t.Global}],execute:function(){var s;n._RF.push({},"c0254e2rPBFnaaIbLp01D/8","CutTreeState",void 0);var h=i.ccclass;i.property,t("CutTreeState",h("CutTreeState")(s=function(t){function n(e){var n;return(n=t.call(this)||this).target=null,n.callback=null,n.num=0,n.currentTween=null,n.isExiting=!1,n.entity=e,n}e(n,t);var i=n.prototype;return i.onEnter=function(t){var e=this;if(this.resetState(),this.callback=t,this.entity.getType()===o.CHARACTER)if(this.entity.characterSkeletalAnimation){var n=this.entity.target;if(n&&n.getType()===o.ENEMY_TREE){var i=this.entity;i.axe.active=!0,i.sickle.active=!1,i.setBehaviour(u.CutTree),this.entity.characterSkeletalAnimation.stop(),this.currentTween=a(n).call((function(){return e.performAttack(n,i)})).start()}}else console.error("骨骼动画组件未初始化")},i.performAttack=function(t,e){var n=this;if(!this.isExiting){console.log("attackLoop  == "+e.getBehaviour()),this.entity.characterSkeletalAnimation.off(r.EventType.FINISHED);this.entity.characterSkeletalAnimation.getState("kanshu").wrapMode;this.scheduleOnce((function(){n.isExiting||(n.num++,t.curCollectNum++,console.log(" this.num  == ",t.curCollectNum),3===t.curCollectNum?e.collectWoodNew(e,4,t):e.collectWoodNew(e,3,t))}),.3),l.soundManager.playCutTreeSound(),this.entity.characterSkeletalAnimation.play("kanshu"),t.playAnimtion("shuKF00"+t.curCutNum),t.animationNum++,t.curCutNum++,t.takeDamage(this.entity.attack,(function(i){if(!n.isExiting)if(i){var r=.3;if(0!=l.treeHandOver)return void(r=0);r=.3,n.scheduleOnce((function(){u.HandOver!=n.entity.BehaviourType&&(e.setFindTarget(!1),e.nextTree(),n.entity.idle(),n.resetState(),n.callback&&n.callback())}),r)}else n.currentTween=a(t).delay(1).call((function(){return n.performAttack(t,e)})).start()}))}},i.resetState=function(){this.num=0,this.isExiting=!1,this.currentTween&&(this.currentTween.stop(),this.currentTween=null),this.entity.characterSkeletalAnimation&&this.entity.characterSkeletalAnimation.off(r.EventType.FINISHED)},i.onUpdate=function(t){},i.onExit=function(t){console.log("退出攻击状态"),this.isExiting=!0,this.resetState(),t&&t()},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/DieState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts"],(function(t){var e,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.default}],execute:function(){n._RF.push({},"4e29eFlEq1ND67YbgeJxUfW","DieState",void 0);t("default",function(t){function n(e){return t.call(this)||this}e(n,t);var o=n.prototype;return o.onEnter=function(){console.log("进入死亡状态")},o.onUpdate=function(t){},o.onExit=function(){console.log("退出死亡状态")},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/DissolveEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,i,n,a,r,o,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,o=e.Material,l=e.SkinnedMeshRenderer,c=e.MeshRenderer,h=e.Component}],execute:function(){var f,m,p,u,d,_;a._RF.push({},"379d8rnrJBLIphfSu77uiVg","DissolveEffect",void 0);var v=r.ccclass,y=r.property;e("DissolveEffect",(f=v("DissolveEffect"),m=y([o]),f((d=t((u=function(e){function t(){for(var t,s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"delayTime",d,n(t)),i(t,"mats",_,n(t)),t._matInstances=[],t._startTime=0,t._playTime=0,t}s(t,e);var a=t.prototype;return a.start=function(){this._createMaterialInstances()},a._createMaterialInstances=function(){var e=this.getComponent(l)||this.getComponent(c);if(e)if(0!==this.mats.length){for(var t=e.materials,s=0;s<this.mats.length;s++){var i=this.mats[s];if(i){var n=null;s<e.materials.length&&(e.setMaterial(i,s),"function"==typeof e.getMaterialInstance&&(n=e.getMaterialInstance(s))),n&&this._matInstances.push(n)}}e.materials=t,this._matInstances.length>0?(e.materials=this._matInstances,console.log("DissolveEffect: 成功为 "+this.node.name+" 创建了 "+this._matInstances.length+" 个材质实例")):console.error("DissolveEffect: 未能创建任何材质实例")}else console.error("DissolveEffect: 没有指定材质");else console.error("DissolveEffect: 找不到 SkinnedMeshRenderer 或 MeshRenderer 组件")},a.play=function(e){this._playTime=e,this._startTime=Date.now()+1e3*this.delayTime;for(var t=0;t<this._matInstances.length;++t)this._matInstances[t].setProperty("dissolveThreshold",0);this.node.getComponent(l).shadowCastingMode=l.ShadowCastingMode.OFF},a.onPlayTest=function(e,t){this.play(t-0)},a.update=function(e){if(this._startTime&&this._playTime&&this._startTime<Date.now()){var t=(Date.now()-this._startTime)/1e3/this._playTime;t>=1&&(t=1,this._startTime=0,this._playTime=0);for(var s=0;s<this._matInstances.length;++s)this._matInstances[s].setProperty("dissolveThreshold",t)}},t}(h)).prototype,"delayTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=t(u.prototype,"mats",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=u))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/enemyCharacter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./goodsDrop.ts","./DissolveEffect.ts","./Global.ts"],(function(t){var e,i,n,a,o,r,s,l,c,h,d,u,p,m,f,g,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Vec3,l=t.Material,c=t.Quat,h=t.Animation,d=t.MeshRenderer,u=t.tween},function(t){p=t.CharacterType,m=t.default},function(t){f=t.goodsDrop},function(t){g=t.DissolveEffect},function(t){y=t.Global}],execute:function(){var v,k,w,b,P,C,D,I,A,T,F,N,S;o._RF.push({},"2655bVKX3JNDop01KCSWu4X","enemyCharacter",void 0);var W=r.ccclass,M=r.property;t("enemyCharacter",(v=W("enemyCharacter"),k=M(g),w=M(s),b=M(Number),P=M(l),C=M(l),v((A=e((I=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).type=p.ENEMY,e.hp=4,e.isFindCharacter=!1,e.attackNum=1e4,n(e,"dissolve",A,a(e)),e.isFindWay=!0,n(e,"findWay",T,a(e)),n(e,"speedTime",F,a(e)),e._bloodOffset=new s(0,4.5,0),e.currentWaypointIndex=0,e.isMovingToWaypoint=!1,e.speed=7,e.targetPos=new s,e.stopDistance=2,e.callback=null,e.tempDir=new s,e.tempMoveVec=new s,e.tempNextPos=new s,e.tempForward=new s,e.tempRotation=new c,e.tempParentRotation=new c,e.tempParentRotationInv=new c,e.shoudleAnimation=void 0,n(e,"baseMaterial",N,a(e)),n(e,"redMaterial",S,a(e)),e.isDie=!1,e.num=0,e.isdie=!1,e.hasInitGoods=!1,e}i(e,t);var o=e.prototype;return o.onLoad=function(){},o.start=function(){this.init()},o.update=function(t){this.onUpdate(t)},o.init=function(){this.characterSkeletalAnimation?(this.stopDistance=2,this.toMove()):console.error("骨骼动画组件未初始化")},o.attackEventCallBack=function(){y.isAttackWarn||(y.warnUI.playWarnFadeAnimation(),y.isAttackWarn=!0),console.log("攻击帧事件回调");var t=this.target.node.getChildByName("TX_sangshigongji");t.active=!0,t.getComponent(h).play()},o.attacHitkEventCallBack=function(){var t=this.target.characterSkeletalAnimation;this.target.isAttack||(t.stop(),t.play("shouji")),this.target.shakeRed(),t.once(h.EventType.FINISHED,(function(){t.play("kugongnanidel")}),this)},o.hit=function(){var t=this;if(!(this.hp<=0)){var e=this.node.getChildByName("sangshi").getChildByName("fbx_zombie_runnerL").getComponent(d);u(e.node).sequence(u().call((function(){t.num++,t.num>=3&&t.die(),console.log("切换到目标材质"),e.material=t.redMaterial})),u().delay(.2),u().call((function(){e.material=t.baseMaterial})),u().delay(.2)).repeat(1).start()}},o.toMove=function(){var t=this;if(this.scheduleOnce((function(){t.characterSkeletalAnimation.play("run")}),.3),this.findWay&&this.findWay.length>0){for(var e=u(this.node).to(this.speedTime,{position:this.findWay[0]}),i=1;i<this.findWay.length;i++)e.to(this.speedTime,{position:this.findWay[i]});e.call((function(){t.isFindWay=!1})).start()}},o.die=function(){var t=this;0==this.isDie&&(this.isDie=!0,y.soundManager.playEnemySound(),this.shoudleAnimation&&(this.unschedule(this.shoudleAnimation),this.shoudleAnimation=null),this.attackNum=-1,this.characterSkeletalAnimation.play("death"),this.characterSkeletalAnimation.once(h.EventType.FINISHED,(function(){t.dissolve&&t.dissolve.play(.8),t.scheduleOnce((function(){t.node.active=!1,t.node.destroy()}),.8)})))},o.onUpdate=function(t){this.isFindCharacter&&(y.soundManager.playEnemySound(),this.isFindWay||(this.moveTargetWorldPos=this.target.node.worldPosition.clone(),s.copy(this.targetPos,this.moveTargetWorldPos),this.moveToTarget(t,this.targetPos)&&(this.isFindCharacter=!1)))},o.attackCharactr=function(){var t=this;if(y.soundManager.playEnemySound(),this.num<3){if(!(this.attackNum>0))return;this.characterSkeletalAnimation.play("attack"),this.characterSkeletalAnimation.once(h.EventType.FINISHED,(function(){if(t.target.characterSkeletalAnimation){if(!(t.hp<=0||(t.attackNum--,t.hp<=0))){if(!t.hasInitGoods){var e;t.node.getChildByName("UI_gongji");0==(null==(e=t.node.getChildByName("UI_ZYXS"))?void 0:e.active)&&(t.node.getChildByName("UI_ZYXS").active=!0),t.target.getComponent(f).initGoods(),console.log("(this.node.name == ",t.node.name);var i=t.node.name.match(/SangshiPrefab_(\d+)/);if(i){var n=i[1],a=t.node.getParent().getChildByName("UI_gongji_"+n);if(a){var o=t.node.worldPosition.clone(),r=new s;s.add(r,o,t._bloodOffset),a.setWorldPosition(r),a.active=!0}}t.hasInitGoods=!0}t.target.getComponent(f).randomizeItemsInBackpack(0,1),t.target.getComponent(f).randomizeItemsInBackpack(1,1),t.attackCharactr()}}else console.error("骨骼动画组件不存在！")}))}},o.lookAtTarget=function(t){var e;s.subtract(this.tempForward,t,this.node.worldPosition),this.tempForward.y=0,this.tempForward.normalize();var i=null==(e=this.node.parent)?void 0:e.parent;i&&(i.getRotation(this.tempParentRotation),c.invert(this.tempParentRotationInv,this.tempParentRotation),s.transformQuat(this.tempForward,this.tempForward,this.tempParentRotationInv)),c.fromViewUp(this.tempRotation,this.tempForward,s.UP),this.node.setRotation(this.tempRotation)},o.moveToTarget=function(t,e){s.subtract(this.tempDir,e,this.node.worldPosition),this.tempDir.y=0;var i=this.tempDir.length();if(i<this.stopDistance)return this.attackCharactr(),!0;this.tempDir.normalize();var n=this.speed*t;return n>=i?(this.node.worldPosition=e.clone(),this.lookAtTarget(e),this.attackCharactr(),!0):(s.multiplyScalar(this.tempMoveVec,this.tempDir,n),s.add(this.tempNextPos,this.node.worldPosition,this.tempMoveVec),this.node.worldPosition=this.tempNextPos,this.lookAtTarget(e),!1)},o.onExit=function(){this.moveTargetWorldPos=null,this.speed=0,this.targetPos.set(0,0,0),this.stopDistance=2,this.isFindCharacter=!1,this.callback=null},e}(m)).prototype,"dissolve",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(I.prototype,"findWay",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(I.prototype,"speedTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),N=e(I.prototype,"baseMaterial",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(I.prototype,"redMaterial",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=I))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyTree.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts"],(function(n){var t,e,i,r,o,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,r=n.Animation},function(n){o=n.CharacterType,c=n.default}],execute:function(){var u;e._RF.push({},"8a1c9DsfcNAnazRBI0o6TLw","EnemyTree",void 0);var a=i.ccclass;n("EnemyTree",a("EnemyTree")(u=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))||this).isFind=!1,t.dropNum=3,t.type=o.ENEMY_TREE,t.hp=3,t.animationNum=null,t.curCutNum=1,t.curCollectNum=0,t}t(e,n);var i=e.prototype;return i.playAnimtion=function(n){this.node.getComponent(r).play(n)},i.showArrowTarger=function(){this.node.getChildByName("UI_famuzhiyin").active=!0},i.hideArrowTarger=function(){this.node.getChildByName("UI_famuzhiyin").active=!1},i.setFindState=function(n){this.isFind=n},i.getFindState=function(){return this.isFind},i.die=function(){var n=this;this.scheduleOnce((function(){n.node.active=!1}),1)},i.getDropNum=function(){return this.dropNum},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SateMachine.ts","./AttackState.ts","./DieState.ts","./HurtState.ts","./IdleState.ts","./MoveState.ts","./CutTreeState.ts","./HandOver.ts","./CutCornState.ts","./CornHandOver.ts"],(function(t){var e,n,i,a,s,o,c,h,r,u,d,f,l,p,S,v,M,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,c=t.SkeletalAnimation,h=t.Component},function(t){r=t.default},function(t){u=t.default},function(t){d=t.default},function(t){f=t.default},function(t){l=t.default},function(t){p=t.MoveState},function(t){S=t.CutTreeState},function(t){v=t.HandOver},function(t){M=t.CutCornState},function(t){m=t.CornHandOver}],execute:function(){var y,g,C,E,T;s._RF.push({},"0f493LyxX9NEKaiBUSjWgCT","Entity",void 0);var H=t("CharacterType",function(t){return t.CHARACTER="character",t.ENEMY_TREE="enemyTree",t.ENEMY="enemy",t.ENEMY_ELITE="enemy1",t}({})),k=o.ccclass,w=o.property;t("default",(y=k("Entity"),g=w(c),y((T=e((E=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this).id=void 0,e.entityName=void 0,e.hp=0,e.maxHp=0,e.attack=0,e.defense=0,e.type=H.CHARACTER,e.moveSpeed=0,e.stateMachine=new r,e.target=null,e.moveTargetWorldPos=null,e.moveCallBack=null,i(e,"characterSkeletalAnimation",T,a(e)),e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.stateMachine.addState("idle",new l(this)),this.stateMachine.addState("attack",new u(this)),this.stateMachine.addState("hurt",new f(this)),this.stateMachine.addState("die",new d(this)),this.stateMachine.addState("move",new p(this)),this.stateMachine.addState("cutTree",new S(this)),this.stateMachine.addState("handOver",new v(this)),this.stateMachine.addState("cutCorn",new M(this)),this.stateMachine.addState("cornHandOver",new m(this)),this.setupEventListeners()},s.getMachineName=function(){return this.stateMachine.getStateName()},s.start=function(){},s.setMoveSpeed=function(t){this.moveSpeed=t},s.getMoveSpeed=function(){return this.moveSpeed},s.setData=function(t,e,n,i,a){this.id=t,this.entityName=e,this.hp=n,this.maxHp=n,this.attack=i,this.type=a},s.getId=function(){return this.id},s.getEntityName=function(){return this.entityName},s.getType=function(){return this.type},s.entitySetPosition=function(t){this.node.setPosition(t)},s.entityGetPosition=function(){return this.node.position},s.setupEventListeners=function(){},s.takeDamage=function(t,e){var n=Math.max(t-this.defense,0);console.log("damage damage "+t),console.log("this.defense this.defense "+this.defense),this.hp-=n,this.hp<=0?this.die(e):this.stateMachine.setState("hurt"),e&&e(this.hp<=0)},s.heal=function(t){this.hp=Math.min(this.hp+t,this.maxHp)},s.die=function(t){this.stateMachine.setState("die",t)},s.move=function(t){this.stateMachine.setState("move",t)},s.idle=function(){this.stateMachine.setState("idle")},s.update=function(t){this.stateMachine.update(t)},s.useSkill=function(t){this.stateMachine.setState("attack",t)},s.cutTree=function(t){this.stateMachine.setState("cutTree",t)},s.handOver=function(t){this.stateMachine.setState("handOver",t)},s.cornHandOver=function(t){this.stateMachine.setState("cornHandOver",t)},s.cutCorn=function(t){this.stateMachine.setState("cutCorn",t)},e}(h)).prototype,"characterSkeletalAnimation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=E))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"65074gMR/5BKreMCnjeVaja","EventManager",void 0);var r=e("EventManager",function(){function e(){this._eventMap=new Map}var a=e.prototype;return a.on=function(e,t,n){this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push({callback:t,target:n})},a.once=function(e,t,n){var a=this;this.on(e,(function r(){a.off(e,r,n);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];t.apply(n,c)}),n)},a.off=function(e,t,n){if(this._eventMap.has(e)){var a=this._eventMap.get(e);if(t)for(var r=a.length-1;r>=0;r--){var i=a[r];t&&i.callback!==t||n&&i.target!==n||a.splice(r,1)}else a.length=0}},a.emit=function(e){if(this._eventMap.has(e)){for(var n=this._eventMap.get(e).slice(),a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];for(var c,o=t(n);!(c=o()).done;){var s=c.value;try{s.callback.apply(s.target,r)}catch(t){console.error("EventManager emit error: "+e,t)}}}},a.removeAll=function(e){var t=this;this._eventMap.forEach((function(n,a){t.off(a,null,e)}))},n(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}());r._instance=null;e("eventMgr",r.instance);a._RF.pop()}}}));

System.register("chunks:///_virtual/EventType.ts",["cc"],(function(E){var T;return{setters:[function(E){T=E.cclegacy}],execute:function(){T._RF.push({},"2c41bpB2nRIy65rfyj/OpS3","EventType",void 0);E("EventType",function(E){return E.ENTITY_MOVE_TREE="ENTITY_MOVE_TREE",E.ENTITY_MOVE_HAND_OVER="ENTITY_MOVE_HAND_OVER",E.ENTITY_HAND_OVER_ADD="ENTITY_HAND_OVER_ADD",E.ENTITY_TREE_COMPLATE="ENTITY_TREE_COMPLATE",E.ENTITY_TREE_TRANSMIT="ENTITY_TREE_TRANSMIT",E.ENTITY_CORN_CUT="ENTITY_CORN_CUT",E.ENTITY_ENEMY_TRANSMIT="ENTITY_ENEMY_TRANSMIT",E.ENTITY_ENEMY_DIE="ENTITY_ENEMY_DIE",E.ENTITY_ENEMY_HAND_OVER="ENTITY_ENEMY_HAND_OVER",E.ENTITY_CORNHAND_OVER_ADD="ENTITY_CORNHAND_OVER_ADD",E.ENTITY_CORN_COMPLATE="ENTITY_CORN_COMPLATE",E.ENTITY_CLICK_ENEMY="ENTITY_CLICK_ENEMY",E.ENTITY_SHOW_TREEHANDE="ENTITY_SHOW_TREEHANDE",E.ENTITY_ALL_DIE="ENTITY_ALL_DIE",E.SHOW_ENEMY="SHOW_ENEMY",E.GAME_OVER="GAME_OVER",E.ENTITY_HAND_OVER_NO="ENTITY_HAND_OVER_NO",E}({}));T._RF.pop()}}}));

System.register("chunks:///_virtual/GameEndUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./super_html_playable.ts"],(function(n){var e,t,o,c,r;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,c=n.Component},function(n){r=n.default}],execute:function(){var a;t._RF.push({},"41ecaz4f/JI1KuWQ4nZW93i","GameEndUI",void 0);var u=o.ccclass;o.property,n("GameEndUI",u("GameEndUI")(a=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.downlodBtnCallBack=function(){console.log("点击了下载按钮"),r.download()},t}(c))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"c7e99tDzotELodeip+xvqKx","Global",void 0);var a=e("Global",(function(){}));a.isAttackWarn=!1,a.soundManager=null,a.characterFindTree=1,a.characterPrefabPath="Prefab/Player",a.woodPrefabPath="Prefab/Wood",a.cornPrefabPath="Prefab/yumi1",a.isPlayHouseAnimation=!1,a.treeHandOverNum=0,a.treeHandOverNumLimit=50,a.playerBodyWood=0,a.playerBodyWoodTest=0,a.clickCornLand=[0,0,0,0,0],a.playerBodyWoodAll=0,a.playerBodyCornAll=0,a.clickNum=1,a.cornHandOverNum=0,a.cornHandOverNumLimit=50,a.cornUnlock=[0,0,0,0],a.isEnemyCutTree=!1,a.isUpgrade=!1,a.isMoveCamreToCorn=!0,a.isFirstEnemyLand=!1,a.isStartMoveEnemyLand=!1,a.isClickUpLandTree=!0,a.isClickUpLandCorn=!0,a.isClickEnemy=!1,a.characterPosNum=0,a.upgradeUIAnimtion=0,a.upgradeAnimationgPlayTyep=1,a.warnUI=null,a.isClickUpgrade=!1,a.isClickUpgradeEnemy=!1,a.isClickEnemy1=!1,a.isClickEnemy2=!1,a.isClickEnemy3=!1,a.isClickEnemy4=!1,a.isLandNum=0,a.enemyDieNum=0,a.treeHandOver=!1,a.showTreeUI=!1,a.showTreeUINode=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/goodsDrop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtils.ts","./Global.ts","./EventManager.ts","./EventType.ts"],(function(t){var n,o,e,i,r,a,s,c,l,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Vec3,r=t.tween,a=t.Component},function(t){s=t.MathUtil},function(t){c=t.Global},function(t){l=t.eventMgr},function(t){u=t.EventType}],execute:function(){var d;o._RF.push({},"112eeDqeHJIgrsFine77m5L","goodsDrop",void 0);var h=e.ccclass;e.property,t("goodsDrop",h("goodsDrop")(d=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).backpacks=[{parentNode:null,indexLength:0,originalPositions:new Map,name:"backpack1",restoringCount:0},{parentNode:null,indexLength:0,originalPositions:new Map,name:"backpack",restoringCount:0}],n.totalRestoringCount=0,n}n(o,t);var e=o.prototype;return e.start=function(){this.initGoods()},e.update=function(t){},e.initGoods=function(){var t=this;this.backpacks.forEach((function(n){n.parentNode=t.node.getChildByName(n.name),n.parentNode&&(n.indexLength=n.parentNode.children.length-1,n.parentNode.children.forEach((function(t){n.originalPositions.set(t,t.getWorldPosition().clone())})))}))},e.randomizeItemsInBackpack=function(t,n){var o=this;void 0===n&&(n=1);var e=-.8;0==t&&(e=-.5);var a=this.backpacks[t];if(!(n<0||!a.parentNode||a.indexLength<0)){var c,l=a.parentNode.getWorldPosition();do{c=new i(Math.floor(7*Math.random())-3,e,Math.floor(7*Math.random())-3)}while(0===c.x&&0===c.z);var u=new i(l.x+c.x,l.y+c.y,l.z+c.z),d=a.parentNode.children[a.indexLength],h=d.getWorldPosition().clone(),p=function(){return Math.floor(5*Math.random())-2},g=new i((d.worldPosition.x+u.x)/2+p(),(d.worldPosition.y+u.y)/2+6,(d.worldPosition.z+u.z)/2+p());r(d).to(.1,{},{easing:"cubicInOut",onUpdate:function(t,n){var o=s.bezierCurve(h,g,u,n);t.worldPosition=o}}).call((function(){a.indexLength--,o.randomizeItemsInBackpack(t,n-1)})).start()}},e.restoreItemsInBackpack=function(t){var n=this.backpacks[t];if(null!=n&&n.parentNode){var o=n.parentNode.children,e=0;n.indexLength-2>=0&&(e=n.indexLength-2);var a=o.length-e;n.restoringCount=a,this.totalRestoringCount+=a;for(var l=e;l<o.length;l++)(function(e){var a=this,l=o[e];l?this.scheduleOnce((function(){var o=n.originalPositions.get(l);if(o){var e=l.getWorldPosition().clone(),u=new i((e.x+o.x)/2,(e.y+o.y)/2+5,(e.z+o.z)/2);c.soundManager.playPickUpSound(),r(l).to(.3,{},{easing:"cubicInOut",onUpdate:function(t,n){var i=s.bezierCurve(e,u,o,n);t.worldPosition=i}}).call((function(){a.itemRestoreComplete(t)})).start()}else a.itemRestoreComplete(t)}),.1*e):this.itemRestoreComplete(t)}).call(this,l)}},e.itemRestoreComplete=function(t){var n=this.backpacks[t];if(n){var o;if(n.restoringCount--,this.totalRestoringCount--,n.restoringCount<=0)n.indexLength=(null==(o=n.parentNode)?void 0:o.children.length)-1||0;this.checkAllItemsRestored()}},e.checkAllItemsRestored=function(){this.totalRestoringCount<=0&&l.emit(u.GAME_OVER)},e.restoreItemsInAllBackpacks=function(){var t=this;this.totalRestoringCount=0,this.backpacks.forEach((function(t){t.restoringCount=0})),this.backpacks.forEach((function(n,o){t.restoreItemsInBackpack(o)}))},o}(a))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/GroundEffct.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(e){var n,t,i,r,o,a,u,l,c,p,d,s,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Camera,l=e.Animation,c=e.Node,p=e.Vec3,d=e.tween,s=e.Component},function(e){g=e.Global}],execute:function(){var m,b,f,y,h,w,v,A,j,C,z,O,_,H,S,N,I,E,L,P,B,T,D,U,G,F,M,k,Z,R,K,q,J,X,Y,x,V,W,Q,$,ee,ne,te,ie,re,oe,ae,ue,le,ce,pe,de,se,ge,me,be,fe,ye,he,we,ve,Ae,je,Ce,ze,Oe,_e;o._RF.push({},"2d89aKBkCZPPpohnU22mehu","GroundEffct",void 0);var He=a.ccclass,Se=a.property;e("GroundEffct",(m=He("GroundEffct"),b=Se(u),f=Se(l),y=Se(c),h=Se(c),w=Se(c),v=Se(c),A=Se(c),j=Se(l),C=Se(c),z=Se(c),O=Se(c),_=Se(c),H=Se(l),S=Se(c),N=Se(c),I=Se(c),E=Se(c),L=Se(c),P=Se(c),B=Se(c),T=Se(c),D=Se(c),U=Se(c),G=Se(c),F=Se(c),M=Se(c),k=Se(c),Z=Se(c),R=Se(c),K=Se({type:p,tooltip:"相机位置"}),q=Se({type:p,tooltip:"相机旋转"}),J=Se({type:Number,tooltip:"相机高度"}),m((x=n((Y=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"mainCamera",x,r(n)),i(n,"groundAnimation",V,r(n)),i(n,"ground1",W,r(n)),i(n,"ground2",Q,r(n)),i(n,"ground3",$,r(n)),i(n,"ground4",ee,r(n)),i(n,"ground4UI",ne,r(n)),i(n,"treeAnimation",te,r(n)),i(n,"tree1",ie,r(n)),i(n,"tree2",re,r(n)),i(n,"tree3",oe,r(n)),i(n,"tree4",ae,r(n)),i(n,"groundObjectAnmation",ue,r(n)),i(n,"groundObject1",le,r(n)),i(n,"groundObject2",ce,r(n)),i(n,"groundObject3",pe,r(n)),i(n,"groundObject4",de,r(n)),i(n,"groundObject2_1",se,r(n)),i(n,"groundObject2_2",ge,r(n)),i(n,"groundObject2_3",me,r(n)),i(n,"groundObject2_4",be,r(n)),i(n,"ArrowgroundObject2_1",fe,r(n)),i(n,"ArrowgroundObject2_2",ye,r(n)),i(n,"ArrowgroundObject2_3",he,r(n)),i(n,"ArrowgroundObject2_4",we,r(n)),i(n,"arrowGuid",ve,r(n)),i(n,"upgradeNode",Ae,r(n)),i(n,"treeLandHouse",je,r(n)),i(n,"enemyLandHouse",Ce,r(n)),i(n,"cameraPosition1",ze,r(n)),i(n,"cameraRotation",Oe,r(n)),i(n,"cameraHigeht",_e,r(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){this.tree3.active=!1},o.passAnimation1=function(){var e=this;this.ground2.active=!0,this.groundAnimation.play("dikuaiCS"),g.soundManager.playAnimationSound(),this.groundAnimation.once(l.EventType.FINISHED,(function(){e.tree2.active=!0,e.groundObject2.active=!0,e.groundObjectAnmation.play("shuCS")}));var n=new p(8,22,32.7),t=new p(14.8,19,32.3),i=new p(0,21.8,32.3);console.log("(this.mainCamera.node ====="+this.mainCamera.node),d(this.mainCamera.node).to(.8,{position:n}).call((function(){d(e.mainCamera.node).to(.8,{position:t}).call((function(){d(e.mainCamera.node).delay(.5).to(.8,{position:i}).call((function(){})).start()})).start()})).start()},o.passAnimation11=function(){var e=this,n=new p(8,22,32.7),t=new p(13.8,19,43.1);d(this.mainCamera.node).to(.8,{position:n}).call((function(){d(e.mainCamera.node).to(.8,{position:t}).call((function(){g.isMoveCamreToCorn=!1})).start()})).start()},o.passAnimation2=function(){var e=this;g.soundManager.playAnimationSound();new p(13.927,33.377,16.287);var n=new p(31.3,47.4,58.5),t=(new p(40.64,47.385,58.454),new p(15,15,37.1));this.ground3.active=!0,this.groundAnimation.play("dikuaiCS - 01"),this.groundAnimation.once(l.EventType.FINISHED,(function(){e.tree3.active=!0,e.enemyLandHouse.active=!0,e.groundObject3.active=!0,e.tree3.active=!0,e.treeAnimation.play("shuCS - 02"),e.groundObjectAnmation.play("shuCS - 02")})),d(this.mainCamera.node).to(1.2,{position:n}).call((function(){})).delay(.5).to(1,{position:t}).call((function(){e.scheduleOnce((function(){e.arrowGuid.active=!0}),.5)})).start()},o.passAnimation21=function(){var e=this,n=new p(28,28.4,42.8);d(this.mainCamera.node).to(1,{position:n}).call((function(){e.arrowGuid.active=!1})).start()},o.passAnimation3=function(){var e=this;g.soundManager.playAnimationSound();var n=this.cameraPosition1;this.tree3.getChildByName("DK-102").children.forEach((function(e){if(e.getChildByName("UI_famuzhiyin")){var n=e.getChildByName("UI_famuzhiyin"),t=n.scale.clone().multiplyScalar(1.53);d(n).to(1.7,{scale:t}).start()}})),d(this.mainCamera).to(.5,{orthoHeight:this.cameraHigeht}).start(),d(this.mainCamera.node).to(.5,{position:n}).call((function(){e.ground4.active=!0,e.tree4.active=!0,e.groundAnimation.play("dikuaiCS - 02"),e.treeAnimation.play("shuCS - 03"),e.groundObjectAnmation.play("shuCS - 03"),e.scheduleOnce((function(){e.groundObject4.active=!0,e.ground4UI.active=!0}),1)})).start()},o.showAllTreeClick=function(){for(var e=0;e<3;e++){this.tree3.getChildByName("DK-10"+(e+1)).children.forEach((function(e){e.getChildByName("UI_famuzhiyin")}))}},o.upgradeTreeHouseAnimation=function(e){if(!g.isPlayHouseAnimation){g.isPlayHouseAnimation=!1,g.soundManager.playUpSound();var n=this.treeLandHouse.getChildByName("shengjiqian"),t=this.treeLandHouse.getChildByName("shengjihou"),i=this.treeLandHouse.getChildByName("TX_shengjiLZ");n.active=!1,t.active=!0,i.active=!0;var r=this.treeLandHouse.getComponent(l),o=i.getComponent(l),a=r.getState("shengji_fangzi");if(!a||!a.isPlaying){var u=new Promise((function(e){r.play(),r.once(l.EventType.FINISHED,(function(){e()}))})),c=new Promise((function(e){o.play(),o.once(l.EventType.FINISHED,(function(){e()}))}));Promise.all([u,c]).then((function(){e()}))}}},o.upgradeEnemyHouseAnimation=function(e){g.soundManager.playUpSound();var n=this.enemyLandHouse.getChildByName("shengjiqian"),t=this.enemyLandHouse.getChildByName("shengjihou"),i=this.enemyLandHouse.getChildByName("TX_shengjiLZ");n.active=!1,t.active=!0,i.active=!0;var r=this.enemyLandHouse.getComponent(l),o=i.getComponent(l),a=new Promise((function(e){r.play(),r.once(l.EventType.FINISHED,(function(){e()}))})),u=new Promise((function(e){o.play(),o.once(l.EventType.FINISHED,(function(){e()}))}));Promise.all([a,u]).then((function(){e()}))},o.hideCornArrow=function(){this.ArrowgroundObject2_1.active=!1,this.ArrowgroundObject2_2.active=!1,this.ArrowgroundObject2_3.active=!1,this.ArrowgroundObject2_4.active=!1},o.upgradeAnimation=function(){var e=this.upgradeNode.getComponent(l);if(g.playerBodyWood>0&&1==g.upgradeUIAnimtion){g.upgradeUIAnimtion=2;var n=e.getState("SJZY");if(!n||n.isPlaying)return;e.play("SJZY")}},n}(s)).prototype,"mainCamera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(Y.prototype,"groundAnimation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(Y.prototype,"ground1",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(Y.prototype,"ground2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(Y.prototype,"ground3",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(Y.prototype,"ground4",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(Y.prototype,"ground4UI",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(Y.prototype,"treeAnimation",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(Y.prototype,"tree1",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(Y.prototype,"tree2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(Y.prototype,"tree3",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n(Y.prototype,"tree4",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=n(Y.prototype,"groundObjectAnmation",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=n(Y.prototype,"groundObject1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=n(Y.prototype,"groundObject2",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=n(Y.prototype,"groundObject3",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=n(Y.prototype,"groundObject4",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=n(Y.prototype,"groundObject2_1",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=n(Y.prototype,"groundObject2_2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=n(Y.prototype,"groundObject2_3",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=n(Y.prototype,"groundObject2_4",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=n(Y.prototype,"ArrowgroundObject2_1",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=n(Y.prototype,"ArrowgroundObject2_2",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=n(Y.prototype,"ArrowgroundObject2_3",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=n(Y.prototype,"ArrowgroundObject2_4",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=n(Y.prototype,"arrowGuid",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=n(Y.prototype,"upgradeNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=n(Y.prototype,"treeLandHouse",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=n(Y.prototype,"enemyLandHouse",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=n(Y.prototype,"cameraPosition1",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(20,100,75)}}),Oe=n(Y.prototype,"cameraRotation",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(-55,0,0)}}),_e=n(Y.prototype,"cameraHigeht",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),X=Y))||X));o._RF.pop()}}}));

System.register("chunks:///_virtual/HandOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts","./Entity.ts","./Character.ts","./MathUtils.ts","./Global.ts","./EventManager.ts","./EventType.ts"],(function(e){var t,n,o,r,i,a,d,l,u,s,c,y;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.Vec3,i=e.tween},function(e){a=e.default},function(e){d=e.CharacterType},function(e){l=e.BehaviourType},function(e){u=e.MathUtil},function(e){s=e.Global},function(e){c=e.eventMgr},function(e){y=e.EventType}],execute:function(){var v;n._RF.push({},"e36a6IxqDNMW6JthzI2Ogd2","HandOver",void 0);var p=o.ccclass;o.property,e("HandOver",p("HandOver")(v=function(e){function n(t){var n;return(n=e.call(this)||this).target=null,n.callBcak=null,n.playerBoyNum=0,n.entity=t,n}t(n,e);var o=n.prototype;return o.onEnter=function(e){if(this.entity.getType()==d.CHARACTER){if(!this.entity.characterSkeletalAnimation)return void console.error("骨骼动画组件未初始化");this.entity.characterSkeletalAnimation.play("kugongnanidel")}s.playerBodyWoodTest=s.playerBodyWood,this.handOver()},o.onUpdate=function(e){console.log("HandOver")},o.onExit=function(e){},o.handOver=function(){var e=this;s.playerBodyWood>0&&2==s.upgradeUIAnimtion&&(s.upgradeUIAnimtion=3);var t=this.entity.getHandOverPosNode();if(t){var n=t.worldPosition.clone(),o=this.entity.node.getChildByName("backpack");if(o){if(o.children.length<=0)return this.entity.setBehaviour(l.Idel),this.entity.setFindTarget(!1),this.entity.woodNum=0,s.treeHandOverNum<s.treeHandOverNumLimit&&c.emit(y.ENTITY_HAND_OVER_NO),void console.warn("背包中没有可交付的木头");var a=o.children[o.children.length-1],d=a.getWorldPosition().clone(),v=new r((a.position.x+n.x)/2,(a.position.y+n.y)/2+10,(a.position.z+n.z)/2);i(a).to(.1,{scale:new r(1,1,1)},{easing:"cubicInOut",onUpdate:function(e,t){var o=u.bezierCurve(d,v,n,t);e.worldPosition=o}}).call((function(){if(s.treeHandOverNum++,s.soundManager.playHandOverSound(),s.treeHandOverNum>=s.treeHandOverNumLimit)return c.emit(y.ENTITY_TREE_COMPLATE),void(a&&(e.entity.woodNum--,e.entity.woodNum<0&&(e.entity.woodNum=0),a.removeFromParent(),a.destroy(),s.upgradeUIAnimtion=5));e.entity.woodNum--,s.playerBodyWood--,s.playerBodyWoodTest--,console.log("Global.playerBodyWood == "+s.playerBodyWood),s.playerBodyWoodTest<=0&&(s.playerBodyWoodTest=0,s.upgradeUIAnimtion=5),e.entity.woodNum<0&&(e.entity.woodNum=0,s.treeHandOverNum<s.treeHandOverNumLimit&&c.emit(y.ENTITY_HAND_OVER_NO)),c.emit(y.ENTITY_HAND_OVER_ADD),a.removeFromParent(),a.destroy(),e.handOver(),console.log("木头交付完成，当前已交付数量:",s.treeHandOverNum)})).start()}else console.error("找不到背包节点")}else console.error("找不到交付位置节点")},n}(a))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/HurtState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts"],(function(t){var n,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.default}],execute:function(){o._RF.push({},"96397WT+hRI4IRIYwE/dnIt","HurtState",void 0);t("default",function(t){function o(n){return t.call(this)||this}n(o,t);var e=o.prototype;return e.onEnter=function(){console.log("进入受伤状态")},e.onUpdate=function(t){},e.onExit=function(){console.log("退出受伤状态")},o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/IdleState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./State.ts"],(function(t){var n,e,i,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.CharacterType},function(t){o=t.default}],execute:function(){e._RF.push({},"f2ed0n2Y1VHd6/2N//pexWn","IdleState",void 0);t("default",function(t){function e(n){var e;return(e=t.call(this)||this).entity=n,e}n(e,t);var o=e.prototype;return o.onEnter=function(){if(this.entity.getType()==i.CHARACTER){if(!this.entity.characterSkeletalAnimation)return void console.error("骨骼动画组件未初始化");this.entity.characterSkeletalAnimation.play("kugongnanidel")}},o.onUpdate=function(t){},o.onExit=function(){console.log("退出空闲状态")},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DissolveEffect.ts","./BubbleFead.ts","./GameEndUI.ts","./PlayerController.ts","./TreeController.ts","./WorldMap.ts","./GroundEffct.ts","./MathUtils.ts","./NewComponent.ts","./SoundManager.ts","./UIWarnManager.ts","./CameraMain.ts","./EventManager.ts","./EventType.ts","./Global.ts","./ResourceManager.ts","./SateMachine.ts","./touchEvent.ts","./Character.ts","./EnemyTree.ts","./Entity.ts","./enemyCharacter.ts","./goodsDrop.ts","./AttackState.ts","./CornHandOver.ts","./CutCornState.ts","./CutTreeState.ts","./DieState.ts","./HandOver.ts","./HurtState.ts","./IdleState.ts","./MoveState.ts","./State.ts","./super_html_playable.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(r){var t,n,e,a;return{setters:[function(r){t=r.cclegacy,n=r.v3,e=r.Vec3,a=r.Quat}],execute:function(){t._RF.push({},"0e3f6eoRwlPIZup+z8Au50b","MathUtils",void 0);var o=n();n(),n(),n(),r("MathUtil",function(){function r(){}return r.generateSmoothPath=function(r,t,n,o){void 0===n&&(n=100),void 0===o&&(o=5);var i=[],u=e.lerp(new e,r,t,.5);u.y+=o;for(var c=[],l=0;l<=n;l++){var s=l/n;c.push(this.quadraticBezier(r,u,t,s))}for(var v=0;v<c.length;v++){var f=void 0;if(0===v)f=(f=c[v+1].clone()).subtract(c[v]);else if(v===c.length-1)f=(f=c[v].clone()).subtract(c[v-1]);else{var h=c[v].clone();h.subtract(c[v-1]);var z=c[v+1].clone();z.subtract(c[v]),f=h.add(z).multiplyScalar(.5)}f.normalize();var d=new a;if(!f.equals(e.ZERO)){var y=new e(0,1,0);a.rotationTo(d,y,f)}i.push({position:c[v],rotation:d})}return i},r.quadraticBezier=function(r,t,n,a){var o=1-a,i=o*o,u=a*a,c=i*r.x+2*o*a*t.x+u*n.x,l=i*r.y+2*o*a*t.y+u*n.y,s=i*r.z+2*o*a*t.z+u*n.z;return new e(c,l,s)},r.getAngleBetweenQuats=function(r,t){var n=a.dot(r,t),e=Math.min(1,Math.max(-1,n));return 2*Math.acos(e)},r.localToWorldPos3D=function(r,t){if(!t.isValid)return console.warn("Target node is invalid!"),r.clone();var n=new e;return e.transformMat4(n,r,t.worldMatrix),n},r.signAngle=function(r,t,n){var a=e.angle(r,t);return e.cross(o,r,t),a*Math.sign(n.x*o.x+n.y*o.y+n.z*o.z)},r.eulerToForward=function(r){var t=new a;a.fromEuler(t,r.x,r.y,r.z);var n=new e(0,0,-1);return e.transformQuat(n,n,t),e.normalize(n,n),n},r.bezierCurve=function(r,t,n,a){var o=1-a,i=a*a,u=o*o,c=new e;return c.x=u*r.x+2*o*a*t.x+i*n.x,c.y=u*r.y+2*o*a*t.y+i*n.y,c.z=u*r.z+2*o*a*t.z+i*n.z,c},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MoveState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./State.ts","./Entity.ts","./Character.ts","./Global.ts"],(function(t){var e,i,o,n,s,a,r,h,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,n=t.Vec3,s=t.Quat},function(t){a=t.default},function(t){r=t.CharacterType},function(t){h=t.BehaviourType},function(t){l=t.Global}],execute:function(){var c;i._RF.push({},"65959JUkVBBsJKnM0Rc5wY9","MoveState",void 0);var p=o.ccclass;o.property,t("MoveState",p("MoveState")(c=function(t){function i(e){var i;return(i=t.call(this)||this).speed=0,i.targetPos=new n,i.isUpate=!1,i.stopDistance=2,i.callback=null,i.tempDir=new n,i.tempMoveVec=new n,i.tempNextPos=new n,i.tempForward=new n,i.tempRotation=new s,i.tempParentRotation=new s,i.tempParentRotationInv=new s,i.entity=e,i}e(i,t);var o=i.prototype;return o.onEnter=function(t){if(this.isUpate=!0,this.entity.getType()==r.CHARACTER){if(!this.entity.characterSkeletalAnimation)return void console.error("骨骼动画组件未初始化");this.entity.characterSkeletalAnimation.play("kugongnanpao")}this.entity.getBehaviour()==h.Tree||this.entity.getBehaviour()==h.FindEnemy?this.stopDistance=2:this.stopDistance=.5,this.speed=this.entity.getMoveSpeed(),this.callback=t},o.onUpdate=function(t){this.isUpate&&(l.soundManager.playPlayerRunSound(),this.entity.getBehaviour()==h.FindEnemy&&(this.entity.moveTargetWorldPos=this.entity.target.node.worldPosition),n.copy(this.targetPos,this.entity.moveTargetWorldPos),this.moveToTarget(t,this.targetPos)&&(this.isUpate=!1))},o.lookAtTarget=function(t){var e;n.subtract(this.tempForward,t,this.entity.node.worldPosition),this.tempForward.y=0,this.tempForward.normalize();var i=null==(e=this.entity.node.parent)?void 0:e.parent;i&&(i.getRotation(this.tempParentRotation),s.invert(this.tempParentRotationInv,this.tempParentRotation),n.transformQuat(this.tempForward,this.tempForward,this.tempParentRotationInv)),s.fromViewUp(this.tempRotation,this.tempForward,n.UP),this.entity.node.setRotation(this.tempRotation)},o.moveToTarget=function(t,e){n.subtract(this.tempDir,e,this.entity.node.worldPosition),this.tempDir.y=0;var i=this.tempDir.length();if(console.log("=================>",i,"====================>",this.stopDistance),i<this.stopDistance)return this.callback&&this.callback(this.entity),!0;this.tempDir.normalize();var o=this.speed*t;return o>=i?(this.callback&&this.callback(this.entity),console.log("=============moveDistance",e),this.entity.node.worldPosition=e.clone(),this.lookAtTarget(e),!0):(n.multiplyScalar(this.tempMoveVec,this.tempDir,o),n.add(this.tempNextPos,this.entity.node.worldPosition,this.tempMoveVec),this.entity.node.worldPosition=this.tempNextPos,this.lookAtTarget(e),!1)},o.onExit=function(){this.entity.moveTargetWorldPos=null,this.speed=0,this.targetPos.set(0,0,0),this.stopDistance=2,this.isUpate=!1,this.callback=null},i}(a))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/NewComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enemyCharacter.ts"],(function(e){var t,n,r,a,o,c,i,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,i=e.Component},function(e){s=e.enemyCharacter}],execute:function(){var l,u,p,h,y;o._RF.push({},"cf923kfxdtO5o8SOe5a1v3Q","NewComponent",void 0);var f=c.ccclass,m=c.property;e("NewComponent",(l=f("NewComponent"),u=m(s),l((y=t((h=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,r(t,"enemyCharacterTs",y,a(t)),t}n(t,e);var o=t.prototype;return o.attackEvent=function(){this.enemyCharacterTs&&this.enemyCharacterTs.attackEventCallBack(),console.log("丧尸的帧事件")},o.attackHitEvent=function(){this.enemyCharacterTs&&this.enemyCharacterTs.attacHitkEventCallBack()},t}(i)).prototype,"enemyCharacterTs",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts","./ResourceManager.ts","./Entity.ts","./Global.ts","./enemyCharacter.ts","./goodsDrop.ts","./EventManager.ts","./EventType.ts","./BubbleFead.ts"],(function(e){var t,r,a,n,o,i,s,c,h,l,d,u,v,g,f,C,m,P,p;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass,a=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e._decorator,s=e.Vec3,c=e.instantiate,h=e.Component},function(e){l=e.BehaviourType,d=e.Character},function(e){u=e.ResourceManager},function(e){v=e.CharacterType},function(e){g=e.Global},function(e){f=e.enemyCharacter},function(e){C=e.goodsDrop},function(e){m=e.eventMgr},function(e){P=e.EventType},function(e){p=e.BubbleFead}],execute:function(){var y,L;o._RF.push({},"475e8C6qpNEEZoS0ifdMB3X","PlayerController",void 0);var T=i.ccclass,I=e("PlayerController",T("PlayerController")(((L=function(e){function o(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).parentNode=null,t.birthNodesPos=[],t.endNodesPos=[],t.cornNodesPos=[],t.enemyHandOverPos=[],t.allCharacterPos=[],t.enemySelfLanPos=[],t.enemyParentNode=null,t.curCharacter=null,t.curCharacterIndex=1,t.curCharacterHandOverIndex=1,t.enemyDieNum=0,t.characterList=[],t.characterListPos=[],t.hp=3,t.attack=1,t}t(o,e);var i=o.prototype;return i.initCharacters=function(){var e=a(n().mark((function e(t,r,a,o,i,s,h){var l,f,C,m;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&(this.birthNodesPos=r),a&&(this.endNodesPos=a),o&&(this.cornNodesPos=o),i&&(this.enemyHandOverPos=i),s&&(this.allCharacterPos=s),h&&(this.enemySelfLanPos=h),this.parentNode=t,e.prev=7,e.next=10,u.instance.loadPrefab(g.characterPrefabPath);case 10:l=e.sent,f=0;case 12:if(!(f<r.length)){e.next=27;break}if(C=c(l),(m=C.getComponent(d)).handOverNode=t.getChildByName("treeHandOver"),m.cornHandOverNode=t.getChildByName("cornHandOver"),m){e.next=20;break}return console.error("角色预制体缺少Character组件: "+g.characterPrefabPath),e.abrupt("continue",24);case 20:m.setData(String(f),"player"+(f+1),this.hp,this.attack,v.CHARACTER),m.entitySetPosition(this.birthNodesPos[f].position),this.characterList.push(m),this.parentNode.addChild(C);case 24:f++,e.next=12;break;case 27:this.createCharacter(l),console.log("成功初始化 "+this.characterList.length+" 个角色"),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(7),console.error("角色初始化失败:",e.t0);case 34:case"end":return e.stop()}}),e,this,[[7,31]])})));return function(t,r,a,n,o,i,s){return e.apply(this,arguments)}}(),i.squenceMove=function(e,t){console.log("squenceMove == "+e.node.name,"===========>",e.node.position);var r=this.curCharacterIndex;console.log("initialIndex == "+r),console.log("this.curCharacterIndex == "+this.curCharacterIndex);for(var a=0;a<this.characterList.length;a++){var n=(r+a)%this.characterList.length,o=this.characterList[n];if(!o.getFindTarget())return console.log("initialIndex111111 == "+r),this.curCharacterIndex=(n+1)%this.characterList.length,o.setFindTarget(!0),o.setBehaviour(t),o.target=e,o.moveTargetWorldPos=e.node.worldPosition.clone(),o.strtMoveTree(),void console.log("initialIndex222222222 == "+this.curCharacterIndex)}console.log("没有找到可用的角色")},i.squenceHandOver=function(e,t){for(var r=0;r<this.characterListPos.length;r++){var a=this.characterListPos[r];a.entitySetPosition(new s(19.5,0,19.8)),a.node.active=!1}console.log("initialIndex squenceHandOver == "+this.curCharacterIndex);for(var n=0;n<this.characterList.length;n++){var o=this.characterList[n];o.woodNum>0&&(o.idle(),o.setFindTarget(!1),o.setBehaviour(l.Idel),o.setFindTarget(!0),o.curHanOverType=1,o.setBehaviour(t),o.target=this.birthNodesPos[Number(o.getId())],o.moveTargetWorldPos=o.target.worldPosition.clone(),o.strtMoveHandOver(),console.log("initialIndex squenceHandOver 1111111== "+this.curCharacterIndex))}},i.moveCornPos=function(){for(var e=this,t=function(t){t.idle(),t.setFindTarget(!1),t.setBehaviour(l.Idel),t.setFindTarget(!0),t.setBehaviour(l.ConrPost),t.target=e.cornNodesPos[Number(t.getId())],t.moveTargetWorldPos=t.target.worldPosition.clone(),t.moveCornPos()},r=function(){var r=e.characterList[a];r.getBehaviour()==l.CutTree?e.scheduleOnce((function(){t(r)}),2):t(r)},a=0;a<this.characterList.length;a++)r()},i.moveFindEnemyLandPos=function(e){for(var t=0;t<this.characterList.length;t++){var r=this.characterList[t];r.target=null,r.moveTargetWorldPos=null,r.setFindTarget(!0),r.setBehaviour(l.FindLandPos),r.target=this.enemySelfLanPos[Number(r.getId())],r.moveTargetWorldPos=r.target.worldPosition.clone();var a=e,n=a.getChildByName("SangshiPrefab_"+r.getId()).getComponent(f);r.findEnemyPos(n,a),n.target=r,n.moveTargetWorldPos=r.node.worldPosition.clone(),n.isFindCharacter=!0}},i.attackEnemy=function(e,t){"attack"!=e.getMachineName()&&(t.hp<=0||(e.target=t,e.setFindTarget(!0),e.useSkill((function(){}))))},i.moveFindEnemHandOver=function(){for(var e=this,t=function(t){t.idle(),t.setFindTarget(!1),t.setBehaviour(l.Idel),t.setFindTarget(!0),t.setBehaviour(l.EnemyHnadOverPos),t.target=e.enemyHandOverPos[Number(t.getId())],t.moveTargetWorldPos=t.target.worldPosition.clone(),t.findEnemyHandOver()},r=function(){var r=e.characterList[a];r.getBehaviour()==l.CutTree?e.scheduleOnce((function(){t(r)}),2):t(r)},a=0;a<this.characterList.length;a++)r()},i.resetState=function(){for(var e=0;e<this.characterList.length;e++){var t=this.characterList[e];t.woodNum=0,t.node.getChildByName("backpack").removeAllChildren(),t.setFindTarget(!1),t.setBehaviour(l.Idel),t.idle()}},i.resetBehaviour=function(){for(var e=0;e<this.characterList.length;e++){var t=this.characterList[e];t.setFindTarget(!1),t.setBehaviour(l.Idel),t.idle()}},i.allCharacterHanover=function(){for(var e=0,t=0;t<this.characterList.length;t++){var r=this.characterList[t];r.setFindTarget(!1),r.setBehaviour(l.Idel),r.getComponent(C).restoreItemsInAllBackpacks(),e++}e>=4&&m.emit(P.ENTITY_ENEMY_DIE,this)},i.cutCornController=function(e,t){var r,a=null!=(r={Arrow1:0,Arrow2:1,Arrow3:2,Arrow4:3}[e.name])?r:-1,n=this.characterList[a];n.getFindTarget()?console.log("在收割玉米的状态"):(e.getComponent(p)&&e.getComponent(p).hideFead(),n.groundEffect=t,n.setFindTarget(!0),n.setBehaviour(l.CutCorn),n.cutCorn((function(){})))},i.lockState=function(){for(var e=0;e<this.characterList.length;e++){var t=this.characterList[e];t.woodNum=0,t.cornNum=0,t.node.getChildByName("backpack").removeAllChildren(),t.node.getChildByName("backpack1").removeAllChildren(),t.setFindTarget(!0),t.setBehaviour(l.Idel),t.idle()}},i.GameHandOverComplate=function(){var e=this;this.lockState();for(var t=0,r=0;r<this.characterList.length;r++){var a=this.characterList[r];a.moveTargetWorldPos=this.allCharacterPos[t].worldPosition.clone(),t++,a.move((function(e){e.setFindTarget(!0),e.setBehaviour(l.Idel),e.idle()}))}for(var n=function(r){e.scheduleOnce((function(){var a=e.characterListPos[r];a.node.active=!0,a.moveTargetWorldPos=e.allCharacterPos[t-1].worldPosition.clone(),t++,a.move((function(e){e.setFindTarget(!0),e.setBehaviour(l.Idel),e.idle()}))}),.2*r)},o=0;o<this.characterListPos.length;o++)n(o)},i.createCharacter=function(e){for(var t=e,r=0;r<8;r++){var a=c(t),n=a.getComponent(d);n?(n.setData(String(4+r),"player"+(r+1+4),this.hp,this.attack,v.CHARACTER),n.entitySetPosition(new s(24,0,180)),this.characterListPos.push(n),this.parentNode.addChild(a)):console.error("角色预制体缺少Character组件: "+g.characterPrefabPath)}},i.getCharacters=function(){return this.characterList},i.getCharacterById=function(e){return this.characterList.find((function(t){return t.getId()===e}))||null},i.clearCharacters=function(){this.characterList.forEach((function(e){e.node&&e.node.isValid&&e.node.destroy()})),this.characterList=[]},r(o,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new o),this._instance}}]),o}(h))._instance=null,y=L))||y);e("playerController",I.Instance);o._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,o,s,a,i;return{setters:[function(e){r=e.createClass},function(e){t=e.cclegacy,n=e.resources,o=e.SpriteFrame,s=e.Prefab,a=e.AudioClip,i=e.Texture2D}],execute:function(){t._RF.push({},"a08f0aGxT5CK6ZwLA4Yc/9x","ResourceManager",void 0),e("ResourceManager",function(){function e(){this._resourceCache=new Map,this._loadingTasks=new Map}var t=e.prototype;return t.load=function(e,r,t){var o=this,s=this._resourceCache.get(e);if(s)return Promise.resolve(s);var a=this._loadingTasks.get(e);if(a)return a;var i=new Promise((function(s,a){n.load(e,r,t,(function(r,t){if(o._loadingTasks.delete(e),r)return console.error("资源加载失败: "+e,r),void a(r);o._resourceCache.set(e,t),s(t)}))}));return this._loadingTasks.set(e,i),i},t.loadSpriteFrame=function(e,r){return this.load(e,o,r)},t.loadPrefab=function(e,r){return this.load(e,s,r)},t.loadAudio=function(e,r){return this.load(e,a,r)},t.loadTexture=function(e,r){return this.load(e,i,r)},t.loadMultiple=function(e,r,t){var n=this,o=e.map((function(e){return n.load(e,r,t)}));return Promise.all(o)},t.release=function(e){this._resourceCache.get(e)&&(n.release(e),this._resourceCache.delete(e),console.log("资源已释放: "+e))},t.releaseMultiple=function(e){var r=this;e.forEach((function(e){return r.release(e)}))},t.releaseAll=function(){this._resourceCache.forEach((function(e,r){n.release(r)})),this._resourceCache.clear(),console.log("所有资源已释放")},t.isLoaded=function(e){return this._resourceCache.has(e)},t.getLoadedAsset=function(e){return this._resourceCache.get(e)},r(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SateMachine.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3dc7eK18glJCI64fUkK1BsJ","SateMachine",void 0);t("default",function(){function t(){this.currentState=null,this.states={}}var e=t.prototype;return e.addState=function(t,e){this.states[t]=e},e.setState=function(t,e){this.currentState&&this.currentState.onExit(e),this.currentState=this.states[t],this.currentState&&this.currentState.onEnter(e)},e.getState=function(){return this.currentState},e.getStateName=function(){for(var t in this.states)if(this.states[t]===this.currentState)return t;return null},e.update=function(t){this.currentState&&this.currentState.onUpdate(t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(t){var n,o,e,i,u,a,r,l,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){u=t.cclegacy,a=t._decorator,r=t.AudioSource,l=t.Component},function(t){p=t.Global}],execute:function(){var d,S,c,s,y,h,f,b,m,A,g,w,P,k,z,G,L,v,I,N,O,Y,U,C,M,R,T;u._RF.push({},"e4f9247SVFDuZrvhzM6lg0y","SoundManager",void 0);var B=a.ccclass,E=a.property;t("SoundManager",(d=B("SoundManager"),S=E({type:r,tooltip:"背景音乐"}),c=E({type:r,tooltip:"砍树"}),s=E({type:r,tooltip:"砍玉米"}),y=E({type:r,tooltip:"人物奔跑"}),h=E({type:r,tooltip:"敌人出现"}),f=E({type:r,tooltip:"攻击敌人声音"}),b=E({type:r,tooltip:"建筑掉落声音"}),m=E({type:r,tooltip:"交付"}),A=E({type:r,tooltip:"拾取"}),g=E({type:r,tooltip:"升级"}),w=E({type:r,tooltip:" 警告声音"}),P=E({type:r,tooltip:" 破碎音效"}),d((G=n((z=function(t){function n(){for(var n,o=arguments.length,u=new Array(o),a=0;a<o;a++)u[a]=arguments[a];return n=t.call.apply(t,[this].concat(u))||this,e(n,"BgSound",G,i(n)),e(n,"cutTreeSound",L,i(n)),e(n,"cutCronSound",v,i(n)),e(n,"playrRunSound",I,i(n)),e(n,"enemySound",N,i(n)),e(n,"attackEnemySound",O,i(n)),e(n,"animationSound",Y,i(n)),e(n,"handOverSound",U,i(n)),e(n,"pickUpSound",C,i(n)),e(n,"upSound",M,i(n)),e(n,"warnSound",R,i(n)),e(n,"shatterSound",T,i(n)),n}o(n,t);var u=n.prototype;return u.playShatterSound=function(){this.shatterSound.state!==r.AudioState.PLAYING&&this.shatterSound.playOneShot(this.shatterSound.clip,1)},u.playBgMusic=function(){this.BgSound.state!==r.AudioState.PLAYING&&this.BgSound.play()},u.playCutTreeSound=function(){this.cutTreeSound.state!==r.AudioState.PLAYING&&this.cutTreeSound.playOneShot(this.cutTreeSound.clip,1)},u.playWarnSound=function(){this.warnSound.state!==r.AudioState.PLAYING&&this.warnSound.playOneShot(this.warnSound.clip,1)},u.playCutCronSound=function(){this.cutCronSound.state!==r.AudioState.PLAYING&&this.cutCronSound.playOneShot(this.cutCronSound.clip,1)},u.playPlayerRunSound=function(){this.playrRunSound.state!==r.AudioState.PLAYING&&this.playrRunSound.play()},u.playEnemySound=function(){this.enemySound.state!==r.AudioState.PLAYING&&this.enemySound.play()},u.playAttackEnemySound=function(){this.attackEnemySound.state!==r.AudioState.PLAYING&&this.attackEnemySound.play()},u.playAnimationSound=function(){this.animationSound.state!==r.AudioState.PLAYING&&this.animationSound.playOneShot(this.animationSound.clip,1)},u.playHandOverSound=function(){this.handOverSound.state!==r.AudioState.PLAYING&&this.handOverSound.playOneShot(this.handOverSound.clip,1)},u.playPickUpSound=function(){this.pickUpSound.state!==r.AudioState.PLAYING&&this.pickUpSound.playOneShot(this.pickUpSound.clip,1)},u.playPickUpSound1=function(){this.pickUpSound.state!==r.AudioState.PLAYING&&this.pickUpSound.play()},u.playUpSound=function(){this.upSound.state!==r.AudioState.PLAYING&&this.upSound.play()},u.start=function(){p.soundManager=this},n}(l)).prototype,"BgSound",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(z.prototype,"cutTreeSound",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(z.prototype,"cutCronSound",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(z.prototype,"playrRunSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(z.prototype,"enemySound",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(z.prototype,"attackEnemySound",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(z.prototype,"animationSound",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(z.prototype,"handOverSound",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(z.prototype,"pickUpSound",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(z.prototype,"upSound",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(z.prototype,"warnSound",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(z.prototype,"shatterSound",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=z))||k));u._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Component}],execute:function(){n._RF.push({},"d5f84a5aXVC4aMuwmWmEqQB","State",void 0);t("default",function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).entity=void 0,e}return e(n,t),n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/super_html_playable.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"b50bfzlRsNNO4ENw+8c67aY","super_html_playable",void 0);var n=e("super_html_playable",function(){function e(){}var o=e.prototype;return o.download=function(){console.log("download"),window.super_html&&super_html.download()},o.game_end=function(){console.log("game end"),window.super_html&&super_html.game_end()},o.is_hide_download=function(){return!(!window.super_html||!super_html.is_hide_download)&&super_html.is_hide_download()},o.set_google_play_url=function(e){window.super_html&&(super_html.google_play_url=e)},o.set_app_store_url=function(e){window.super_html&&(super_html.appstore_url=e)},o.is_audio=function(){return window.super_html&&super_html.is_audio()||!0},e}());e("default",new n);o._RF.pop()}}}));

System.register("chunks:///_virtual/touchEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemyTree.ts","./EventManager.ts","./EventType.ts","./Character.ts","./Global.ts","./BubbleFead.ts","./super_html_playable.ts"],(function(e){var n,i,t,o,l,a,r,d,c,s,h,u,m,p,T,g,C,v,y,U;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,r=e.Camera,d=e.Vec3,c=e.Input,s=e.geometry,h=e.PhysicsSystem,u=e.Animation,m=e.Component},function(e){p=e.EnemyTree},function(e){T=e.eventMgr},function(e){g=e.EventType},function(e){C=e.BehaviourType},function(e){v=e.Global},function(e){y=e.BubbleFead},function(e){U=e.default}],execute:function(){var E,f,I,N,_;l._RF.push({},"6df3f9UGEhIib8CUusgNFp+","touchEvent",void 0);var S=a.ccclass,Y=a.property;e("touchEvent",(E=S("touchEvent"),f=Y(r),E((_=n((N=function(e){function n(){for(var n,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return n=e.call.apply(e,[this].concat(l))||this,t(n,"mainCamera",_,o(n)),n.originalScale=new d(1,1,1),n.upgradeNode=null,n.upgradeNode1=null,n.clickTreeUI=null,n.cornLandArrow=null,n.nameUUId=null,n.lastTouchTime=0,n.clickInterval=100,n.nameUIID=[],n}i(n,e);var l=n.prototype;return l.start=function(){},l.update=function(e){},l.onEnable=function(){this.node.on(c.EventType.TOUCH_START,this.onTouchStart.bind(this),this),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove.bind(this),this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this),this)},l.onDisable=function(){this.node.off(c.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},l.onTouchStart=function(e){var n=Date.now();if(!(n-this.lastTouchTime<this.clickInterval)){this.lastTouchTime=n;var i=e.getLocation(),t=new s.Ray;this.mainCamera.screenPointToRay(i.x,i.y,t);if(console.log("mask mask == 2"),h.instance.raycastClosest(t,2,1e7,!0)){var o=h.instance.raycastClosestResult;if(o.collider){this.clickTreeUI=null;var l=o.collider.node.name;if(l.startsWith("UI_famuzhiyin")){var a;if(this.nameUUId?this.nameUUId!=o.collider.node.uuid&&(this.nameUUId=o.collider.node.uuid,-1===this.nameUIID.indexOf(this.nameUUId)&&(this.nameUIID.push(this.nameUUId),v.clickNum+=1)):this.nameUUId=o.collider.node.uuid,null!=(a=o.collider.node.parent.getChildByName("UI_ZYXS"))&&a.active&&(o.collider.node.parent.getChildByName("UI_ZYXS").active=!1),this.clickTreeUI=o.collider.node,this.clickTreeUI.scale=this.clickTreeUI.scale.clone().multiplyScalar(.8),!v.isClickUpLandTree)return;var r=o.collider.node.parent.getComponent(p),c=r.getFindState();v.isClickEnemy&&0==o.collider.node.getComponent(y).getFeadState()&&(c=!0),c&&(o.collider.node.getComponent(y)&&o.collider.node.getComponent(y).hideFead(),T.emit(g.ENTITY_MOVE_TREE,r,C.Tree))}else if("upgradeNode"==l){var m;null!=(m=o.collider.node.getChildByName("UI_ZYXS"))&&m.active&&(o.collider.node.getChildByName("UI_ZYXS").active=!1),this.upgradeNode=o.collider.node,this.upgradeNode.scale=new d(.8,.8,.8),v.treeHandOver=!0,T.emit(g.ENTITY_MOVE_HAND_OVER,o.collider,C.HandOver)}else if("upgradeNode-001"==l){if(v.isUpgrade){var U;if(!v.isClickUpgradeEnemy)v.isClickUpgradeEnemy=!0,v.soundManager.playWarnSound(),o.collider.node.getChildByName("2dNode").getChildByName("scaleNode").getChildByName("Sprite-red").active=!0,o.collider.node.getComponent(u).stop(),o.collider.node.getComponent(u).play("shanhong"),T.emit(g.SHOW_ENEMY,o.collider,C.EnemyHnadOverPos);if(!v.isClickUpgrade)return void v.soundManager.playWarnSound();null!=(U=o.collider.node.getChildByName("UI_ZYXS"))&&U.active&&(o.collider.node.getChildByName("UI_ZYXS").active=!1),3!=v.upgradeUIAnimtion&&(v.upgradeUIAnimtion=3),this.upgradeNode1=o.collider.node,this.upgradeNode1.scale=new d(.8,.8,.8),T.emit(g.ENTITY_ENEMY_HAND_OVER,o.collider,C.EnemyHnadOverPos)}}else if("TreeArrow"==l){var E;null!=(E=o.collider.node.getChildByName("UI_ZYXS"))&&E.active&&(o.collider.node.getChildByName("UI_ZYXS").active=!1),v.isMoveCamreToCorn=!0,T.emit(g.ENTITY_TREE_TRANSMIT,o.collider.node)}else if(l.startsWith("Arrow")){var f;if(!v.isClickUpLandCorn||v.isMoveCamreToCorn)return;null!=(f=o.collider.node.getChildByName("UI_ZYXS"))&&f.active&&(o.collider.node.getChildByName("UI_ZYXS").active=!1);var I=parseInt(l.replace("Arrow",""));v.clickCornLand[I]=1,this.cornLandArrow=o.collider.node,this.cornLandArrow.scale=this.cornLandArrow.scale.clone().multiplyScalar(.8),T.emit(g.ENTITY_CORN_CUT,o.collider.node)}else if(l.startsWith("TreeArrow-001")){var N;null!=(N=o.collider.node.getChildByName("UI_ZYXS"))&&N.active&&(o.collider.node.getChildByName("UI_ZYXS").active=!1),T.emit(g.ENTITY_ENEMY_TRANSMIT,o.collider.node)}else if(l.startsWith("SangshiPrefab")){var _;if(null!=(_=o.collider.node.parent.getChildByName("UI_gongji_3").getChildByName("UI_ZYXS"))&&_.active&&(o.collider.node.parent.getChildByName("UI_gongji_3").getChildByName("UI_ZYXS").active=!1),o.collider.node.getComponent(y)){if(o.collider.node.getComponent(y).getFeadState())return;o.collider.node.getComponent(y).hideFead(),T.emit(g.ENTITY_CLICK_ENEMY,o.collider.node)}}console.log("点击到了模型:",o.collider.node.name)}}else console.log("未检测到碰撞体")}},l.onTouchMove=function(e){},l.onTouchEnd=function(e){this.upgradeNode&&(this.upgradeNode.scale=new d(1,1,1)),this.upgradeNode1&&(this.upgradeNode1.scale=new d(1,1,1)),this.clickTreeUI&&(this.clickTreeUI.scale=this.clickTreeUI.scale.clone().multiplyScalar(1.2)),!this.cornLandArrow||(this.cornLandArrow.scale=new d(1,1,1),v.isClickUpLandCorn)},l.btnDown=function(){U.download()},n}(m)).prototype,"mainCamera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=N))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/TreeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemyTree.ts"],(function(e){var t,n,r,i;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,r=e._decorator},function(e){i=e.EnemyTree}],execute:function(){var o,s;n._RF.push({},"18c865w64VFGpuWR2PQlCQj","TreeController",void 0);var u=r.ccclass,c=(r.property,e("TreeController",u("TreeController")(((s=function(){function e(){this.enemyTreeList=[],this.curCutTreeIndex=0,this.unLockTreeNum=4,this.parentNode=null}var n=e.prototype;return n.initAllTree=function(e){this.parentNode=e;for(var t=0;t<this.parentNode.children.length;t++){var n=this.parentNode.children[t].getComponent(i);t<this.unLockTreeNum&&(n.setFindState(!0),n.showArrowTarger(),this.curCutTreeIndex+=1),this.enemyTreeList.push(n)}},n.onLoad=function(){},n.netxTree=function(){if(!(this.curCutTreeIndex>=this.enemyTreeList.length)){var e=this.enemyTreeList[this.curCutTreeIndex];e.setFindState(!0),e.showArrowTarger(),this.curCutTreeIndex+=1}},n.update=function(e){},t(e,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=null,o=s))||o));e("treeController",c.Instance);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIWarnManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(n){var t,a,o,i,c,e,r;return{setters:[function(n){t=n.inheritsLoose},function(n){a=n.cclegacy,o=n._decorator,i=n.UIOpacity,c=n.tween,e=n.Component},function(n){r=n.Global}],execute:function(){var l;a._RF.push({},"7b311za8IhH5ZIo08aaVwJV","UIWarnManager",void 0);var u=o.ccclass;o.property,n("UIWarnManager",u("UIWarnManager")(l=function(n){function a(){for(var t,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this)._isTrue=!0,t.tweenWarn=null,t.callFunc=null,t}t(a,n);var o=a.prototype;return o.start=function(){r.warnUI=this,this.node.active=!1},o.playWarnFadeAnimation=function(){var n,t,a=this;this.node.active=!0;var o=(null==(n=this.node)?void 0:n.getComponent(i))||(null==(t=this.node)?void 0:t.addComponent(i));this.stopWarnFadeAnimation(),o.opacity=0,this.callFunc=function(){c(o).to(.5,{opacity:255},{easing:"quadOut"}).to(.5,{opacity:0},{easing:"quadIn"}).call((function(){a.callFunc&&a.callFunc()})).start()},this.callFunc()},o.stopWarnFadeAnimation=function(){this.callFunc&&(this.callFunc=null)},a}(e))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/WorldMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./EventType.ts","./EnemyTree.ts","./Global.ts","./GroundEffct.ts","./enemyCharacter.ts","./TreeController.ts","./PlayerController.ts","./super_html_playable.ts","./BubbleFead.ts"],(function(e){var n,t,i,a,r,o,l,u,s,c,d,p,m,h,g,f,y,b,N,C,v,E,A,T;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Node,u=e.Material,s=e.Animation,c=e.MeshRenderer,d=e.tween,p=e.Sprite,m=e.Label,h=e.Component},function(e){g=e.eventMgr},function(e){f=e.EventType},function(e){y=e.EnemyTree},function(e){b=e.Global},function(e){N=e.GroundEffct},function(e){C=e.enemyCharacter},function(e){v=e.treeController},function(e){E=e.playerController},function(e){A=e.default},function(e){T=e.BubbleFead}],execute:function(){var _,O,P,I,H,w,S,U,M,k,B,L,G,Y,z,D,R,W,F,j,V,Z,x,q,X,J,K,Q,$,ee,ne,te,ie,ae,re,oe,le,ue,se,ce,de;r._RF.push({},"b6ba4O3HP1GF4A8jPUiZJGQ","WorldMap",void 0);var pe=o.ccclass,me=o.property;e("WorldMap",(_=pe("WorldMap"),O=me(l),P=me(l),I=me(l),H=me(l),w=me(l),S=me(l),U=me(N),M=me(l),k=me(l),B=me(l),L=me({type:l,tooltip:"birshPos1"}),G=me(u),Y=me(u),z=me({type:l,tooltip:"endPos1"}),D=me({type:l,tooltip:"enemySelfPos1"}),R=me({type:l,tooltip:"cornPos1"}),W=me({type:l,tooltip:"enemyHandOverPos1"}),F=me({type:l,tooltip:"gameOverPos1"}),j=me(l),_((x=n((Z=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,i(n,"mainCamera",x,a(n)),i(n,"greenScript",q,a(n)),i(n,"greenScript_1",X,a(n)),i(n,"treeArrow",J,a(n)),i(n,"upgradeNodep",K,a(n)),n.isShowUpgradeNodep=!1,i(n,"upgradeNodep1",Q,a(n)),i(n,"GroundEffect",$,a(n)),i(n,"enemyParent",ee,a(n)),i(n,"characterParent",ne,a(n)),i(n,"treeParentNode",te,a(n)),i(n,"birthNodes",ie,a(n)),i(n,"materialHouseBase",ae,a(n)),i(n,"meterialHouseChange",re,a(n)),i(n,"endNodes",oe,a(n)),i(n,"enemySelfLanPos",le,a(n)),i(n,"cronNodesPos",ue,a(n)),i(n,"enemyHandOverPos",se,a(n)),i(n,"allCharacterPos",ce,a(n)),n.upgradeUIAnmationTree=null,n.upgradeUIAnmationEnemy=null,n.changeAnimation=null,i(n,"gameEndUI",de,a(n)),n.isComplate=!1,n.isAniTrue=!1,n}t(n,e);var r=n.prototype;return r.start=function(){A.set_google_play_url("https://play.google.com/store/apps/details?id=com.funplus.ts.global"),A.set_app_store_url("https://play.google.com/store/apps/details?id=com.funplus.ts.global"),this.upgradeUIAnmationEnemy=this.upgradeNodep1.getComponent(s),this.upgradeUIAnmationTree=this.upgradeNodep.getComponent(s),this.initAll(),b.soundManager.playBgMusic()},r.initAll=function(){v.initAllTree(this.treeParentNode),E.initCharacters(this.characterParent,this.birthNodes,this.endNodes,this.cronNodesPos,this.enemyHandOverPos,this.allCharacterPos,this.enemySelfLanPos),this.onListenerEvent()},r.onListenerEvent=function(){g.on(f.ENTITY_MOVE_TREE,this.moveTreeCallBack),g.on(f.ENTITY_MOVE_HAND_OVER,this.moveHandOver.bind(this)),g.on(f.ENTITY_HAND_OVER_ADD,this.updateHandOverProgress.bind(this)),g.on(f.ENTITY_TREE_COMPLATE,this.treeUpgradeComplate.bind(this)),g.on(f.ENTITY_TREE_TRANSMIT,this.treeTransmitCallback.bind(this)),g.on(f.ENTITY_CORN_CUT,this.cornCutCallback.bind(this)),g.on(f.ENTITY_ENEMY_TRANSMIT,this.enemyTransmitCallback.bind(this)),g.on(f.ENTITY_ENEMY_DIE,this.enemyDieCallback.bind(this)),g.on(f.ENTITY_ENEMY_HAND_OVER,this.enemyHandOverCallback.bind(this)),g.on(f.ENTITY_CORNHAND_OVER_ADD,this.enemyHandeOverAdd.bind(this)),g.on(f.ENTITY_CORN_COMPLATE,this.enemyHandOverComplate.bind(this)),g.on(f.ENTITY_CLICK_ENEMY,this.clickEnemyAttack.bind(this)),g.on(f.ENTITY_SHOW_TREEHANDE,this.showTreeHande.bind(this)),g.on(f.ENTITY_ALL_DIE,this.allDieCallback.bind(this)),g.on(f.SHOW_ENEMY,this.showCallBack.bind(this)),g.on(f.GAME_OVER,this.gameOver.bind(this)),g.on(f.ENTITY_HAND_OVER_NO,this.handoverNo.bind(this))},r.handoverNo=function(){this.treeParentNode.children.forEach((function(e){if(e.active){var n=e.getComponent(y);n.animationNum<4&&(e.getComponent(y).setFindState(!0),console.log("enemy.animationNum enemy.animationNum ",n.animationNum),e.getChildByName("UI_famuzhiyin").getComponent(T).Show1(n.curCollectNum))}}))},r.showCallBack=function(){var e=this,n=this.GroundEffect.enemyLandHouse.getChildByName("shengjiqian").getChildByName("posun").getComponent(c);d(n.node).sequence(d().call((function(){n.material=e.meterialHouseChange})),d().delay(.2),d().call((function(){n.material=e.materialHouseBase})),d().delay(.2)).repeat(5).start(),this.enemyParent.active||(this.enemyParent.active=!0)},r.gameOver=function(){var e=this;this.scheduleOnce((function(){b.isClickUpgrade=!0,e.upgradeNodep1.getChildByName("2dNode").getChildByName("scaleNode").getChildByName("Sprite-red").active=!1,3!=b.upgradeUIAnimtion&&(b.upgradeUIAnimtion=3),b.soundManager.playShatterSound();var n=e.upgradeNodep1.getChildByName("TX_posun");n.active=!0,e.isAniTrue||(e.isAniTrue=!0,n.getComponent(s).play(),n.getComponent(s).once(s.EventType.FINISHED,(function(){e.upgradeNodep1.getChildByName("UI_ZYXS").active=!0})))}),1)},r.allDieCallback=function(){E.allCharacterHanover()},r.moveTreeCallBack=function(e,n){E.squenceMove(e,n)},r.moveHandOver=function(e,n){E.squenceHandOver(e,n)},r.showTreeHande=function(){this.upgradeNodep.getChildByName("UI_ZYXS").active=!0},r.updateHandOverProgress=function(){var e=this.greenScript.getComponent(p),n=e.node.getParent().getChildByName("Label").getComponent(m),t=e.node.getParent().getChildByName("Label-001").getComponent(m),i=Math.max(0,Math.min(b.treeHandOverNum,b.treeHandOverNumLimit)),a=Math.max(1,b.treeHandOverNumLimit);n.string=i.toString(),t.string="/"+a.toString();var r=i/a;e.fillRange=r,console.log("交付进度: "+Math.round(100*r)+"% ("+i+"/"+a+")")},r.treeUpgradeComplate=function(){var e=this;this.upgradeNodep.active=!1,this.treeParentNode.children.forEach((function(e){e.active&&(e.getChildByName("UI_famuzhiyin").active=!1)})),this.GroundEffect.upgradeTreeHouseAnimation((function(){e.GroundEffect.passAnimation1(),e.scheduleOnce((function(){e.treeArrow.active=!0}),2.4)}))},r.treeTransmitCallback=function(e){this.treeParentNode.children.forEach((function(e){e.getChildByName("UI_famuzhiyin").active=!1})),this.GroundEffect.ArrowgroundObject2_1.active=!0,this.GroundEffect.ArrowgroundObject2_2.active=!0,this.GroundEffect.ArrowgroundObject2_3.active=!0,this.GroundEffect.ArrowgroundObject2_4.active=!0,b.isClickUpLandTree=!1,this.GroundEffect.passAnimation11(),this.treeArrow.active=!1,E.resetBehaviour(),E.moveCornPos()},r.cornCutCallback=function(e){for(var n=1;n<b.clickCornLand.length;n++)if(0==b.clickCornLand[n]){this.GroundEffect["ArrowgroundObject2_"+n].getChildByName("UI_ZYXS").active=!0;break}E.cutCornController(e,this.GroundEffect)},r.enemyTransmitCallback=function(e){var n=this;this.upgradeNodep1.active=!0,b.upgradeAnimationgPlayTyep=2,b.upgradeUIAnimtion=1,b.isStartMoveEnemyLand=!0,b.isClickUpLandCorn=!1,E.resetBehaviour(),this.schedule((function(){n.GroundEffect.hideCornArrow()}),3),this.GroundEffect.passAnimation21(),E.moveFindEnemyLandPos(this.enemyParent)},r.clickEnemyAttack=function(e){console.log("点击攻击敌人");var n=e.getComponent(C),t=n.target;E.attackEnemy(t,n)},r.enemyDieCallback=function(e){this.upgradeNodep1.active=!0,b.warnUI.stopWarnFadeAnimation(),b.isClickUpLandTree=!0,b.isClickEnemy=!0,this.GroundEffect.showAllTreeClick(),b.isEnemyCutTree=!0},r.enemyHandOverCallback=function(){E.moveFindEnemHandOver()},r.enemyHandeOverAdd=function(){var e=this.greenScript_1.getComponent(p),n=e.node.getParent().getChildByName("Label").getComponent(m),t=e.node.getParent().getChildByName("Label-001").getComponent(m),i=Math.max(0,Math.min(b.cornHandOverNum,b.cornHandOverNumLimit)),a=Math.max(1,b.cornHandOverNumLimit);n.string=i.toString(),t.string="/"+a.toString();var r=i/a;e.fillRange=r,console.log("交付进度: "+Math.round(100*r)+"% ("+i+"/"+a+")")},r.enemyHandOverComplate=function(e){var n=this;this.isComplate||(this.isComplate=!0,this.scheduleOnce((function(){n.upgradeNodep1.active=!1}),.1),this.scheduleOnce((function(){n.GroundEffect.upgradeEnemyHouseAnimation((function(){E.GameHandOverComplate(),n.scheduleOnce((function(){n.GroundEffect.passAnimation3(),n.gameEndUI.active=!0}),1)}))}),.12)),console.log("CornHandOverComplate")},r.update=function(e){if(5!=b.clickNum||this.isShowUpgradeNodep||this.upgradeNodep.active||(this.upgradeNodep.active=!0,this.isShowUpgradeNodep=!0,b.upgradeUIAnimtion=1),1==b.upgradeAnimationgPlayTyep?(this.changeAnimation=this.upgradeUIAnmationTree,b.upgradeAnimationgPlayTyep=0):2==b.upgradeAnimationgPlayTyep&&(this.changeAnimation=this.upgradeUIAnmationEnemy,b.upgradeAnimationgPlayTyep=0),this.upgradeNodep.active||this.upgradeNodep1.active)if(1==b.upgradeUIAnimtion){this.changeAnimation.stop(),b.upgradeUIAnimtion=2;var n=this.changeAnimation.getState("SJZY");if(!n||n.isPlaying)return;this.changeAnimation.play("SJZY")}else if(3==b.upgradeUIAnimtion){b.upgradeUIAnimtion=4,this.changeAnimation.stop();var t=this.changeAnimation.getState("WoodTDAni");if(t.speed=2,!t||t.isPlaying)return;this.changeAnimation.play("WoodTDAni")}else if(5==b.upgradeUIAnimtion||0==b.upgradeUIAnimtion){this.changeAnimation.stop(),this.changeAnimation.getState("WoodTDAni").speed=1,this.changeAnimation.play("WoodTDAni"),b.upgradeUIAnimtion=-1}},n}(h)).prototype,"mainCamera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(Z.prototype,"greenScript",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(Z.prototype,"greenScript_1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(Z.prototype,"treeArrow",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(Z.prototype,"upgradeNodep",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(Z.prototype,"upgradeNodep1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(Z.prototype,"GroundEffect",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(Z.prototype,"enemyParent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(Z.prototype,"characterParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(Z.prototype,"treeParentNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(Z.prototype,"birthNodes",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ae=n(Z.prototype,"materialHouseBase",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(Z.prototype,"meterialHouseChange",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(Z.prototype,"endNodes",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=n(Z.prototype,"enemySelfLanPos",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ue=n(Z.prototype,"cronNodesPos",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),se=n(Z.prototype,"enemyHandOverPos",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce=n(Z.prototype,"allCharacterPos",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de=n(Z.prototype,"gameEndUI",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=Z))||V));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});